var al=Object.defineProperty;var ul=(n,e,t)=>e in n?al(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Z=(n,e,t)=>ul(n,typeof e!="symbol"?e+"":e,t);function Br(n,e){return function(){return n.apply(e,arguments)}}const{toString:cl}=Object.prototype,{getPrototypeOf:pi}=Object,{iterator:hn,toStringTag:qr}=Symbol,mn=(n=>e=>{const t=cl.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ce=n=>(n=n.toLowerCase(),e=>mn(e)===n),gn=n=>e=>typeof e===n,{isArray:ht}=Array,Pt=gn("undefined");function fl(n){return n!==null&&!Pt(n)&&n.constructor!==null&&!Pt(n.constructor)&&ce(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Or=Ce("ArrayBuffer");function dl(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Or(n.buffer),e}const pl=gn("string"),ce=gn("function"),Gr=gn("number"),yn=n=>n!==null&&typeof n=="object",hl=n=>n===!0||n===!1,Jt=n=>{if(mn(n)!=="object")return!1;const e=pi(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(qr in n)&&!(hn in n)},ml=Ce("Date"),gl=Ce("File"),yl=Ce("Blob"),Tl=Ce("FileList"),vl=n=>yn(n)&&ce(n.pipe),Cl=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ce(n.append)&&((e=mn(n))==="formdata"||e==="object"&&ce(n.toString)&&n.toString()==="[object FormData]"))},_l=Ce("URLSearchParams"),[xl,El,Sl,Al]=["ReadableStream","Request","Response","Headers"].map(Ce),wl=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ft(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),ht(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let u;for(i=0;i<a;i++)u=r[i],e.call(null,n[u],u,n)}}function Hr(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const He=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zr=n=>!Pt(n)&&n!==He;function $n(){const{caseless:n}=zr(this)&&this||{},e={},t=(i,o)=>{const r=n&&Hr(e,o)||o;Jt(e[r])&&Jt(i)?e[r]=$n(e[r],i):Jt(i)?e[r]=$n({},i):ht(i)?e[r]=i.slice():e[r]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ft(arguments[i],t);return e}const kl=(n,e,t,{allOwnKeys:i}={})=>(Ft(e,(o,r)=>{t&&ce(o)?n[r]=Br(o,t):n[r]=o},{allOwnKeys:i}),n),Il=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Rl=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Ml=(n,e,t,i)=>{let o,r,a;const u={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),r=o.length;r-- >0;)a=o[r],(!i||i(a,n,e))&&!u[a]&&(e[a]=n[a],u[a]=!0);n=t!==!1&&pi(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Pl=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},Nl=n=>{if(!n)return null;if(ht(n))return n;let e=n.length;if(!Gr(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Dl=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&pi(Uint8Array)),bl=(n,e)=>{const i=(n&&n[hn]).call(n);let o;for(;(o=i.next())&&!o.done;){const r=o.value;e.call(n,r[0],r[1])}},Ll=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Fl=Ce("HTMLFormElement"),Ul=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),zi=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Vl=Ce("RegExp"),Jr=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Ft(t,(o,r)=>{let a;(a=e(o,r,n))!==!1&&(i[r]=a||o)}),Object.defineProperties(n,i)},$l=n=>{Jr(n,(e,t)=>{if(ce(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ce(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Bl=(n,e)=>{const t={},i=o=>{o.forEach(r=>{t[r]=!0})};return ht(n)?i(n):i(String(n).split(e)),t},ql=()=>{},Ol=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Gl(n){return!!(n&&ce(n.append)&&n[qr]==="FormData"&&n[hn])}const Hl=n=>{const e=new Array(10),t=(i,o)=>{if(yn(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const r=ht(i)?[]:{};return Ft(i,(a,u)=>{const f=t(a,o+1);!Pt(f)&&(r[u]=f)}),e[o]=void 0,r}}return i};return t(n,0)},zl=Ce("AsyncFunction"),Jl=n=>n&&(yn(n)||ce(n))&&ce(n.then)&&ce(n.catch),Wr=((n,e)=>n?setImmediate:e?((t,i)=>(He.addEventListener("message",({source:o,data:r})=>{o===He&&r===t&&i.length&&i.shift()()},!1),o=>{i.push(o),He.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ce(He.postMessage)),Wl=typeof queueMicrotask<"u"?queueMicrotask.bind(He):typeof process<"u"&&process.nextTick||Wr,Zl=n=>n!=null&&ce(n[hn]),C={isArray:ht,isArrayBuffer:Or,isBuffer:fl,isFormData:Cl,isArrayBufferView:dl,isString:pl,isNumber:Gr,isBoolean:hl,isObject:yn,isPlainObject:Jt,isReadableStream:xl,isRequest:El,isResponse:Sl,isHeaders:Al,isUndefined:Pt,isDate:ml,isFile:gl,isBlob:yl,isRegExp:Vl,isFunction:ce,isStream:vl,isURLSearchParams:_l,isTypedArray:Dl,isFileList:Tl,forEach:Ft,merge:$n,extend:kl,trim:wl,stripBOM:Il,inherits:Rl,toFlatObject:Ml,kindOf:mn,kindOfTest:Ce,endsWith:Pl,toArray:Nl,forEachEntry:bl,matchAll:Ll,isHTMLForm:Fl,hasOwnProperty:zi,hasOwnProp:zi,reduceDescriptors:Jr,freezeMethods:$l,toObjectSet:Bl,toCamelCase:Ul,noop:ql,toFiniteNumber:Ol,findKey:Hr,global:He,isContextDefined:zr,isSpecCompliantForm:Gl,toJSONObject:Hl,isAsyncFn:zl,isThenable:Jl,setImmediate:Wr,asap:Wl,isIterable:Zl};function V(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}C.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});const Zr=V.prototype,Kr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Kr[n]={value:n}});Object.defineProperties(V,Kr);Object.defineProperty(Zr,"isAxiosError",{value:!0});V.from=(n,e,t,i,o,r)=>{const a=Object.create(Zr);return C.toFlatObject(n,a,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),V.call(a,n.message,e,t,i,o),a.cause=n,a.name=n.name,r&&Object.assign(a,r),a};const Kl=null;function Bn(n){return C.isPlainObject(n)||C.isArray(n)}function Yr(n){return C.endsWith(n,"[]")?n.slice(0,-2):n}function Ji(n,e,t){return n?n.concat(e).map(function(o,r){return o=Yr(o),!t&&r?"["+o+"]":o}).join(t?".":""):e}function Yl(n){return C.isArray(n)&&!n.some(Bn)}const Xl=C.toFlatObject(C,{},null,function(e){return/^is[A-Z]/.test(e)});function Tn(n,e,t){if(!C.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=C.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,T){return!C.isUndefined(T[y])});const i=t.metaTokens,o=t.visitor||d,r=t.dots,a=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(e);if(!C.isFunction(o))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(!f&&C.isBlob(m))throw new V("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?f&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,y,T){let v=m;if(m&&!T&&typeof m=="object"){if(C.endsWith(y,"{}"))y=i?y:y.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&Yl(m)||(C.isFileList(m)||C.endsWith(y,"[]"))&&(v=C.toArray(m)))return y=Yr(y),v.forEach(function(x,w){!(C.isUndefined(x)||x===null)&&e.append(a===!0?Ji([y],w,r):a===null?y:y+"[]",c(x))}),!1}return Bn(m)?!0:(e.append(Ji(T,y,r),c(m)),!1)}const p=[],h=Object.assign(Xl,{defaultVisitor:d,convertValue:c,isVisitable:Bn});function g(m,y){if(!C.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(m),C.forEach(m,function(v,_){(!(C.isUndefined(v)||v===null)&&o.call(e,v,C.isString(_)?_.trim():_,y,h))===!0&&g(v,y?y.concat(_):[_])}),p.pop()}}if(!C.isObject(n))throw new TypeError("data must be an object");return g(n),e}function Wi(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function hi(n,e){this._pairs=[],n&&Tn(n,this,e)}const Xr=hi.prototype;Xr.append=function(e,t){this._pairs.push([e,t])};Xr.toString=function(e){const t=e?function(i){return e.call(this,i,Wi)}:Wi;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Ql(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qr(n,e,t){if(!e)return n;const i=t&&t.encode||Ql;C.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let r;if(o?r=o(e,t):r=C.isURLSearchParams(e)?e.toString():new hi(e,t).toString(i),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class Zi{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){C.forEach(this.handlers,function(i){i!==null&&e(i)})}}const jr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jl=typeof URLSearchParams<"u"?URLSearchParams:hi,ea=typeof FormData<"u"?FormData:null,ta=typeof Blob<"u"?Blob:null,na={isBrowser:!0,classes:{URLSearchParams:jl,FormData:ea,Blob:ta},protocols:["http","https","file","blob","url","data"]},mi=typeof window<"u"&&typeof document<"u",qn=typeof navigator=="object"&&navigator||void 0,ia=mi&&(!qn||["ReactNative","NativeScript","NS"].indexOf(qn.product)<0),oa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ra=mi&&window.location.href||"http://localhost",sa=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mi,hasStandardBrowserEnv:ia,hasStandardBrowserWebWorkerEnv:oa,navigator:qn,origin:ra},Symbol.toStringTag,{value:"Module"})),oe={...sa,...na};function la(n,e){return Tn(n,new oe.classes.URLSearchParams,Object.assign({visitor:function(t,i,o,r){return oe.isNode&&C.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function aa(n){return C.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ua(n){const e={},t=Object.keys(n);let i;const o=t.length;let r;for(i=0;i<o;i++)r=t[i],e[r]=n[r];return e}function es(n){function e(t,i,o,r){let a=t[r++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),f=r>=t.length;return a=!a&&C.isArray(o)?o.length:a,f?(C.hasOwnProp(o,a)?o[a]=[o[a],i]:o[a]=i,!u):((!o[a]||!C.isObject(o[a]))&&(o[a]=[]),e(t,i,o[a],r)&&C.isArray(o[a])&&(o[a]=ua(o[a])),!u)}if(C.isFormData(n)&&C.isFunction(n.entries)){const t={};return C.forEachEntry(n,(i,o)=>{e(aa(i),o,t,0)}),t}return null}function ca(n,e,t){if(C.isString(n))try{return(e||JSON.parse)(n),C.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ut={transitional:jr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,r=C.isObject(e);if(r&&C.isHTMLForm(e)&&(e=new FormData(e)),C.isFormData(e))return o?JSON.stringify(es(e)):e;if(C.isArrayBuffer(e)||C.isBuffer(e)||C.isStream(e)||C.isFile(e)||C.isBlob(e)||C.isReadableStream(e))return e;if(C.isArrayBufferView(e))return e.buffer;if(C.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return la(e,this.formSerializer).toString();if((u=C.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Tn(u?{"files[]":e}:e,f&&new f,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),ca(e)):e}],transformResponse:[function(e){const t=this.transitional||Ut.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(C.isResponse(e)||C.isReadableStream(e))return e;if(e&&C.isString(e)&&(i&&!this.responseType||o)){const a=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?V.from(u,V.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:oe.classes.FormData,Blob:oe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],n=>{Ut.headers[n]={}});const fa=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),da=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(a){o=a.indexOf(":"),t=a.substring(0,o).trim().toLowerCase(),i=a.substring(o+1).trim(),!(!t||e[t]&&fa[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Ki=Symbol("internals");function _t(n){return n&&String(n).trim().toLowerCase()}function Wt(n){return n===!1||n==null?n:C.isArray(n)?n.map(Wt):String(n)}function pa(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const ha=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Dn(n,e,t,i,o){if(C.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!C.isString(e)){if(C.isString(i))return e.indexOf(i)!==-1;if(C.isRegExp(i))return i.test(e)}}function ma(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function ga(n,e){const t=C.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,r,a){return this[i].call(this,e,o,r,a)},configurable:!0})})}let fe=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function r(u,f,c){const d=_t(f);if(!d)throw new Error("header name must be a non-empty string");const p=C.findKey(o,d);(!p||o[p]===void 0||c===!0||c===void 0&&o[p]!==!1)&&(o[p||f]=Wt(u))}const a=(u,f)=>C.forEach(u,(c,d)=>r(c,d,f));if(C.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(C.isString(e)&&(e=e.trim())&&!ha(e))a(da(e),t);else if(C.isObject(e)&&C.isIterable(e)){let u={},f,c;for(const d of e){if(!C.isArray(d))throw TypeError("Object iterator must return a key-value pair");u[c=d[0]]=(f=u[c])?C.isArray(f)?[...f,d[1]]:[f,d[1]]:d[1]}a(u,t)}else e!=null&&r(t,e,i);return this}get(e,t){if(e=_t(e),e){const i=C.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return pa(o);if(C.isFunction(t))return t.call(this,o,i);if(C.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_t(e),e){const i=C.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Dn(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function r(a){if(a=_t(a),a){const u=C.findKey(i,a);u&&(!t||Dn(i,i[u],u,t))&&(delete i[u],o=!0)}}return C.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const r=t[i];(!e||Dn(this,this[r],r,e,!0))&&(delete this[r],o=!0)}return o}normalize(e){const t=this,i={};return C.forEach(this,(o,r)=>{const a=C.findKey(i,r);if(a){t[a]=Wt(o),delete t[r];return}const u=e?ma(r):String(r).trim();u!==r&&delete t[r],t[u]=Wt(o),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return C.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&C.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Ki]=this[Ki]={accessors:{}}).accessors,o=this.prototype;function r(a){const u=_t(a);i[u]||(ga(o,a),i[u]=!0)}return C.isArray(e)?e.forEach(r):r(e),this}};fe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(fe.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});C.freezeMethods(fe);function bn(n,e){const t=this||Ut,i=e||t,o=fe.from(i.headers);let r=i.data;return C.forEach(n,function(u){r=u.call(t,r,o.normalize(),e?e.status:void 0)}),o.normalize(),r}function ts(n){return!!(n&&n.__CANCEL__)}function mt(n,e,t){V.call(this,n??"canceled",V.ERR_CANCELED,e,t),this.name="CanceledError"}C.inherits(mt,V,{__CANCEL__:!0});function ns(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new V("Request failed with status code "+t.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function ya(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Ta(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,r=0,a;return e=e!==void 0?e:1e3,function(f){const c=Date.now(),d=i[r];a||(a=c),t[o]=f,i[o]=c;let p=r,h=0;for(;p!==o;)h+=t[p++],p=p%n;if(o=(o+1)%n,o===r&&(r=(r+1)%n),c-a<e)return;const g=d&&c-d;return g?Math.round(h*1e3/g):void 0}}function va(n,e){let t=0,i=1e3/e,o,r;const a=(c,d=Date.now())=>{t=d,o=null,r&&(clearTimeout(r),r=null),n.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-t;p>=i?a(c,d):(o=c,r||(r=setTimeout(()=>{r=null,a(o)},i-p)))},()=>o&&a(o)]}const jt=(n,e,t=3)=>{let i=0;const o=Ta(50,250);return va(r=>{const a=r.loaded,u=r.lengthComputable?r.total:void 0,f=a-i,c=o(f),d=a<=u;i=a;const p={loaded:a,total:u,progress:u?a/u:void 0,bytes:f,rate:c||void 0,estimated:c&&u&&d?(u-a)/c:void 0,event:r,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(p)},t)},Yi=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Xi=n=>(...e)=>C.asap(()=>n(...e)),Ca=oe.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,oe.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(oe.origin),oe.navigator&&/(msie|trident)/i.test(oe.navigator.userAgent)):()=>!0,_a=oe.hasStandardBrowserEnv?{write(n,e,t,i,o,r){const a=[n+"="+encodeURIComponent(e)];C.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),C.isString(i)&&a.push("path="+i),C.isString(o)&&a.push("domain="+o),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xa(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Ea(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function is(n,e,t){let i=!xa(e);return n&&(i||t==!1)?Ea(n,e):e}const Qi=n=>n instanceof fe?{...n}:n;function Je(n,e){e=e||{};const t={};function i(c,d,p,h){return C.isPlainObject(c)&&C.isPlainObject(d)?C.merge.call({caseless:h},c,d):C.isPlainObject(d)?C.merge({},d):C.isArray(d)?d.slice():d}function o(c,d,p,h){if(C.isUndefined(d)){if(!C.isUndefined(c))return i(void 0,c,p,h)}else return i(c,d,p,h)}function r(c,d){if(!C.isUndefined(d))return i(void 0,d)}function a(c,d){if(C.isUndefined(d)){if(!C.isUndefined(c))return i(void 0,c)}else return i(void 0,d)}function u(c,d,p){if(p in e)return i(c,d);if(p in n)return i(void 0,c)}const f={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(c,d,p)=>o(Qi(c),Qi(d),p,!0)};return C.forEach(Object.keys(Object.assign({},n,e)),function(d){const p=f[d]||o,h=p(n[d],e[d],d);C.isUndefined(h)&&p!==u||(t[d]=h)}),t}const os=n=>{const e=Je({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:r,headers:a,auth:u}=e;e.headers=a=fe.from(a),e.url=Qr(is(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(C.isFormData(t)){if(oe.hasStandardBrowserEnv||oe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((f=a.getContentType())!==!1){const[c,...d]=f?f.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...d].join("; "))}}if(oe.hasStandardBrowserEnv&&(i&&C.isFunction(i)&&(i=i(e)),i||i!==!1&&Ca(e.url))){const c=o&&r&&_a.read(r);c&&a.set(o,c)}return e},Sa=typeof XMLHttpRequest<"u",Aa=Sa&&function(n){return new Promise(function(t,i){const o=os(n);let r=o.data;const a=fe.from(o.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:c}=o,d,p,h,g,m;function y(){g&&g(),m&&m(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let T=new XMLHttpRequest;T.open(o.method.toUpperCase(),o.url,!0),T.timeout=o.timeout;function v(){if(!T)return;const x=fe.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),S={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:x,config:n,request:T};ns(function(k){t(k),y()},function(k){i(k),y()},S),T=null}"onloadend"in T?T.onloadend=v:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(v)},T.onabort=function(){T&&(i(new V("Request aborted",V.ECONNABORTED,n,T)),T=null)},T.onerror=function(){i(new V("Network Error",V.ERR_NETWORK,n,T)),T=null},T.ontimeout=function(){let w=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const S=o.transitional||jr;o.timeoutErrorMessage&&(w=o.timeoutErrorMessage),i(new V(w,S.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,n,T)),T=null},r===void 0&&a.setContentType(null),"setRequestHeader"in T&&C.forEach(a.toJSON(),function(w,S){T.setRequestHeader(S,w)}),C.isUndefined(o.withCredentials)||(T.withCredentials=!!o.withCredentials),u&&u!=="json"&&(T.responseType=o.responseType),c&&([h,m]=jt(c,!0),T.addEventListener("progress",h)),f&&T.upload&&([p,g]=jt(f),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(d=x=>{T&&(i(!x||x.type?new mt(null,n,T):x),T.abort(),T=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const _=ya(o.url);if(_&&oe.protocols.indexOf(_)===-1){i(new V("Unsupported protocol "+_+":",V.ERR_BAD_REQUEST,n));return}T.send(r||null)})},wa=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const r=function(c){if(!o){o=!0,u();const d=c instanceof Error?c:this.reason;i.abort(d instanceof V?d:new mt(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,r(new V(`timeout ${e} of ms exceeded`,V.ETIMEDOUT))},e);const u=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:f}=i;return f.unsubscribe=()=>C.asap(u),f}},ka=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},Ia=async function*(n,e){for await(const t of Ra(n))yield*ka(t,e)},Ra=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},ji=(n,e,t,i)=>{const o=Ia(n,e);let r=0,a,u=f=>{a||(a=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:c,value:d}=await o.next();if(c){u(),f.close();return}let p=d.byteLength;if(t){let h=r+=p;t(h)}f.enqueue(new Uint8Array(d))}catch(c){throw u(c),c}},cancel(f){return u(f),o.return()}},{highWaterMark:2})},vn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rs=vn&&typeof ReadableStream=="function",Ma=vn&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),ss=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Pa=rs&&ss(()=>{let n=!1;const e=new Request(oe.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),eo=64*1024,On=rs&&ss(()=>C.isReadableStream(new Response("").body)),en={stream:On&&(n=>n.body)};vn&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!en[e]&&(en[e]=C.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new V(`Response type '${e}' is not supported`,V.ERR_NOT_SUPPORT,i)})})})(new Response);const Na=async n=>{if(n==null)return 0;if(C.isBlob(n))return n.size;if(C.isSpecCompliantForm(n))return(await new Request(oe.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(C.isArrayBufferView(n)||C.isArrayBuffer(n))return n.byteLength;if(C.isURLSearchParams(n)&&(n=n+""),C.isString(n))return(await Ma(n)).byteLength},Da=async(n,e)=>{const t=C.toFiniteNumber(n.getContentLength());return t??Na(e)},ba=vn&&(async n=>{let{url:e,method:t,data:i,signal:o,cancelToken:r,timeout:a,onDownloadProgress:u,onUploadProgress:f,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:h}=os(n);c=c?(c+"").toLowerCase():"text";let g=wa([o,r&&r.toAbortSignal()],a),m;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let T;try{if(f&&Pa&&t!=="get"&&t!=="head"&&(T=await Da(d,i))!==0){let S=new Request(e,{method:"POST",body:i,duplex:"half"}),E;if(C.isFormData(i)&&(E=S.headers.get("content-type"))&&d.setContentType(E),S.body){const[k,D]=Yi(T,jt(Xi(f)));i=ji(S.body,eo,k,D)}}C.isString(p)||(p=p?"include":"omit");const v="credentials"in Request.prototype;m=new Request(e,{...h,signal:g,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:v?p:void 0});let _=await fetch(m);const x=On&&(c==="stream"||c==="response");if(On&&(u||x&&y)){const S={};["status","statusText","headers"].forEach(M=>{S[M]=_[M]});const E=C.toFiniteNumber(_.headers.get("content-length")),[k,D]=u&&Yi(E,jt(Xi(u),!0))||[];_=new Response(ji(_.body,eo,k,()=>{D&&D(),y&&y()}),S)}c=c||"text";let w=await en[C.findKey(en,c)||"text"](_,n);return!x&&y&&y(),await new Promise((S,E)=>{ns(S,E,{data:w,headers:fe.from(_.headers),status:_.status,statusText:_.statusText,config:n,request:m})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,n,m),{cause:v.cause||v}):V.from(v,v&&v.code,n,m)}}),Gn={http:Kl,xhr:Aa,fetch:ba};C.forEach(Gn,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const to=n=>`- ${n}`,La=n=>C.isFunction(n)||n===null||n===!1,ls={getAdapter:n=>{n=C.isArray(n)?n:[n];const{length:e}=n;let t,i;const o={};for(let r=0;r<e;r++){t=n[r];let a;if(i=t,!La(t)&&(i=Gn[(a=String(t)).toLowerCase()],i===void 0))throw new V(`Unknown adapter '${a}'`);if(i)break;o[a||"#"+r]=i}if(!i){const r=Object.entries(o).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(to).join(`
`):" "+to(r[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Gn};function Ln(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new mt(null,n)}function no(n){return Ln(n),n.headers=fe.from(n.headers),n.data=bn.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),ls.getAdapter(n.adapter||Ut.adapter)(n).then(function(i){return Ln(n),i.data=bn.call(n,n.transformResponse,i),i.headers=fe.from(i.headers),i},function(i){return ts(i)||(Ln(n),i&&i.response&&(i.response.data=bn.call(n,n.transformResponse,i.response),i.response.headers=fe.from(i.response.headers))),Promise.reject(i)})}const as="1.9.0",Cn={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Cn[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const io={};Cn.transitional=function(e,t,i){function o(r,a){return"[Axios v"+as+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,u)=>{if(e===!1)throw new V(o(a," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!io[a]&&(io[a]=!0,console.warn(o(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,u):!0}};Cn.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Fa(n,e,t){if(typeof n!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const r=i[o],a=e[r];if(a){const u=n[r],f=u===void 0||a(u,r,n);if(f!==!0)throw new V("option "+r+" must be "+f,V.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new V("Unknown option "+r,V.ERR_BAD_OPTION)}}const Zt={assertOptions:Fa,validators:Cn},xe=Zt.validators;let ze=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Zi,response:new Zi}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const r=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Je(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:r}=t;i!==void 0&&Zt.assertOptions(i,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),o!=null&&(C.isFunction(o)?t.paramsSerializer={serialize:o}:Zt.assertOptions(o,{encode:xe.function,serialize:xe.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Zt.assertOptions(t,{baseUrl:xe.spelling("baseURL"),withXsrfToken:xe.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&C.merge(r.common,r[t.method]);r&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),t.headers=fe.concat(a,r);const u=[];let f=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(f=f&&y.synchronous,u.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,p=0,h;if(!f){const m=[no.bind(this),void 0];for(m.unshift.apply(m,u),m.push.apply(m,c),h=m.length,d=Promise.resolve(t);p<h;)d=d.then(m[p++],m[p++]);return d}h=u.length;let g=t;for(p=0;p<h;){const m=u[p++],y=u[p++];try{g=m(g)}catch(T){y.call(this,T);break}}try{d=no.call(this,g)}catch(m){return Promise.reject(m)}for(p=0,h=c.length;p<h;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=Je(this.defaults,e);const t=is(e.baseURL,e.url,e.allowAbsoluteUrls);return Qr(t,e.params,e.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(e){ze.prototype[e]=function(t,i){return this.request(Je(i||{},{method:e,url:t,data:(i||{}).data}))}});C.forEach(["post","put","patch"],function(e){function t(i){return function(r,a,u){return this.request(Je(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}ze.prototype[e]=t(),ze.prototype[e+"Form"]=t(!0)});let Ua=class us{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(o=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](o);i._listeners=null}),this.promise.then=o=>{let r;const a=new Promise(u=>{i.subscribe(u),r=u}).then(o);return a.cancel=function(){i.unsubscribe(r)},a},e(function(r,a,u){i.reason||(i.reason=new mt(r,a,u),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new us(function(o){e=o}),cancel:e}}};function Va(n){return function(t){return n.apply(null,t)}}function $a(n){return C.isObject(n)&&n.isAxiosError===!0}const Hn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hn).forEach(([n,e])=>{Hn[e]=n});function cs(n){const e=new ze(n),t=Br(ze.prototype.request,e);return C.extend(t,ze.prototype,e,{allOwnKeys:!0}),C.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return cs(Je(n,o))},t}const j=cs(Ut);j.Axios=ze;j.CanceledError=mt;j.CancelToken=Ua;j.isCancel=ts;j.VERSION=as;j.toFormData=Tn;j.AxiosError=V;j.Cancel=j.CanceledError;j.all=function(e){return Promise.all(e)};j.spread=Va;j.isAxiosError=$a;j.mergeConfig=Je;j.AxiosHeaders=fe;j.formToJSON=n=>es(C.isHTMLForm(n)?new FormData(n):n);j.getAdapter=ls.getAdapter;j.HttpStatusCode=Hn;j.default=j;const{Axios:QT,AxiosError:jT,CanceledError:ev,isCancel:tv,CancelToken:nv,VERSION:iv,all:ov,Cancel:rv,isAxiosError:sv,spread:lv,toFormData:av,AxiosHeaders:uv,HttpStatusCode:cv,formToJSON:fv,getAdapter:dv,mergeConfig:pv}=j;window.axios=j;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var G;(function(n){n.assertEqual=o=>{};function e(o){}n.assertIs=e;function t(o){throw new Error}n.assertNever=t,n.arrayToEnum=o=>{const r={};for(const a of o)r[a]=a;return r},n.getValidEnumValues=o=>{const r=n.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),a={};for(const u of r)a[u]=o[u];return n.objectValues(a)},n.objectValues=o=>n.objectKeys(o).map(function(r){return o[r]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const r=[];for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&r.push(a);return r},n.find=(o,r)=>{for(const a of o)if(r(a))return a},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,r=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}n.joinValues=i,n.jsonStringifyReplacer=(o,r)=>typeof r=="bigint"?r.toString():r})(G||(G={}));var oo;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(oo||(oo={}));const R=G.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Le=n=>{switch(typeof n){case"undefined":return R.undefined;case"string":return R.string;case"number":return Number.isNaN(n)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":return Array.isArray(n)?R.array:n===null?R.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?R.promise:typeof Map<"u"&&n instanceof Map?R.map:typeof Set<"u"&&n instanceof Set?R.set:typeof Date<"u"&&n instanceof Date?R.date:R.object;default:return R.unknown}},A=G.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class De extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},i={_errors:[]},o=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)i._errors.push(t(a));else{let u=i,f=0;for(;f<a.path.length;){const c=a.path[f];f===a.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(t(a))):u[c]=u[c]||{_errors:[]},u=u[c],f++}}};return o(this),i}static assert(e){if(!(e instanceof De))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,G.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):i.push(e(o));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}De.create=n=>new De(n);const zn=(n,e)=>{let t;switch(n.code){case A.invalid_type:n.received===R.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case A.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,G.jsonStringifyReplacer)}`;break;case A.unrecognized_keys:t=`Unrecognized key(s) in object: ${G.joinValues(n.keys,", ")}`;break;case A.invalid_union:t="Invalid input";break;case A.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${G.joinValues(n.options)}`;break;case A.invalid_enum_value:t=`Invalid enum value. Expected ${G.joinValues(n.options)}, received '${n.received}'`;break;case A.invalid_arguments:t="Invalid function arguments";break;case A.invalid_return_type:t="Invalid function return type";break;case A.invalid_date:t="Invalid date";break;case A.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:G.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case A.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case A.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case A.custom:t="Invalid input";break;case A.invalid_intersection_types:t="Intersection results could not be merged";break;case A.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case A.not_finite:t="Number must be finite";break;default:t=e.defaultError,G.assertNever(n)}return{message:t}};let Ba=zn;function qa(){return Ba}const Oa=n=>{const{data:e,path:t,errorMaps:i,issueData:o}=n,r=[...t,...o.path||[]],a={...o,path:r};if(o.message!==void 0)return{...o,path:r,message:o.message};let u="";const f=i.filter(c=>!!c).slice().reverse();for(const c of f)u=c(a,{data:e,defaultError:u}).message;return{...o,path:r,message:u}};function I(n,e){const t=qa(),i=Oa({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===zn?void 0:zn].filter(o=>!!o)});n.common.issues.push(i)}class le{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const o of t){if(o.status==="aborted")return U;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const o of t){const r=await o.key,a=await o.value;i.push({key:r,value:a})}return le.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const o of t){const{key:r,value:a}=o;if(r.status==="aborted"||a.status==="aborted")return U;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(i[r.value]=a.value)}return{status:e.value,value:i}}}const U=Object.freeze({status:"aborted"}),At=n=>({status:"dirty",value:n}),me=n=>({status:"valid",value:n}),ro=n=>n.status==="aborted",so=n=>n.status==="dirty",at=n=>n.status==="valid",tn=n=>typeof Promise<"u"&&n instanceof Promise;var P;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(P||(P={}));class ke{constructor(e,t,i,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lo=(n,e)=>{if(at(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new De(n.common.issues);return this._error=t,this._error}}};function $(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:o}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(a,u)=>{const{message:f}=n;return a.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??i??u.defaultError}:a.code!=="invalid_type"?{message:u.defaultError}:{message:f??t??u.defaultError}},description:o}}class q{get description(){return this._def.description}_getType(e){return Le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new le,ctx:{common:e.parent.common,data:e.data,parsedType:Le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(tn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},o=this._parseSync({data:e,path:i.path,parent:i});return lo(i,o)}"~validate"(e){var i,o;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return at(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(o=(i=r==null?void 0:r.message)==null?void 0:i.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>at(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Le(e)},o=this._parse({data:e,path:i.path,parent:i}),r=await(tn(o)?o:Promise.resolve(o));return lo(i,r)}refine(e,t){const i=o=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(o):t;return this._refinement((o,r)=>{const a=e(o),u=()=>r.addIssue({code:A.custom,...i(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(f=>f?!0:(u(),!1)):a?!0:(u(),!1)})}refinement(e,t){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof t=="function"?t(i,o):t),!1))}_refinement(e){return new ft({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Fe.create(this,this._def)}nullable(){return dt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return we.create(this)}promise(){return ln.create(this,this._def)}or(e){return on.create([this,e],this._def)}and(e){return rn.create(this,e,this._def)}transform(e){return new ft({...$(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Kn({...$(this._def),innerType:this,defaultValue:t,typeName:F.ZodDefault})}brand(){return new fu({typeName:F.ZodBranded,type:this,...$(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Yn({...$(this._def),innerType:this,catchValue:t,typeName:F.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return gi.create(this,e)}readonly(){return Xn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ga=/^c[^\s-]{8,}$/i,Ha=/^[0-9a-z]+$/,za=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ja=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wa=/^[a-z0-9_-]{21}$/i,Za=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ka=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ya=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xa="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Fn;const Qa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ja=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tu=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nu=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ou=new RegExp(`^${fs}$`);function ds(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function ru(n){return new RegExp(`^${ds(n)}$`)}function su(n){let e=`${fs}T${ds(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function lu(n,e){return!!((e==="v4"||!e)&&Qa.test(n)||(e==="v6"||!e)&&eu.test(n))}function au(n,e){if(!Za.test(n))return!1;try{const[t]=n.split("."),i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function uu(n,e){return!!((e==="v4"||!e)&&ja.test(n)||(e==="v6"||!e)&&tu.test(n))}class Se extends q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==R.string){const r=this._getOrReturnCtx(e);return I(r,{code:A.invalid_type,expected:R.string,received:r.parsedType}),U}const i=new le;let o;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(o=this._getOrReturnCtx(e,o),I(o,{code:A.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")e.data.length>r.value&&(o=this._getOrReturnCtx(e,o),I(o,{code:A.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,u=e.data.length<r.value;(a||u)&&(o=this._getOrReturnCtx(e,o),a?I(o,{code:A.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):u&&I(o,{code:A.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")Ya.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"email",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")Fn||(Fn=new RegExp(Xa,"u")),Fn.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"emoji",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")Ja.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"uuid",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")Wa.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"nanoid",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")Ga.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"cuid",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")Ha.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"cuid2",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")za.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"ulid",code:A.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),I(o,{validation:"url",code:A.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"regex",code:A.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?su(r).test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?ou.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?ru(r).test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{code:A.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?Ka.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"duration",code:A.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?lu(e.data,r.version)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"ip",code:A.invalid_string,message:r.message}),i.dirty()):r.kind==="jwt"?au(e.data,r.alg)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"jwt",code:A.invalid_string,message:r.message}),i.dirty()):r.kind==="cidr"?uu(e.data,r.version)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"cidr",code:A.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?nu.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"base64",code:A.invalid_string,message:r.message}),i.dirty()):r.kind==="base64url"?iu.test(e.data)||(o=this._getOrReturnCtx(e,o),I(o,{validation:"base64url",code:A.invalid_string,message:r.message}),i.dirty()):G.assertNever(r);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(o=>e.test(o),{validation:t,code:A.invalid_string,...P.errToObj(i)})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...P.errToObj(e)})}url(e){return this._addCheck({kind:"url",...P.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...P.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...P.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...P.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...P.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...P.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...P.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...P.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...P.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...P.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...P.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...P.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...P.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...P.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...P.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...P.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...P.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...P.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...P.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...P.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...P.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...P.errToObj(t)})}nonempty(e){return this.min(1,P.errToObj(e))}trim(){return new Se({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Se({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Se({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Se.create=n=>new Se({checks:[],typeName:F.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...$(n)});function cu(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=t>i?t:i,r=Number.parseInt(n.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return r%a/10**o}class We extends q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==R.number){const r=this._getOrReturnCtx(e);return I(r,{code:A.invalid_type,expected:R.number,received:r.parsedType}),U}let i;const o=new le;for(const r of this._def.checks)r.kind==="int"?G.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:A.invalid_type,expected:"integer",received:"float",message:r.message}),o.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),o.dirty()):r.kind==="multipleOf"?cu(e.data,r.value)!==0&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:A.not_finite,message:r.message}),o.dirty()):G.assertNever(r);return{status:o.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,P.toString(t))}gt(e,t){return this.setLimit("min",e,!1,P.toString(t))}lte(e,t){return this.setLimit("max",e,!0,P.toString(t))}lt(e,t){return this.setLimit("max",e,!1,P.toString(t))}setLimit(e,t,i,o){return new We({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:P.toString(o)}]})}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:P.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:P.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:P.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:P.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:P.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&G.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}We.create=n=>new We({checks:[],typeName:F.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...$(n)});class Ze extends q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==R.bigint)return this._getInvalidInput(e);let i;const o=new le;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),o.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),I(i,{code:A.not_multiple_of,multipleOf:r.value,message:r.message}),o.dirty()):G.assertNever(r);return{status:o.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return I(t,{code:A.invalid_type,expected:R.bigint,received:t.parsedType}),U}gte(e,t){return this.setLimit("min",e,!0,P.toString(t))}gt(e,t){return this.setLimit("min",e,!1,P.toString(t))}lte(e,t){return this.setLimit("max",e,!0,P.toString(t))}lt(e,t){return this.setLimit("max",e,!1,P.toString(t))}setLimit(e,t,i,o){return new Ze({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:P.toString(o)}]})}_addCheck(e){return new Ze({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:P.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ze.create=n=>new Ze({checks:[],typeName:F.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...$(n)});class nn extends q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==R.boolean){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.boolean,received:i.parsedType}),U}return me(e.data)}}nn.create=n=>new nn({typeName:F.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...$(n)});class ut extends q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==R.date){const r=this._getOrReturnCtx(e);return I(r,{code:A.invalid_type,expected:R.date,received:r.parsedType}),U}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return I(r,{code:A.invalid_date}),U}const i=new le;let o;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(o=this._getOrReturnCtx(e,o),I(o,{code:A.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(o=this._getOrReturnCtx(e,o),I(o,{code:A.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):G.assertNever(r);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ut({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:P.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:P.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ut.create=n=>new ut({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:F.ZodDate,...$(n)});class ao extends q{_parse(e){if(this._getType(e)!==R.symbol){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.symbol,received:i.parsedType}),U}return me(e.data)}}ao.create=n=>new ao({typeName:F.ZodSymbol,...$(n)});class uo extends q{_parse(e){if(this._getType(e)!==R.undefined){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.undefined,received:i.parsedType}),U}return me(e.data)}}uo.create=n=>new uo({typeName:F.ZodUndefined,...$(n)});class co extends q{_parse(e){if(this._getType(e)!==R.null){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.null,received:i.parsedType}),U}return me(e.data)}}co.create=n=>new co({typeName:F.ZodNull,...$(n)});class fo extends q{constructor(){super(...arguments),this._any=!0}_parse(e){return me(e.data)}}fo.create=n=>new fo({typeName:F.ZodAny,...$(n)});class Jn extends q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return me(e.data)}}Jn.create=n=>new Jn({typeName:F.ZodUnknown,...$(n)});class Ue extends q{_parse(e){const t=this._getOrReturnCtx(e);return I(t,{code:A.invalid_type,expected:R.never,received:t.parsedType}),U}}Ue.create=n=>new Ue({typeName:F.ZodNever,...$(n)});class po extends q{_parse(e){if(this._getType(e)!==R.undefined){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.void,received:i.parsedType}),U}return me(e.data)}}po.create=n=>new po({typeName:F.ZodVoid,...$(n)});class we extends q{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),o=this._def;if(t.parsedType!==R.array)return I(t,{code:A.invalid_type,expected:R.array,received:t.parsedType}),U;if(o.exactLength!==null){const a=t.data.length>o.exactLength.value,u=t.data.length<o.exactLength.value;(a||u)&&(I(t,{code:a?A.too_big:A.too_small,minimum:u?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&t.data.length<o.minLength.value&&(I(t,{code:A.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&t.data.length>o.maxLength.value&&(I(t,{code:A.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((a,u)=>o.type._parseAsync(new ke(t,a,t.path,u)))).then(a=>le.mergeArray(i,a));const r=[...t.data].map((a,u)=>o.type._parseSync(new ke(t,a,t.path,u)));return le.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new we({...this._def,minLength:{value:e,message:P.toString(t)}})}max(e,t){return new we({...this._def,maxLength:{value:e,message:P.toString(t)}})}length(e,t){return new we({...this._def,exactLength:{value:e,message:P.toString(t)}})}nonempty(e){return this.min(1,e)}}we.create=(n,e)=>new we({type:n,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...$(e)});function ot(n){if(n instanceof ee){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=Fe.create(ot(i))}return new ee({...n._def,shape:()=>e})}else return n instanceof we?new we({...n._def,type:ot(n.element)}):n instanceof Fe?Fe.create(ot(n.unwrap())):n instanceof dt?dt.create(ot(n.unwrap())):n instanceof Ke?Ke.create(n.items.map(e=>ot(e))):n}class ee extends q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=G.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==R.object){const c=this._getOrReturnCtx(e);return I(c,{code:A.invalid_type,expected:R.object,received:c.parsedType}),U}const{status:i,ctx:o}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ue&&this._def.unknownKeys==="strip"))for(const c in o.data)a.includes(c)||u.push(c);const f=[];for(const c of a){const d=r[c],p=o.data[c];f.push({key:{status:"valid",value:c},value:d._parse(new ke(o,p,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof Ue){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of u)f.push({key:{status:"valid",value:d},value:{status:"valid",value:o.data[d]}});else if(c==="strict")u.length>0&&(I(o,{code:A.unrecognized_keys,keys:u}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of u){const p=o.data[d];f.push({key:{status:"valid",value:d},value:c._parse(new ke(o,p,o.path,d)),alwaysSet:d in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of f){const p=await d.key,h=await d.value;c.push({key:p,value:h,alwaysSet:d.alwaysSet})}return c}).then(c=>le.mergeObjectSync(i,c)):le.mergeObjectSync(i,f)}get shape(){return this._def.shape()}strict(e){return P.errToObj,new ee({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var r,a;const o=((a=(r=this._def).errorMap)==null?void 0:a.call(r,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:P.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new ee({...this._def,unknownKeys:"strip"})}passthrough(){return new ee({...this._def,unknownKeys:"passthrough"})}extend(e){return new ee({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ee({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:F.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ee({...this._def,catchall:e})}pick(e){const t={};for(const i of G.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new ee({...this._def,shape:()=>t})}omit(e){const t={};for(const i of G.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new ee({...this._def,shape:()=>t})}deepPartial(){return ot(this)}partial(e){const t={};for(const i of G.objectKeys(this.shape)){const o=this.shape[i];e&&!e[i]?t[i]=o:t[i]=o.optional()}return new ee({...this._def,shape:()=>t})}required(e){const t={};for(const i of G.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof Fe;)r=r._def.innerType;t[i]=r}return new ee({...this._def,shape:()=>t})}keyof(){return ps(G.objectKeys(this.shape))}}ee.create=(n,e)=>new ee({shape:()=>n,unknownKeys:"strip",catchall:Ue.create(),typeName:F.ZodObject,...$(e)});ee.strictCreate=(n,e)=>new ee({shape:()=>n,unknownKeys:"strict",catchall:Ue.create(),typeName:F.ZodObject,...$(e)});ee.lazycreate=(n,e)=>new ee({shape:n,unknownKeys:"strip",catchall:Ue.create(),typeName:F.ZodObject,...$(e)});class on extends q{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function o(r){for(const u of r)if(u.result.status==="valid")return u.result;for(const u of r)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const a=r.map(u=>new De(u.ctx.common.issues));return I(t,{code:A.invalid_union,unionErrors:a}),U}if(t.common.async)return Promise.all(i.map(async r=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(o);{let r;const a=[];for(const f of i){const c={...t,common:{...t.common,issues:[]},parent:null},d=f._parseSync({data:t.data,path:t.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!r&&(r={result:d,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const u=a.map(f=>new De(f));return I(t,{code:A.invalid_union,unionErrors:u}),U}}get options(){return this._def.options}}on.create=(n,e)=>new on({options:n,typeName:F.ZodUnion,...$(e)});function Wn(n,e){const t=Le(n),i=Le(e);if(n===e)return{valid:!0,data:n};if(t===R.object&&i===R.object){const o=G.objectKeys(e),r=G.objectKeys(n).filter(u=>o.indexOf(u)!==-1),a={...n,...e};for(const u of r){const f=Wn(n[u],e[u]);if(!f.valid)return{valid:!1};a[u]=f.data}return{valid:!0,data:a}}else if(t===R.array&&i===R.array){if(n.length!==e.length)return{valid:!1};const o=[];for(let r=0;r<n.length;r++){const a=n[r],u=e[r],f=Wn(a,u);if(!f.valid)return{valid:!1};o.push(f.data)}return{valid:!0,data:o}}else return t===R.date&&i===R.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class rn extends q{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),o=(r,a)=>{if(ro(r)||ro(a))return U;const u=Wn(r.value,a.value);return u.valid?((so(r)||so(a))&&t.dirty(),{status:t.value,value:u.data}):(I(i,{code:A.invalid_intersection_types}),U)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,a])=>o(r,a)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}rn.create=(n,e,t)=>new rn({left:n,right:e,typeName:F.ZodIntersection,...$(t)});class Ke extends q{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.array)return I(i,{code:A.invalid_type,expected:R.array,received:i.parsedType}),U;if(i.data.length<this._def.items.length)return I(i,{code:A.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),U;!this._def.rest&&i.data.length>this._def.items.length&&(I(i,{code:A.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...i.data].map((a,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new ke(i,a,i.path,u)):null}).filter(a=>!!a);return i.common.async?Promise.all(r).then(a=>le.mergeArray(t,a)):le.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Ke({...this._def,rest:e})}}Ke.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ke({items:n,typeName:F.ZodTuple,rest:null,...$(e)})};class sn extends q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.object)return I(i,{code:A.invalid_type,expected:R.object,received:i.parsedType}),U;const o=[],r=this._def.keyType,a=this._def.valueType;for(const u in i.data)o.push({key:r._parse(new ke(i,u,i.path,u)),value:a._parse(new ke(i,i.data[u],i.path,u)),alwaysSet:u in i.data});return i.common.async?le.mergeObjectAsync(t,o):le.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof q?new sn({keyType:e,valueType:t,typeName:F.ZodRecord,...$(i)}):new sn({keyType:Se.create(),valueType:e,typeName:F.ZodRecord,...$(t)})}}class ho extends q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.map)return I(i,{code:A.invalid_type,expected:R.map,received:i.parsedType}),U;const o=this._def.keyType,r=this._def.valueType,a=[...i.data.entries()].map(([u,f],c)=>({key:o._parse(new ke(i,u,i.path,[c,"key"])),value:r._parse(new ke(i,f,i.path,[c,"value"]))}));if(i.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of a){const c=await f.key,d=await f.value;if(c.status==="aborted"||d.status==="aborted")return U;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(c.value,d.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const f of a){const c=f.key,d=f.value;if(c.status==="aborted"||d.status==="aborted")return U;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(c.value,d.value)}return{status:t.value,value:u}}}}ho.create=(n,e,t)=>new ho({valueType:e,keyType:n,typeName:F.ZodMap,...$(t)});class Nt extends q{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.set)return I(i,{code:A.invalid_type,expected:R.set,received:i.parsedType}),U;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(I(i,{code:A.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(I(i,{code:A.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const r=this._def.valueType;function a(f){const c=new Set;for(const d of f){if(d.status==="aborted")return U;d.status==="dirty"&&t.dirty(),c.add(d.value)}return{status:t.value,value:c}}const u=[...i.data.values()].map((f,c)=>r._parse(new ke(i,f,i.path,c)));return i.common.async?Promise.all(u).then(f=>a(f)):a(u)}min(e,t){return new Nt({...this._def,minSize:{value:e,message:P.toString(t)}})}max(e,t){return new Nt({...this._def,maxSize:{value:e,message:P.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Nt.create=(n,e)=>new Nt({valueType:n,minSize:null,maxSize:null,typeName:F.ZodSet,...$(e)});class Zn extends q{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Zn.create=(n,e)=>new Zn({getter:n,typeName:F.ZodLazy,...$(e)});class mo extends q{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return I(t,{received:t.data,code:A.invalid_literal,expected:this._def.value}),U}return{status:"valid",value:e.data}}get value(){return this._def.value}}mo.create=(n,e)=>new mo({value:n,typeName:F.ZodLiteral,...$(e)});function ps(n,e){return new ct({values:n,typeName:F.ZodEnum,...$(e)})}class ct extends q{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return I(t,{expected:G.joinValues(i),received:t.parsedType,code:A.invalid_type}),U}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return I(t,{received:t.data,code:A.invalid_enum_value,options:i}),U}return me(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ct.create(e,{...this._def,...t})}exclude(e,t=this._def){return ct.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}ct.create=ps;class go extends q{_parse(e){const t=G.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==R.string&&i.parsedType!==R.number){const o=G.objectValues(t);return I(i,{expected:G.joinValues(o),received:i.parsedType,code:A.invalid_type}),U}if(this._cache||(this._cache=new Set(G.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=G.objectValues(t);return I(i,{received:i.data,code:A.invalid_enum_value,options:o}),U}return me(e.data)}get enum(){return this._def.values}}go.create=(n,e)=>new go({values:n,typeName:F.ZodNativeEnum,...$(e)});class ln extends q{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.promise&&t.common.async===!1)return I(t,{code:A.invalid_type,expected:R.promise,received:t.parsedType}),U;const i=t.parsedType===R.promise?t.data:Promise.resolve(t.data);return me(i.then(o=>this._def.type.parseAsync(o,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ln.create=(n,e)=>new ln({type:n,typeName:F.ZodPromise,...$(e)});class ft extends q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),o=this._def.effect||null,r={addIssue:a=>{I(i,a),a.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),o.type==="preprocess"){const a=o.transform(i.data,r);if(i.common.async)return Promise.resolve(a).then(async u=>{if(t.value==="aborted")return U;const f=await this._def.schema._parseAsync({data:u,path:i.path,parent:i});return f.status==="aborted"?U:f.status==="dirty"||t.value==="dirty"?At(f.value):f});{if(t.value==="aborted")return U;const u=this._def.schema._parseSync({data:a,path:i.path,parent:i});return u.status==="aborted"?U:u.status==="dirty"||t.value==="dirty"?At(u.value):u}}if(o.type==="refinement"){const a=u=>{const f=o.refinement(u,r);if(i.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?U:(u.status==="dirty"&&t.dirty(),a(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>u.status==="aborted"?U:(u.status==="dirty"&&t.dirty(),a(u.value).then(()=>({status:t.value,value:u.value}))))}if(o.type==="transform")if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!at(a))return U;const u=o.transform(a.value,r);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>at(a)?Promise.resolve(o.transform(a.value,r)).then(u=>({status:t.value,value:u})):U);G.assertNever(o)}}ft.create=(n,e,t)=>new ft({schema:n,typeName:F.ZodEffects,effect:e,...$(t)});ft.createWithPreprocess=(n,e,t)=>new ft({schema:e,effect:{type:"preprocess",transform:n},typeName:F.ZodEffects,...$(t)});class Fe extends q{_parse(e){return this._getType(e)===R.undefined?me(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(n,e)=>new Fe({innerType:n,typeName:F.ZodOptional,...$(e)});class dt extends q{_parse(e){return this._getType(e)===R.null?me(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dt.create=(n,e)=>new dt({innerType:n,typeName:F.ZodNullable,...$(e)});class Kn extends q{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===R.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Kn.create=(n,e)=>new Kn({innerType:n,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$(e)});class Yn extends q{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return tn(o)?o.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new De(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new De(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Yn.create=(n,e)=>new Yn({innerType:n,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$(e)});class yo extends q{_parse(e){if(this._getType(e)!==R.nan){const i=this._getOrReturnCtx(e);return I(i,{code:A.invalid_type,expected:R.nan,received:i.parsedType}),U}return{status:"valid",value:e.data}}}yo.create=n=>new yo({typeName:F.ZodNaN,...$(n)});class fu extends q{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class gi extends q{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?U:r.status==="dirty"?(t.dirty(),At(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?U:o.status==="dirty"?(t.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,t){return new gi({in:e,out:t,typeName:F.ZodPipeline})}}class Xn extends q{_parse(e){const t=this._def.innerType._parse(e),i=o=>(at(o)&&(o.value=Object.freeze(o.value)),o);return tn(t)?t.then(o=>i(o)):i(t)}unwrap(){return this._def.innerType}}Xn.create=(n,e)=>new Xn({innerType:n,typeName:F.ZodReadonly,...$(e)});var F;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(F||(F={}));const Ge=Se.create,To=We.create;Ze.create;const du=nn.create;ut.create;const vo=Jn.create;Ue.create;const wt=we.create,pu=ee.create,hu=on.create;rn.create;Ke.create;const mu=sn.create,gu=Zn.create,yu=ct.create;ln.create;Fe.create;dt.create;const it={string:n=>Se.create({...n,coerce:!0}),number:n=>We.create({...n,coerce:!0}),boolean:n=>nn.create({...n,coerce:!0}),bigint:n=>Ze.create({...n,coerce:!0}),date:n=>ut.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Tu,vu;function Cu(){return{geminiUrl:Tu,vertexUrl:vu}}function _u(n,e,t){var i,o,r;if(!(!((i=n.httpOptions)===null||i===void 0)&&i.baseUrl)){const a=Cu();return n.vertexai?(o=a.vertexUrl)!==null&&o!==void 0?o:e:(r=a.geminiUrl)!==null&&r!==void 0?r:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gt{}function b(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function l(n,e,t){for(let r=0;r<e.length-1;r++){const a=e[r];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(t))for(let c=0;c<f.length;c++){const d=f[c];l(d,e.slice(r+1),t[c])}else for(const c of f)l(c,e.slice(r+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];l(f[0],e.slice(r+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function s(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in n){const r=n[o];return Array.isArray(r)?r.map(a=>s(a,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Co;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Co||(Co={}));var _o;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(_o||(_o={}));var Ae;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ae||(Ae={}));var xo;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xo||(xo={}));var Eo;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Eo||(Eo={}));var So;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(So||(So={}));var Ao;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ao||(Ao={}));var wo;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(wo||(wo={}));var ko;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ko||(ko={}));var Io;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Io||(Io={}));var Ro;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ro||(Ro={}));var Mo;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Mo||(Mo={}));var Po;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Po||(Po={}));var an;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(an||(an={}));var No;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(No||(No={}));var Qn;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qn||(Qn={}));var Do;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Do||(Do={}));var bo;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(bo||(bo={}));var Lo;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Lo||(Lo={}));var Fo;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Fo||(Fo={}));var Uo;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Uo||(Uo={}));var Vo;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Vo||(Vo={}));var $o;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($o||($o={}));var Bo;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Bo||(Bo={}));var qo;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(qo||(qo={}));var Oo;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Oo||(Oo={}));var Go;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Go||(Go={}));var Ho;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ho||(Ho={}));var zo;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zo||(zo={}));var Jo;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Jo||(Jo={}));var Wo;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Wo||(Wo={}));var Zo;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Zo||(Zo={}));var Ko;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ko||(Ko={}));var Yo;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Yo||(Yo={}));var Xo;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Xo||(Xo={}));var Qo;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qo||(Qo={}));var jo;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(jo||(jo={}));var er;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(er||(er={}));var rt;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(rt||(rt={}));class xt{get text(){var e,t,i,o,r,a,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const h of(f=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,i,o,r,a,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const p of(f=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&d.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,o,r,a,u,f;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,i,o,r,a,u,f,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,o,r,a,u,f,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class tr{}class nr{}class xu{}class Eu{}class ir{}class or{}class rr{}class Su{}class sr{}class lr{}class ar{}class Au{}class jn{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class wu{}class ku{}class Iu{get text(){var e,t,i;let o="",r=!1;const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(u))f!=="text"&&f!=="thought"&&c!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,o+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,t,i;let o="";const r=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&r.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(o+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ru{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function hs(n,e){const t=K(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ms(n,e){return Array.isArray(e)?e.map(t=>un(n,t)):[un(n,e)]}function un(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Mu(n,e){const t=un(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Pu(n,e){const t=un(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ur(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function gs(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ur(n,t)):[ur(n,e)]}function ei(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function cr(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function fr(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function re(n,e){if(e==null)throw new Error("ContentUnion is required");return ei(e)?e:{role:"user",parts:gs(n,e)}}function ys(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=re(n,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=re(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>re(n,t)):[re(n,e)]}function Te(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(cr(e)||fr(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[re(n,e)]}const t=[],i=[],o=ei(e[0]);for(const r of e){const a=ei(r);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(r);else{if(cr(r)||fr(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return o||t.push({role:"user",parts:gs(n,i)}),t}const Nu=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),dr=yu(["string","number","integer","object","array","boolean","null"]),Du=hu([dr,wt(dr)]);function bu(n=!0){const e=gu(()=>{const t=pu({type:Du.optional(),format:Ge().optional(),title:Ge().optional(),description:Ge().optional(),default:vo().optional(),items:e.optional(),minItems:it.string().optional(),maxItems:it.string().optional(),enum:wt(vo()).optional(),properties:mu(Ge(),e).optional(),required:wt(Ge()).optional(),minProperties:it.string().optional(),maxProperties:it.string().optional(),propertyOrdering:wt(Ge()).optional(),minimum:To().optional(),maximum:To().optional(),minLength:it.string().optional(),maxLength:it.string().optional(),pattern:Ge().optional(),anyOf:wt(e).optional(),additionalProperties:du().optional()});return n?t.strict():t});return e}function Lu(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ae).includes(t[0].toUpperCase())?t[0].toUpperCase():Ae.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ae).includes(i.toUpperCase())?i.toUpperCase():Ae.TYPE_UNSPECIFIED})}}function st(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&Lu(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ae).includes(u.toUpperCase())?u.toUpperCase():Ae.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=st(u);else if(i.includes(a)){const f=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}f.push(st(c))}e[a]=f}else if(o.includes(a)){const f={};for(const[c,d]of Object.entries(u))f[c]=st(d);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function cn(n,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=bu().parse(e);return st(t)}else return st(e)}function Ts(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function yi(n,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Vt(n,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=cn(n,t.parameters)),t.response&&(t.response=cn(n,t.response));return e}function $t(n,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const i of e)t.push(i);return t}function Fu(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ve(n,e){if(typeof e!="string")throw new Error("name must be a string");return Fu(n,e,"cachedContents")}function vs(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function $e(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Uu(n){return n!=null&&typeof n=="object"&&"name"in n}function Vu(n){return n!=null&&typeof n=="object"&&"video"in n}function $u(n){return n!=null&&typeof n=="object"&&"uri"in n}function Cs(n,e){var t;let i;if(Uu(e)&&(i=e.name),!($u(e)&&(i=e.uri,i===void 0))&&!(Vu(e)&&(i=(t=e.video)===null||t===void 0?void 0:t.uri,i===void 0))){if(typeof e=="string"&&(i=e),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function _s(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function xs(n,e){for(const t of["models","tunedModels","publisherModels"])if(Bu(e,t))return e[t];return[]}function Bu(n,e){return n!==null&&typeof n=="object"&&e in n}function qu(n,e={}){const t=n,i={name:t.name,description:t.description,parameters:st(_n(t.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ou(n,e={}){const t=[],i=new Set;for(const o of n){const r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const a=qu(o,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Gu(n){const e=[];for(const t of n)e.push(_n(t));return e}function Hu(n){const e={};for(const[t,i]of Object.entries(n)){const o=i;e[t]=_n(o)}return e}function _n(n){const e=new Set(["items"]),t=new Set(["anyOf"]),i=new Set(["properties"]),o={};for(const[r,a]of Object.entries(n))if(e.has(r))o[r]=_n(a);else if(t.has(r))o[r]=Gu(a);else if(i.has(r))o[r]=Hu(a);else if(r==="type"){const u=a.toUpperCase();o[r]=Object.values(Ae).includes(u)?u:Ae.TYPE_UNSPECIFIED}else Nu.has(r)&&(o[r]=a);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zu(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function Ju(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Wu(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Zu(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],zu(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],Ju(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],Wu(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function pr(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Zu(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function Ku(n,e){const t={},i=s(e,["behavior"]);i!=null&&l(t,["behavior"],i);const o=s(e,["description"]);o!=null&&l(t,["description"],o);const r=s(e,["name"]);r!=null&&l(t,["name"],r);const a=s(e,["parameters"]);a!=null&&l(t,["parameters"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],u),t}function Yu(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Xu(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],Yu(n,i)),t}function Qu(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function ju(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],Qu(n,i)),t}function ec(){return{}}function tc(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>Ku(n,c))),l(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&l(t,["googleSearch"],Xu(n,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&l(t,["googleSearchRetrieval"],ju(n,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&l(t,["urlContext"],ec());const u=s(e,["codeExecution"]);return u!=null&&l(t,["codeExecution"],u),t}function nc(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["allowedFunctionNames"]);return o!=null&&l(t,["allowedFunctionNames"],o),t}function ic(n,e){const t={},i=s(e,["latitude"]);i!=null&&l(t,["latitude"],i);const o=s(e,["longitude"]);return o!=null&&l(t,["longitude"],o),t}function oc(n,e){const t={},i=s(e,["latLng"]);i!=null&&l(t,["latLng"],ic(n,i));const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function rc(n,e){const t={},i=s(e,["functionCallingConfig"]);i!=null&&l(t,["functionCallingConfig"],nc(n,i));const o=s(e,["retrievalConfig"]);return o!=null&&l(t,["retrievalConfig"],oc(n,o)),t}function sc(n,e,t){const i={},o=s(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const r=s(e,["expireTime"]);t!==void 0&&r!=null&&l(t,["expireTime"],r);const a=s(e,["displayName"]);t!==void 0&&a!=null&&l(t,["displayName"],a);const u=s(e,["contents"]);if(t!==void 0&&u!=null){let p=Te(n,u);Array.isArray(p)&&(p=p.map(h=>pr(n,h))),l(t,["contents"],p)}const f=s(e,["systemInstruction"]);t!==void 0&&f!=null&&l(t,["systemInstruction"],pr(n,re(n,f)));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>tc(n,h))),l(t,["tools"],p)}const d=s(e,["toolConfig"]);if(t!==void 0&&d!=null&&l(t,["toolConfig"],rc(n,d)),s(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function lc(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["model"],hs(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],sc(n,o,t)),t}function ac(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function uc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function cc(n,e,t){const i={},o=s(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const r=s(e,["expireTime"]);return t!==void 0&&r!=null&&l(t,["expireTime"],r),i}function fc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],cc(n,o,t)),t}function dc(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&l(t,["_query","pageToken"],r),i}function pc(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],dc(n,i,t)),t}function hc(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function mc(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["data"]);o!=null&&l(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function gc(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["fileUri"]);o!=null&&l(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function yc(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],hc(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],mc(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],gc(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function hr(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>yc(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function Tc(n,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=s(e,["description"]);i!=null&&l(t,["description"],i);const o=s(e,["name"]);o!=null&&l(t,["name"],o);const r=s(e,["parameters"]);r!=null&&l(t,["parameters"],r);const a=s(e,["response"]);return a!=null&&l(t,["response"],a),t}function vc(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Cc(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],vc(n,i)),t}function _c(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function xc(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],_c(n,i)),t}function Ec(){return{}}function Sc(n,e){const t={},i=s(e,["apiKeyString"]);return i!=null&&l(t,["apiKeyString"],i),t}function Ac(n,e){const t={},i=s(e,["apiKeyConfig"]);i!=null&&l(t,["apiKeyConfig"],Sc(n,i));const o=s(e,["authType"]);o!=null&&l(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&l(t,["googleServiceAccountConfig"],r);const a=s(e,["httpBasicAuthConfig"]);a!=null&&l(t,["httpBasicAuthConfig"],a);const u=s(e,["oauthConfig"]);u!=null&&l(t,["oauthConfig"],u);const f=s(e,["oidcConfig"]);return f!=null&&l(t,["oidcConfig"],f),t}function wc(n,e){const t={},i=s(e,["authConfig"]);return i!=null&&l(t,["authConfig"],Ac(n,i)),t}function kc(){return{}}function Ic(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>Tc(n,h))),l(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&l(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&l(t,["googleSearch"],Cc(n,r));const a=s(e,["googleSearchRetrieval"]);a!=null&&l(t,["googleSearchRetrieval"],xc(n,a)),s(e,["enterpriseWebSearch"])!=null&&l(t,["enterpriseWebSearch"],Ec());const f=s(e,["googleMaps"]);f!=null&&l(t,["googleMaps"],wc(n,f)),s(e,["urlContext"])!=null&&l(t,["urlContext"],kc());const d=s(e,["codeExecution"]);return d!=null&&l(t,["codeExecution"],d),t}function Rc(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["allowedFunctionNames"]);return o!=null&&l(t,["allowedFunctionNames"],o),t}function Mc(n,e){const t={},i=s(e,["latitude"]);i!=null&&l(t,["latitude"],i);const o=s(e,["longitude"]);return o!=null&&l(t,["longitude"],o),t}function Pc(n,e){const t={},i=s(e,["latLng"]);i!=null&&l(t,["latLng"],Mc(n,i));const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function Nc(n,e){const t={},i=s(e,["functionCallingConfig"]);i!=null&&l(t,["functionCallingConfig"],Rc(n,i));const o=s(e,["retrievalConfig"]);return o!=null&&l(t,["retrievalConfig"],Pc(n,o)),t}function Dc(n,e,t){const i={},o=s(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const r=s(e,["expireTime"]);t!==void 0&&r!=null&&l(t,["expireTime"],r);const a=s(e,["displayName"]);t!==void 0&&a!=null&&l(t,["displayName"],a);const u=s(e,["contents"]);if(t!==void 0&&u!=null){let h=Te(n,u);Array.isArray(h)&&(h=h.map(g=>hr(n,g))),l(t,["contents"],h)}const f=s(e,["systemInstruction"]);t!==void 0&&f!=null&&l(t,["systemInstruction"],hr(n,re(n,f)));const c=s(e,["tools"]);if(t!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>Ic(n,g))),l(t,["tools"],h)}const d=s(e,["toolConfig"]);t!==void 0&&d!=null&&l(t,["toolConfig"],Nc(n,d));const p=s(e,["kmsKeyName"]);return t!==void 0&&p!=null&&l(t,["encryption_spec","kmsKeyName"],p),i}function bc(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["model"],hs(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],Dc(n,o,t)),t}function Lc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Fc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Uc(n,e,t){const i={},o=s(e,["ttl"]);t!==void 0&&o!=null&&l(t,["ttl"],o);const r=s(e,["expireTime"]);return t!==void 0&&r!=null&&l(t,["expireTime"],r),i}function Vc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ve(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],Uc(n,o,t)),t}function $c(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&l(t,["_query","pageToken"],r),i}function Bc(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],$c(n,i,t)),t}function Kt(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["model"]);r!=null&&l(t,["model"],r);const a=s(e,["createTime"]);a!=null&&l(t,["createTime"],a);const u=s(e,["updateTime"]);u!=null&&l(t,["updateTime"],u);const f=s(e,["expireTime"]);f!=null&&l(t,["expireTime"],f);const c=s(e,["usageMetadata"]);return c!=null&&l(t,["usageMetadata"],c),t}function qc(){return{}}function Oc(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Kt(n,a))),l(t,["cachedContents"],r)}return t}function Yt(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["model"]);r!=null&&l(t,["model"],r);const a=s(e,["createTime"]);a!=null&&l(t,["createTime"],a);const u=s(e,["updateTime"]);u!=null&&l(t,["updateTime"],u);const f=s(e,["expireTime"]);f!=null&&l(t,["expireTime"],f);const c=s(e,["usageMetadata"]);return c!=null&&l(t,["usageMetadata"],c),t}function Gc(){return{}}function Hc(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Yt(n,a))),l(t,["cachedContents"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pt;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(pt||(pt={}));class xn{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};i?typeof i=="object"?a=Object.assign({},i):a=i:a={config:{}},a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(o=a.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zc extends gt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xn(pt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=bc(this.apiClient,e);return u=b("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Yt(this.apiClient,d))}else{const c=lc(this.apiClient,e);return u=b("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>Kt(this.apiClient,d))}}async get(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Lc(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Yt(this.apiClient,d))}else{const c=ac(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>Kt(this.apiClient,d))}}async delete(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Fc(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Gc(),p=new lr;return Object.assign(p,d),p})}else{const c=uc(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(()=>{const d=qc(),p=new lr;return Object.assign(p,d),p})}}async update(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Vc(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Yt(this.apiClient,d))}else{const c=fc(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>Kt(this.apiClient,d))}}async listInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Bc(this.apiClient,e);return u=b("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Hc(this.apiClient,d),h=new ar;return Object.assign(h,p),h})}else{const c=pc(this.apiClient,e);return u=b("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Oc(this.apiClient,d),h=new ar;return Object.assign(h,p),h})}}}function mr(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(n){return this instanceof Y?(this.v=n,this):new Y(n)}function lt(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(g){return function(m){return Promise.resolve(m).then(g,p)}}function u(g,m){i[g]&&(o[g]=function(y){return new Promise(function(T,v){r.push([g,y,T,v])>1||f(g,y)})},m&&(o[g]=m(o[g])))}function f(g,m){try{c(i[g](m))}catch(y){h(r[0][3],y)}}function c(g){g.value instanceof Y?Promise.resolve(g.value.v).then(d,p):h(r[0][2],g)}function d(g){f("next",g)}function p(g){f("throw",g)}function h(g,m){g(m),r.shift(),r.length&&f(r[0][0],r[0][1])}}function It(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mr=="function"?mr(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(a){return new Promise(function(u,f){a=n[r](a),o(u,f,a.done,a.value)})}}function o(r,a,u,f){Promise.resolve(f).then(function(c){r({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jc(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Es(t)}function Es(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Wc(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gr(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let r=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),r&&!Es(n[i])&&(r=!1),i++;r?e.push(...o):e.pop()}return e}class Zc{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Kc(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Kc{constructor(e,t,i,o={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),Wc(r)}async sendMessage(e){var t;await this.sendPromise;const i=re(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,a,u;const f=await o,c=(a=(r=f.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,d=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];d!=null&&(h=(u=d.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(i,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=re(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const r=await o;return this.processStreamResponse(r,i)}getHistory(e=!1){const t=e?gr(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return lt(this,arguments,function*(){var a,u,f,c;const d=[];try{for(var p=!0,h=It(e),g;g=yield Y(h.next()),a=g.done,!a;p=!0){c=g.value,p=!1;const m=c;if(Jc(m)){const y=(o=(i=m.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;y!==void 0&&d.push(y)}yield yield Y(m)}}catch(m){u={error:m}}finally{try{!p&&!a&&(f=h.return)&&(yield Y(f.call(h)))}finally{if(u)throw u.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(r=>r.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...gr(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yc(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);return t!==void 0&&r!=null&&l(t,["_query","pageToken"],r),i}function Xc(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],Yc(n,i,t)),t}function Qc(n,e){const t={},i=s(e,["details"]);i!=null&&l(t,["details"],i);const o=s(e,["message"]);o!=null&&l(t,["message"],o);const r=s(e,["code"]);return r!=null&&l(t,["code"],r),t}function jc(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["mimeType"]);r!=null&&l(t,["mimeType"],r);const a=s(e,["sizeBytes"]);a!=null&&l(t,["sizeBytes"],a);const u=s(e,["createTime"]);u!=null&&l(t,["createTime"],u);const f=s(e,["expirationTime"]);f!=null&&l(t,["expirationTime"],f);const c=s(e,["updateTime"]);c!=null&&l(t,["updateTime"],c);const d=s(e,["sha256Hash"]);d!=null&&l(t,["sha256Hash"],d);const p=s(e,["uri"]);p!=null&&l(t,["uri"],p);const h=s(e,["downloadUri"]);h!=null&&l(t,["downloadUri"],h);const g=s(e,["state"]);g!=null&&l(t,["state"],g);const m=s(e,["source"]);m!=null&&l(t,["source"],m);const y=s(e,["videoMetadata"]);y!=null&&l(t,["videoMetadata"],y);const T=s(e,["error"]);return T!=null&&l(t,["error"],Qc(n,T)),t}function ef(n,e){const t={},i=s(e,["file"]);i!=null&&l(t,["file"],jc(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function tf(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","file"],Cs(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function nf(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","file"],Cs(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function of(n,e){const t={},i=s(e,["details"]);i!=null&&l(t,["details"],i);const o=s(e,["message"]);o!=null&&l(t,["message"],o);const r=s(e,["code"]);return r!=null&&l(t,["code"],r),t}function ti(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["mimeType"]);r!=null&&l(t,["mimeType"],r);const a=s(e,["sizeBytes"]);a!=null&&l(t,["sizeBytes"],a);const u=s(e,["createTime"]);u!=null&&l(t,["createTime"],u);const f=s(e,["expirationTime"]);f!=null&&l(t,["expirationTime"],f);const c=s(e,["updateTime"]);c!=null&&l(t,["updateTime"],c);const d=s(e,["sha256Hash"]);d!=null&&l(t,["sha256Hash"],d);const p=s(e,["uri"]);p!=null&&l(t,["uri"],p);const h=s(e,["downloadUri"]);h!=null&&l(t,["downloadUri"],h);const g=s(e,["state"]);g!=null&&l(t,["state"],g);const m=s(e,["source"]);m!=null&&l(t,["source"],m);const y=s(e,["videoMetadata"]);y!=null&&l(t,["videoMetadata"],y);const T=s(e,["error"]);return T!=null&&l(t,["error"],of(n,T)),t}function rf(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>ti(n,a))),l(t,["files"],r)}return t}function sf(){return{}}function lf(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends gt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new xn(pt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>ti(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xc(this.apiClient,e);return r=b("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=rf(this.apiClient,f),d=new Au;return Object.assign(d,c),d})}}async createInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ef(this.apiClient,e);return r=b("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=sf(),c=new wu;return Object.assign(c,f),c})}}async get(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tf(this.apiClient,e);return r=b("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>ti(this.apiClient,f))}}async delete(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nf(this.apiClient,e);return r=b("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=lf(),c=new ku;return Object.assign(c,f),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uf(n,e){const t={},i=s(e,["voiceName"]);return i!=null&&l(t,["voiceName"],i),t}function cf(n,e){const t={},i=s(e,["voiceName"]);return i!=null&&l(t,["voiceName"],i),t}function Ss(n,e){const t={},i=s(e,["prebuiltVoiceConfig"]);return i!=null&&l(t,["prebuiltVoiceConfig"],uf(n,i)),t}function ff(n,e){const t={},i=s(e,["prebuiltVoiceConfig"]);return i!=null&&l(t,["prebuiltVoiceConfig"],cf(n,i)),t}function df(n,e){const t={},i=s(e,["speaker"]);i!=null&&l(t,["speaker"],i);const o=s(e,["voiceConfig"]);return o!=null&&l(t,["voiceConfig"],Ss(n,o)),t}function pf(n,e){const t={},i=s(e,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>df(n,r))),l(t,["speakerVoiceConfigs"],o)}return t}function hf(n,e){const t={},i=s(e,["voiceConfig"]);i!=null&&l(t,["voiceConfig"],Ss(n,i));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&l(t,["multiSpeakerVoiceConfig"],pf(n,o));const r=s(e,["languageCode"]);return r!=null&&l(t,["languageCode"],r),t}function mf(n,e){const t={},i=s(e,["voiceConfig"]);if(i!=null&&l(t,["voiceConfig"],ff(n,i)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function gf(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function yf(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function Tf(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function vf(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["data"]);o!=null&&l(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function Cf(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function _f(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["fileUri"]);o!=null&&l(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function xf(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],gf(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],Tf(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],Cf(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Ef(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],yf(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],vf(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],_f(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Sf(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>xf(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function Af(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Ef(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function wf(n,e){const t={},i=s(e,["behavior"]);i!=null&&l(t,["behavior"],i);const o=s(e,["description"]);o!=null&&l(t,["description"],o);const r=s(e,["name"]);r!=null&&l(t,["name"],r);const a=s(e,["parameters"]);a!=null&&l(t,["parameters"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],u),t}function kf(n,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=s(e,["description"]);i!=null&&l(t,["description"],i);const o=s(e,["name"]);o!=null&&l(t,["name"],o);const r=s(e,["parameters"]);r!=null&&l(t,["parameters"],r);const a=s(e,["response"]);return a!=null&&l(t,["response"],a),t}function If(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Rf(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Mf(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],If(n,i)),t}function Pf(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],Rf(n,i)),t}function Nf(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function Df(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function bf(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],Nf(n,i)),t}function Lf(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],Df(n,i)),t}function Ff(){return{}}function Uf(n,e){const t={},i=s(e,["apiKeyString"]);return i!=null&&l(t,["apiKeyString"],i),t}function Vf(n,e){const t={},i=s(e,["apiKeyConfig"]);i!=null&&l(t,["apiKeyConfig"],Uf(n,i));const o=s(e,["authType"]);o!=null&&l(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&l(t,["googleServiceAccountConfig"],r);const a=s(e,["httpBasicAuthConfig"]);a!=null&&l(t,["httpBasicAuthConfig"],a);const u=s(e,["oauthConfig"]);u!=null&&l(t,["oauthConfig"],u);const f=s(e,["oidcConfig"]);return f!=null&&l(t,["oidcConfig"],f),t}function $f(n,e){const t={},i=s(e,["authConfig"]);return i!=null&&l(t,["authConfig"],Vf(n,i)),t}function Bf(){return{}}function qf(){return{}}function Of(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>wf(n,c))),l(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&l(t,["googleSearch"],Mf(n,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&l(t,["googleSearchRetrieval"],bf(n,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&l(t,["urlContext"],Bf());const u=s(e,["codeExecution"]);return u!=null&&l(t,["codeExecution"],u),t}function Gf(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>kf(n,h))),l(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&l(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&l(t,["googleSearch"],Pf(n,r));const a=s(e,["googleSearchRetrieval"]);a!=null&&l(t,["googleSearchRetrieval"],Lf(n,a)),s(e,["enterpriseWebSearch"])!=null&&l(t,["enterpriseWebSearch"],Ff());const f=s(e,["googleMaps"]);f!=null&&l(t,["googleMaps"],$f(n,f)),s(e,["urlContext"])!=null&&l(t,["urlContext"],qf());const d=s(e,["codeExecution"]);return d!=null&&l(t,["codeExecution"],d),t}function Hf(n,e){const t={},i=s(e,["handle"]);if(i!=null&&l(t,["handle"],i),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function zf(n,e){const t={},i=s(e,["handle"]);i!=null&&l(t,["handle"],i);const o=s(e,["transparent"]);return o!=null&&l(t,["transparent"],o),t}function yr(){return{}}function Tr(){return{}}function Jf(n,e){const t={},i=s(e,["disabled"]);i!=null&&l(t,["disabled"],i);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&l(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&l(t,["endOfSpeechSensitivity"],r);const a=s(e,["prefixPaddingMs"]);a!=null&&l(t,["prefixPaddingMs"],a);const u=s(e,["silenceDurationMs"]);return u!=null&&l(t,["silenceDurationMs"],u),t}function Wf(n,e){const t={},i=s(e,["disabled"]);i!=null&&l(t,["disabled"],i);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&l(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&l(t,["endOfSpeechSensitivity"],r);const a=s(e,["prefixPaddingMs"]);a!=null&&l(t,["prefixPaddingMs"],a);const u=s(e,["silenceDurationMs"]);return u!=null&&l(t,["silenceDurationMs"],u),t}function Zf(n,e){const t={},i=s(e,["automaticActivityDetection"]);i!=null&&l(t,["automaticActivityDetection"],Jf(n,i));const o=s(e,["activityHandling"]);o!=null&&l(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&l(t,["turnCoverage"],r),t}function Kf(n,e){const t={},i=s(e,["automaticActivityDetection"]);i!=null&&l(t,["automaticActivityDetection"],Wf(n,i));const o=s(e,["activityHandling"]);o!=null&&l(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&l(t,["turnCoverage"],r),t}function Yf(n,e){const t={},i=s(e,["targetTokens"]);return i!=null&&l(t,["targetTokens"],i),t}function Xf(n,e){const t={},i=s(e,["targetTokens"]);return i!=null&&l(t,["targetTokens"],i),t}function Qf(n,e){const t={},i=s(e,["triggerTokens"]);i!=null&&l(t,["triggerTokens"],i);const o=s(e,["slidingWindow"]);return o!=null&&l(t,["slidingWindow"],Yf(n,o)),t}function jf(n,e){const t={},i=s(e,["triggerTokens"]);i!=null&&l(t,["triggerTokens"],i);const o=s(e,["slidingWindow"]);return o!=null&&l(t,["slidingWindow"],Xf(n,o)),t}function ed(n,e){const t={},i=s(e,["proactiveAudio"]);return i!=null&&l(t,["proactiveAudio"],i),t}function td(n,e){const t={},i=s(e,["proactiveAudio"]);return i!=null&&l(t,["proactiveAudio"],i),t}function nd(n,e,t){const i={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&l(t,["setup","generationConfig","responseModalities"],r);const a=s(e,["temperature"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","temperature"],a);const u=s(e,["topP"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topP"],u);const f=s(e,["topK"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","topK"],f);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","mediaResolution"],d);const p=s(e,["seed"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","speechConfig"],hf(n,yi(n,h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=s(e,["systemInstruction"]);t!==void 0&&m!=null&&l(t,["setup","systemInstruction"],Sf(n,re(n,m)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let E=$t(n,y);Array.isArray(E)&&(E=E.map(k=>Of(n,Vt(n,k)))),l(t,["setup","tools"],E)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&l(t,["setup","sessionResumption"],Hf(n,T));const v=s(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&l(t,["setup","inputAudioTranscription"],yr());const _=s(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&l(t,["setup","outputAudioTranscription"],yr());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&l(t,["setup","realtimeInputConfig"],Zf(n,x));const w=s(e,["contextWindowCompression"]);t!==void 0&&w!=null&&l(t,["setup","contextWindowCompression"],Qf(n,w));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&l(t,["setup","proactivity"],ed(n,S)),i}function id(n,e,t){const i={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&l(t,["setup","generationConfig","responseModalities"],r);const a=s(e,["temperature"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","temperature"],a);const u=s(e,["topP"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topP"],u);const f=s(e,["topK"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","topK"],f);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","mediaResolution"],d);const p=s(e,["seed"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","speechConfig"],mf(n,yi(n,h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=s(e,["systemInstruction"]);t!==void 0&&m!=null&&l(t,["setup","systemInstruction"],Af(n,re(n,m)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let E=$t(n,y);Array.isArray(E)&&(E=E.map(k=>Gf(n,Vt(n,k)))),l(t,["setup","tools"],E)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&l(t,["setup","sessionResumption"],zf(n,T));const v=s(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&l(t,["setup","inputAudioTranscription"],Tr());const _=s(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&l(t,["setup","outputAudioTranscription"],Tr());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&l(t,["setup","realtimeInputConfig"],Kf(n,x));const w=s(e,["contextWindowCompression"]);t!==void 0&&w!=null&&l(t,["setup","contextWindowCompression"],jf(n,w));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&l(t,["setup","proactivity"],td(n,S)),i}function od(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],nd(n,o,t)),t}function rd(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],id(n,o,t)),t}function sd(){return{}}function ld(){return{}}function ad(){return{}}function ud(){return{}}function cd(n,e){const t={},i=s(e,["media"]);i!=null&&l(t,["mediaChunks"],ms(n,i));const o=s(e,["audio"]);o!=null&&l(t,["audio"],Pu(n,o));const r=s(e,["audioStreamEnd"]);r!=null&&l(t,["audioStreamEnd"],r);const a=s(e,["video"]);a!=null&&l(t,["video"],Mu(n,a));const u=s(e,["text"]);return u!=null&&l(t,["text"],u),s(e,["activityStart"])!=null&&l(t,["activityStart"],sd()),s(e,["activityEnd"])!=null&&l(t,["activityEnd"],ad()),t}function fd(n,e){const t={},i=s(e,["media"]);if(i!=null&&l(t,["mediaChunks"],ms(n,i)),s(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const o=s(e,["audioStreamEnd"]);if(o!=null&&l(t,["audioStreamEnd"],o),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(s(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return s(e,["activityStart"])!=null&&l(t,["activityStart"],ld()),s(e,["activityEnd"])!=null&&l(t,["activityEnd"],ud()),t}function As(n,e){const t={},i=s(e,["text"]);i!=null&&l(t,["text"],i);const o=s(e,["weight"]);return o!=null&&l(t,["weight"],o),t}function dd(n,e){const t={},i=s(e,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>As(n,r))),l(t,["weightedPrompts"],o)}return t}function ws(n,e){const t={},i=s(e,["temperature"]);i!=null&&l(t,["temperature"],i);const o=s(e,["topK"]);o!=null&&l(t,["topK"],o);const r=s(e,["seed"]);r!=null&&l(t,["seed"],r);const a=s(e,["guidance"]);a!=null&&l(t,["guidance"],a);const u=s(e,["bpm"]);u!=null&&l(t,["bpm"],u);const f=s(e,["density"]);f!=null&&l(t,["density"],f);const c=s(e,["brightness"]);c!=null&&l(t,["brightness"],c);const d=s(e,["scale"]);d!=null&&l(t,["scale"],d);const p=s(e,["muteBass"]);p!=null&&l(t,["muteBass"],p);const h=s(e,["muteDrums"]);h!=null&&l(t,["muteDrums"],h);const g=s(e,["onlyBassAndDrums"]);return g!=null&&l(t,["onlyBassAndDrums"],g),t}function pd(n,e){const t={},i=s(e,["musicGenerationConfig"]);return i!=null&&l(t,["musicGenerationConfig"],ws(n,i)),t}function ks(n,e){const t={},i=s(e,["model"]);return i!=null&&l(t,["model"],i),t}function Is(n,e){const t={},i=s(e,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>As(n,r))),l(t,["weightedPrompts"],o)}return t}function ni(n,e){const t={},i=s(e,["setup"]);i!=null&&l(t,["setup"],ks(n,i));const o=s(e,["clientContent"]);o!=null&&l(t,["clientContent"],Is(n,o));const r=s(e,["musicGenerationConfig"]);r!=null&&l(t,["musicGenerationConfig"],ws(n,r));const a=s(e,["playbackControl"]);return a!=null&&l(t,["playbackControl"],a),t}function hd(){return{}}function md(){return{}}function gd(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function yd(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function Td(n,e){const t={},i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function vd(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["data"]);o!=null&&l(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function Cd(n,e){const t={},i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function _d(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["fileUri"]);o!=null&&l(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function xd(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],gd(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],Td(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],Cd(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Ed(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],yd(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],vd(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],_d(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Sd(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>xd(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function Ad(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Ed(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function vr(n,e){const t={},i=s(e,["text"]);i!=null&&l(t,["text"],i);const o=s(e,["finished"]);return o!=null&&l(t,["finished"],o),t}function Cr(n,e){const t={},i=s(e,["text"]);i!=null&&l(t,["text"],i);const o=s(e,["finished"]);return o!=null&&l(t,["finished"],o),t}function wd(n,e){const t={},i=s(e,["retrievedUrl"]);i!=null&&l(t,["retrievedUrl"],i);const o=s(e,["urlRetrievalStatus"]);return o!=null&&l(t,["urlRetrievalStatus"],o),t}function kd(n,e){const t={},i=s(e,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>wd(n,r))),l(t,["urlMetadata"],o)}return t}function Id(n,e){const t={},i=s(e,["modelTurn"]);i!=null&&l(t,["modelTurn"],Sd(n,i));const o=s(e,["turnComplete"]);o!=null&&l(t,["turnComplete"],o);const r=s(e,["interrupted"]);r!=null&&l(t,["interrupted"],r);const a=s(e,["groundingMetadata"]);a!=null&&l(t,["groundingMetadata"],a);const u=s(e,["generationComplete"]);u!=null&&l(t,["generationComplete"],u);const f=s(e,["inputTranscription"]);f!=null&&l(t,["inputTranscription"],vr(n,f));const c=s(e,["outputTranscription"]);c!=null&&l(t,["outputTranscription"],vr(n,c));const d=s(e,["urlContextMetadata"]);return d!=null&&l(t,["urlContextMetadata"],kd(n,d)),t}function Rd(n,e){const t={},i=s(e,["modelTurn"]);i!=null&&l(t,["modelTurn"],Ad(n,i));const o=s(e,["turnComplete"]);o!=null&&l(t,["turnComplete"],o);const r=s(e,["interrupted"]);r!=null&&l(t,["interrupted"],r);const a=s(e,["groundingMetadata"]);a!=null&&l(t,["groundingMetadata"],a);const u=s(e,["generationComplete"]);u!=null&&l(t,["generationComplete"],u);const f=s(e,["inputTranscription"]);f!=null&&l(t,["inputTranscription"],Cr(n,f));const c=s(e,["outputTranscription"]);return c!=null&&l(t,["outputTranscription"],Cr(n,c)),t}function Md(n,e){const t={},i=s(e,["id"]);i!=null&&l(t,["id"],i);const o=s(e,["args"]);o!=null&&l(t,["args"],o);const r=s(e,["name"]);return r!=null&&l(t,["name"],r),t}function Pd(n,e){const t={},i=s(e,["args"]);i!=null&&l(t,["args"],i);const o=s(e,["name"]);return o!=null&&l(t,["name"],o),t}function Nd(n,e){const t={},i=s(e,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Md(n,r))),l(t,["functionCalls"],o)}return t}function Dd(n,e){const t={},i=s(e,["functionCalls"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Pd(n,r))),l(t,["functionCalls"],o)}return t}function bd(n,e){const t={},i=s(e,["ids"]);return i!=null&&l(t,["ids"],i),t}function Ld(n,e){const t={},i=s(e,["ids"]);return i!=null&&l(t,["ids"],i),t}function Gt(n,e){const t={},i=s(e,["modality"]);i!=null&&l(t,["modality"],i);const o=s(e,["tokenCount"]);return o!=null&&l(t,["tokenCount"],o),t}function Ht(n,e){const t={},i=s(e,["modality"]);i!=null&&l(t,["modality"],i);const o=s(e,["tokenCount"]);return o!=null&&l(t,["tokenCount"],o),t}function Fd(n,e){const t={},i=s(e,["promptTokenCount"]);i!=null&&l(t,["promptTokenCount"],i);const o=s(e,["cachedContentTokenCount"]);o!=null&&l(t,["cachedContentTokenCount"],o);const r=s(e,["responseTokenCount"]);r!=null&&l(t,["responseTokenCount"],r);const a=s(e,["toolUsePromptTokenCount"]);a!=null&&l(t,["toolUsePromptTokenCount"],a);const u=s(e,["thoughtsTokenCount"]);u!=null&&l(t,["thoughtsTokenCount"],u);const f=s(e,["totalTokenCount"]);f!=null&&l(t,["totalTokenCount"],f);const c=s(e,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>Gt(n,m))),l(t,["promptTokensDetails"],g)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(m=>Gt(n,m))),l(t,["cacheTokensDetails"],g)}const p=s(e,["responseTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>Gt(n,m))),l(t,["responseTokensDetails"],g)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(m=>Gt(n,m))),l(t,["toolUsePromptTokensDetails"],g)}return t}function Ud(n,e){const t={},i=s(e,["promptTokenCount"]);i!=null&&l(t,["promptTokenCount"],i);const o=s(e,["cachedContentTokenCount"]);o!=null&&l(t,["cachedContentTokenCount"],o);const r=s(e,["candidatesTokenCount"]);r!=null&&l(t,["responseTokenCount"],r);const a=s(e,["toolUsePromptTokenCount"]);a!=null&&l(t,["toolUsePromptTokenCount"],a);const u=s(e,["thoughtsTokenCount"]);u!=null&&l(t,["thoughtsTokenCount"],u);const f=s(e,["totalTokenCount"]);f!=null&&l(t,["totalTokenCount"],f);const c=s(e,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>Ht(n,y))),l(t,["promptTokensDetails"],m)}const d=s(e,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>Ht(n,y))),l(t,["cacheTokensDetails"],m)}const p=s(e,["candidatesTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>Ht(n,y))),l(t,["responseTokensDetails"],m)}const h=s(e,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>Ht(n,y))),l(t,["toolUsePromptTokensDetails"],m)}const g=s(e,["trafficType"]);return g!=null&&l(t,["trafficType"],g),t}function Vd(n,e){const t={},i=s(e,["timeLeft"]);return i!=null&&l(t,["timeLeft"],i),t}function $d(n,e){const t={},i=s(e,["timeLeft"]);return i!=null&&l(t,["timeLeft"],i),t}function Bd(n,e){const t={},i=s(e,["newHandle"]);i!=null&&l(t,["newHandle"],i);const o=s(e,["resumable"]);o!=null&&l(t,["resumable"],o);const r=s(e,["lastConsumedClientMessageIndex"]);return r!=null&&l(t,["lastConsumedClientMessageIndex"],r),t}function qd(n,e){const t={},i=s(e,["newHandle"]);i!=null&&l(t,["newHandle"],i);const o=s(e,["resumable"]);o!=null&&l(t,["resumable"],o);const r=s(e,["lastConsumedClientMessageIndex"]);return r!=null&&l(t,["lastConsumedClientMessageIndex"],r),t}function Od(n,e){const t={};s(e,["setupComplete"])!=null&&l(t,["setupComplete"],hd());const o=s(e,["serverContent"]);o!=null&&l(t,["serverContent"],Id(n,o));const r=s(e,["toolCall"]);r!=null&&l(t,["toolCall"],Nd(n,r));const a=s(e,["toolCallCancellation"]);a!=null&&l(t,["toolCallCancellation"],bd(n,a));const u=s(e,["usageMetadata"]);u!=null&&l(t,["usageMetadata"],Fd(n,u));const f=s(e,["goAway"]);f!=null&&l(t,["goAway"],Vd(n,f));const c=s(e,["sessionResumptionUpdate"]);return c!=null&&l(t,["sessionResumptionUpdate"],Bd(n,c)),t}function Gd(n,e){const t={};s(e,["setupComplete"])!=null&&l(t,["setupComplete"],md());const o=s(e,["serverContent"]);o!=null&&l(t,["serverContent"],Rd(n,o));const r=s(e,["toolCall"]);r!=null&&l(t,["toolCall"],Dd(n,r));const a=s(e,["toolCallCancellation"]);a!=null&&l(t,["toolCallCancellation"],Ld(n,a));const u=s(e,["usageMetadata"]);u!=null&&l(t,["usageMetadata"],Ud(n,u));const f=s(e,["goAway"]);f!=null&&l(t,["goAway"],$d(n,f));const c=s(e,["sessionResumptionUpdate"]);return c!=null&&l(t,["sessionResumptionUpdate"],qd(n,c)),t}function Hd(){return{}}function zd(n,e){const t={},i=s(e,["text"]);i!=null&&l(t,["text"],i);const o=s(e,["weight"]);return o!=null&&l(t,["weight"],o),t}function Jd(n,e){const t={},i=s(e,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>zd(n,r))),l(t,["weightedPrompts"],o)}return t}function Wd(n,e){const t={},i=s(e,["temperature"]);i!=null&&l(t,["temperature"],i);const o=s(e,["topK"]);o!=null&&l(t,["topK"],o);const r=s(e,["seed"]);r!=null&&l(t,["seed"],r);const a=s(e,["guidance"]);a!=null&&l(t,["guidance"],a);const u=s(e,["bpm"]);u!=null&&l(t,["bpm"],u);const f=s(e,["density"]);f!=null&&l(t,["density"],f);const c=s(e,["brightness"]);c!=null&&l(t,["brightness"],c);const d=s(e,["scale"]);d!=null&&l(t,["scale"],d);const p=s(e,["muteBass"]);p!=null&&l(t,["muteBass"],p);const h=s(e,["muteDrums"]);h!=null&&l(t,["muteDrums"],h);const g=s(e,["onlyBassAndDrums"]);return g!=null&&l(t,["onlyBassAndDrums"],g),t}function Zd(n,e){const t={},i=s(e,["clientContent"]);i!=null&&l(t,["clientContent"],Jd(n,i));const o=s(e,["musicGenerationConfig"]);return o!=null&&l(t,["musicGenerationConfig"],Wd(n,o)),t}function Kd(n,e){const t={},i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);o!=null&&l(t,["mimeType"],o);const r=s(e,["sourceMetadata"]);return r!=null&&l(t,["sourceMetadata"],Zd(n,r)),t}function Yd(n,e){const t={},i=s(e,["audioChunks"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Kd(n,r))),l(t,["audioChunks"],o)}return t}function Xd(n,e){const t={},i=s(e,["text"]);i!=null&&l(t,["text"],i);const o=s(e,["filteredReason"]);return o!=null&&l(t,["filteredReason"],o),t}function Qd(n,e){const t={};s(e,["setupComplete"])!=null&&l(t,["setupComplete"],Hd());const o=s(e,["serverContent"]);o!=null&&l(t,["serverContent"],Yd(n,o));const r=s(e,["filteredPrompt"]);return r!=null&&l(t,["filteredPrompt"],Xd(n,r)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jd(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function ep(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function tp(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function np(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],jd(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],ep(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],tp(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function En(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>np(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function ip(n,e){const t={},i=s(e,["anyOf"]);i!=null&&l(t,["anyOf"],i);const o=s(e,["default"]);o!=null&&l(t,["default"],o);const r=s(e,["description"]);r!=null&&l(t,["description"],r);const a=s(e,["enum"]);a!=null&&l(t,["enum"],a);const u=s(e,["example"]);u!=null&&l(t,["example"],u);const f=s(e,["format"]);f!=null&&l(t,["format"],f);const c=s(e,["items"]);c!=null&&l(t,["items"],c);const d=s(e,["maxItems"]);d!=null&&l(t,["maxItems"],d);const p=s(e,["maxLength"]);p!=null&&l(t,["maxLength"],p);const h=s(e,["maxProperties"]);h!=null&&l(t,["maxProperties"],h);const g=s(e,["maximum"]);g!=null&&l(t,["maximum"],g);const m=s(e,["minItems"]);m!=null&&l(t,["minItems"],m);const y=s(e,["minLength"]);y!=null&&l(t,["minLength"],y);const T=s(e,["minProperties"]);T!=null&&l(t,["minProperties"],T);const v=s(e,["minimum"]);v!=null&&l(t,["minimum"],v);const _=s(e,["nullable"]);_!=null&&l(t,["nullable"],_);const x=s(e,["pattern"]);x!=null&&l(t,["pattern"],x);const w=s(e,["properties"]);w!=null&&l(t,["properties"],w);const S=s(e,["propertyOrdering"]);S!=null&&l(t,["propertyOrdering"],S);const E=s(e,["required"]);E!=null&&l(t,["required"],E);const k=s(e,["title"]);k!=null&&l(t,["title"],k);const D=s(e,["type"]);return D!=null&&l(t,["type"],D),t}function op(n,e){const t={};if(s(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=s(e,["category"]);i!=null&&l(t,["category"],i);const o=s(e,["threshold"]);return o!=null&&l(t,["threshold"],o),t}function rp(n,e){const t={},i=s(e,["behavior"]);i!=null&&l(t,["behavior"],i);const o=s(e,["description"]);o!=null&&l(t,["description"],o);const r=s(e,["name"]);r!=null&&l(t,["name"],r);const a=s(e,["parameters"]);a!=null&&l(t,["parameters"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],u),t}function sp(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function lp(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],sp(n,i)),t}function ap(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function up(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],ap(n,i)),t}function cp(){return{}}function fp(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>rp(n,c))),l(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&l(t,["googleSearch"],lp(n,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&l(t,["googleSearchRetrieval"],up(n,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&l(t,["urlContext"],cp());const u=s(e,["codeExecution"]);return u!=null&&l(t,["codeExecution"],u),t}function dp(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["allowedFunctionNames"]);return o!=null&&l(t,["allowedFunctionNames"],o),t}function pp(n,e){const t={},i=s(e,["latitude"]);i!=null&&l(t,["latitude"],i);const o=s(e,["longitude"]);return o!=null&&l(t,["longitude"],o),t}function hp(n,e){const t={},i=s(e,["latLng"]);i!=null&&l(t,["latLng"],pp(n,i));const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function mp(n,e){const t={},i=s(e,["functionCallingConfig"]);i!=null&&l(t,["functionCallingConfig"],dp(n,i));const o=s(e,["retrievalConfig"]);return o!=null&&l(t,["retrievalConfig"],hp(n,o)),t}function gp(n,e){const t={},i=s(e,["voiceName"]);return i!=null&&l(t,["voiceName"],i),t}function Rs(n,e){const t={},i=s(e,["prebuiltVoiceConfig"]);return i!=null&&l(t,["prebuiltVoiceConfig"],gp(n,i)),t}function yp(n,e){const t={},i=s(e,["speaker"]);i!=null&&l(t,["speaker"],i);const o=s(e,["voiceConfig"]);return o!=null&&l(t,["voiceConfig"],Rs(n,o)),t}function Tp(n,e){const t={},i=s(e,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>yp(n,r))),l(t,["speakerVoiceConfigs"],o)}return t}function vp(n,e){const t={},i=s(e,["voiceConfig"]);i!=null&&l(t,["voiceConfig"],Rs(n,i));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&l(t,["multiSpeakerVoiceConfig"],Tp(n,o));const r=s(e,["languageCode"]);return r!=null&&l(t,["languageCode"],r),t}function Cp(n,e){const t={},i=s(e,["includeThoughts"]);i!=null&&l(t,["includeThoughts"],i);const o=s(e,["thinkingBudget"]);return o!=null&&l(t,["thinkingBudget"],o),t}function _p(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],En(n,re(n,o)));const r=s(e,["temperature"]);r!=null&&l(i,["temperature"],r);const a=s(e,["topP"]);a!=null&&l(i,["topP"],a);const u=s(e,["topK"]);u!=null&&l(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&l(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&l(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&l(i,["stopSequences"],d);const p=s(e,["responseLogprobs"]);p!=null&&l(i,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&l(i,["logprobs"],h);const g=s(e,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);const m=s(e,["frequencyPenalty"]);m!=null&&l(i,["frequencyPenalty"],m);const y=s(e,["seed"]);y!=null&&l(i,["seed"],y);const T=s(e,["responseMimeType"]);T!=null&&l(i,["responseMimeType"],T);const v=s(e,["responseSchema"]);if(v!=null&&l(i,["responseSchema"],ip(n,cn(n,v))),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=s(e,["safetySettings"]);if(t!==void 0&&_!=null){let L=_;Array.isArray(L)&&(L=L.map(B=>op(n,B))),l(t,["safetySettings"],L)}const x=s(e,["tools"]);if(t!==void 0&&x!=null){let L=$t(n,x);Array.isArray(L)&&(L=L.map(B=>fp(n,Vt(n,B)))),l(t,["tools"],L)}const w=s(e,["toolConfig"]);if(t!==void 0&&w!=null&&l(t,["toolConfig"],mp(n,w)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=s(e,["cachedContent"]);t!==void 0&&S!=null&&l(t,["cachedContent"],Ve(n,S));const E=s(e,["responseModalities"]);E!=null&&l(i,["responseModalities"],E);const k=s(e,["mediaResolution"]);k!=null&&l(i,["mediaResolution"],k);const D=s(e,["speechConfig"]);if(D!=null&&l(i,["speechConfig"],vp(n,Ts(n,D))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=s(e,["thinkingConfig"]);return M!=null&&l(i,["thinkingConfig"],Cp(n,M)),i}function _r(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);if(o!=null){let a=Te(n,o);Array.isArray(a)&&(a=a.map(u=>En(n,u))),l(t,["contents"],a)}const r=s(e,["config"]);return r!=null&&l(t,["generationConfig"],_p(n,r,t)),t}function xp(n,e,t){const i={},o=s(e,["taskType"]);t!==void 0&&o!=null&&l(t,["requests[]","taskType"],o);const r=s(e,["title"]);t!==void 0&&r!=null&&l(t,["requests[]","title"],r);const a=s(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&l(t,["requests[]","outputDimensionality"],a),s(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Ep(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);o!=null&&l(t,["requests[]","content"],ys(n,o));const r=s(e,["config"]);r!=null&&l(t,["config"],xp(n,r,t));const a=s(e,["model"]);return a!==void 0&&l(t,["requests[]","model"],K(n,a)),t}function Sp(n,e,t){const i={};if(s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=s(e,["numberOfImages"]);t!==void 0&&o!=null&&l(t,["parameters","sampleCount"],o);const r=s(e,["aspectRatio"]);t!==void 0&&r!=null&&l(t,["parameters","aspectRatio"],r);const a=s(e,["guidanceScale"]);if(t!==void 0&&a!=null&&l(t,["parameters","guidanceScale"],a),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=s(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&l(t,["parameters","safetySetting"],u);const f=s(e,["personGeneration"]);t!==void 0&&f!=null&&l(t,["parameters","personGeneration"],f);const c=s(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&l(t,["parameters","includeSafetyAttributes"],c);const d=s(e,["includeRaiReason"]);t!==void 0&&d!=null&&l(t,["parameters","includeRaiReason"],d);const p=s(e,["language"]);t!==void 0&&p!=null&&l(t,["parameters","language"],p);const h=s(e,["outputMimeType"]);t!==void 0&&h!=null&&l(t,["parameters","outputOptions","mimeType"],h);const g=s(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&l(t,["parameters","outputOptions","compressionQuality"],g),s(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Ap(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&l(t,["config"],Sp(n,r,t)),t}function wp(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function kp(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);const a=s(e,["filter"]);t!==void 0&&a!=null&&l(t,["_query","filter"],a);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&l(t,["_url","models_url"],_s(n,u)),i}function Ip(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],kp(n,i,t)),t}function Rp(n,e,t){const i={},o=s(e,["displayName"]);t!==void 0&&o!=null&&l(t,["displayName"],o);const r=s(e,["description"]);t!==void 0&&r!=null&&l(t,["description"],r);const a=s(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&l(t,["defaultCheckpointId"],a),i}function Mp(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],Rp(n,o,t)),t}function Pp(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Np(n,e){const t={};if(s(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Dp(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);if(o!=null){let a=Te(n,o);Array.isArray(a)&&(a=a.map(u=>En(n,u))),l(t,["contents"],a)}const r=s(e,["config"]);return r!=null&&l(t,["config"],Np(n,r)),t}function bp(n,e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=s(e,["imageBytes"]);i!=null&&l(t,["bytesBase64Encoded"],$e(n,i));const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Lp(n,e,t){const i={},o=s(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&l(t,["parameters","sampleCount"],o),s(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=s(e,["durationSeconds"]);if(t!==void 0&&r!=null&&l(t,["parameters","durationSeconds"],r),s(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=s(e,["aspectRatio"]);if(t!==void 0&&a!=null&&l(t,["parameters","aspectRatio"],a),s(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=s(e,["personGeneration"]);if(t!==void 0&&u!=null&&l(t,["parameters","personGeneration"],u),s(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=s(e,["negativePrompt"]);t!==void 0&&f!=null&&l(t,["parameters","negativePrompt"],f);const c=s(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&l(t,["parameters","enhancePrompt"],c),s(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return i}function Fp(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);const r=s(e,["image"]);r!=null&&l(t,["instances[0]","image"],bp(n,r));const a=s(e,["config"]);return a!=null&&l(t,["config"],Lp(n,a,t)),t}function Up(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function Vp(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["data"]);o!=null&&l(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function $p(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["fileUri"]);o!=null&&l(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function Bp(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],Up(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],Vp(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],$p(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function yt(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Bp(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function qp(n,e){const t={},i=s(e,["anyOf"]);i!=null&&l(t,["anyOf"],i);const o=s(e,["default"]);o!=null&&l(t,["default"],o);const r=s(e,["description"]);r!=null&&l(t,["description"],r);const a=s(e,["enum"]);a!=null&&l(t,["enum"],a);const u=s(e,["example"]);u!=null&&l(t,["example"],u);const f=s(e,["format"]);f!=null&&l(t,["format"],f);const c=s(e,["items"]);c!=null&&l(t,["items"],c);const d=s(e,["maxItems"]);d!=null&&l(t,["maxItems"],d);const p=s(e,["maxLength"]);p!=null&&l(t,["maxLength"],p);const h=s(e,["maxProperties"]);h!=null&&l(t,["maxProperties"],h);const g=s(e,["maximum"]);g!=null&&l(t,["maximum"],g);const m=s(e,["minItems"]);m!=null&&l(t,["minItems"],m);const y=s(e,["minLength"]);y!=null&&l(t,["minLength"],y);const T=s(e,["minProperties"]);T!=null&&l(t,["minProperties"],T);const v=s(e,["minimum"]);v!=null&&l(t,["minimum"],v);const _=s(e,["nullable"]);_!=null&&l(t,["nullable"],_);const x=s(e,["pattern"]);x!=null&&l(t,["pattern"],x);const w=s(e,["properties"]);w!=null&&l(t,["properties"],w);const S=s(e,["propertyOrdering"]);S!=null&&l(t,["propertyOrdering"],S);const E=s(e,["required"]);E!=null&&l(t,["required"],E);const k=s(e,["title"]);k!=null&&l(t,["title"],k);const D=s(e,["type"]);return D!=null&&l(t,["type"],D),t}function Op(n,e){const t={},i=s(e,["featureSelectionPreference"]);return i!=null&&l(t,["featureSelectionPreference"],i),t}function Gp(n,e){const t={},i=s(e,["method"]);i!=null&&l(t,["method"],i);const o=s(e,["category"]);o!=null&&l(t,["category"],o);const r=s(e,["threshold"]);return r!=null&&l(t,["threshold"],r),t}function Hp(n,e){const t={};if(s(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=s(e,["description"]);i!=null&&l(t,["description"],i);const o=s(e,["name"]);o!=null&&l(t,["name"],o);const r=s(e,["parameters"]);r!=null&&l(t,["parameters"],r);const a=s(e,["response"]);return a!=null&&l(t,["response"],a),t}function zp(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Jp(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],zp(n,i)),t}function Wp(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function Zp(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],Wp(n,i)),t}function Kp(){return{}}function Yp(n,e){const t={},i=s(e,["apiKeyString"]);return i!=null&&l(t,["apiKeyString"],i),t}function Xp(n,e){const t={},i=s(e,["apiKeyConfig"]);i!=null&&l(t,["apiKeyConfig"],Yp(n,i));const o=s(e,["authType"]);o!=null&&l(t,["authType"],o);const r=s(e,["googleServiceAccountConfig"]);r!=null&&l(t,["googleServiceAccountConfig"],r);const a=s(e,["httpBasicAuthConfig"]);a!=null&&l(t,["httpBasicAuthConfig"],a);const u=s(e,["oauthConfig"]);u!=null&&l(t,["oauthConfig"],u);const f=s(e,["oidcConfig"]);return f!=null&&l(t,["oidcConfig"],f),t}function Qp(n,e){const t={},i=s(e,["authConfig"]);return i!=null&&l(t,["authConfig"],Xp(n,i)),t}function jp(){return{}}function Ms(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>Hp(n,h))),l(t,["functionDeclarations"],p)}const o=s(e,["retrieval"]);o!=null&&l(t,["retrieval"],o);const r=s(e,["googleSearch"]);r!=null&&l(t,["googleSearch"],Jp(n,r));const a=s(e,["googleSearchRetrieval"]);a!=null&&l(t,["googleSearchRetrieval"],Zp(n,a)),s(e,["enterpriseWebSearch"])!=null&&l(t,["enterpriseWebSearch"],Kp());const f=s(e,["googleMaps"]);f!=null&&l(t,["googleMaps"],Qp(n,f)),s(e,["urlContext"])!=null&&l(t,["urlContext"],jp());const d=s(e,["codeExecution"]);return d!=null&&l(t,["codeExecution"],d),t}function eh(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["allowedFunctionNames"]);return o!=null&&l(t,["allowedFunctionNames"],o),t}function th(n,e){const t={},i=s(e,["latitude"]);i!=null&&l(t,["latitude"],i);const o=s(e,["longitude"]);return o!=null&&l(t,["longitude"],o),t}function nh(n,e){const t={},i=s(e,["latLng"]);i!=null&&l(t,["latLng"],th(n,i));const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function ih(n,e){const t={},i=s(e,["functionCallingConfig"]);i!=null&&l(t,["functionCallingConfig"],eh(n,i));const o=s(e,["retrievalConfig"]);return o!=null&&l(t,["retrievalConfig"],nh(n,o)),t}function oh(n,e){const t={},i=s(e,["voiceName"]);return i!=null&&l(t,["voiceName"],i),t}function rh(n,e){const t={},i=s(e,["prebuiltVoiceConfig"]);return i!=null&&l(t,["prebuiltVoiceConfig"],oh(n,i)),t}function sh(n,e){const t={},i=s(e,["voiceConfig"]);if(i!=null&&l(t,["voiceConfig"],rh(n,i)),s(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=s(e,["languageCode"]);return o!=null&&l(t,["languageCode"],o),t}function lh(n,e){const t={},i=s(e,["includeThoughts"]);i!=null&&l(t,["includeThoughts"],i);const o=s(e,["thinkingBudget"]);return o!=null&&l(t,["thinkingBudget"],o),t}function ah(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],yt(n,re(n,o)));const r=s(e,["temperature"]);r!=null&&l(i,["temperature"],r);const a=s(e,["topP"]);a!=null&&l(i,["topP"],a);const u=s(e,["topK"]);u!=null&&l(i,["topK"],u);const f=s(e,["candidateCount"]);f!=null&&l(i,["candidateCount"],f);const c=s(e,["maxOutputTokens"]);c!=null&&l(i,["maxOutputTokens"],c);const d=s(e,["stopSequences"]);d!=null&&l(i,["stopSequences"],d);const p=s(e,["responseLogprobs"]);p!=null&&l(i,["responseLogprobs"],p);const h=s(e,["logprobs"]);h!=null&&l(i,["logprobs"],h);const g=s(e,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);const m=s(e,["frequencyPenalty"]);m!=null&&l(i,["frequencyPenalty"],m);const y=s(e,["seed"]);y!=null&&l(i,["seed"],y);const T=s(e,["responseMimeType"]);T!=null&&l(i,["responseMimeType"],T);const v=s(e,["responseSchema"]);v!=null&&l(i,["responseSchema"],qp(n,cn(n,v)));const _=s(e,["routingConfig"]);_!=null&&l(i,["routingConfig"],_);const x=s(e,["modelSelectionConfig"]);x!=null&&l(i,["modelConfig"],Op(n,x));const w=s(e,["safetySettings"]);if(t!==void 0&&w!=null){let X=w;Array.isArray(X)&&(X=X.map(ie=>Gp(n,ie))),l(t,["safetySettings"],X)}const S=s(e,["tools"]);if(t!==void 0&&S!=null){let X=$t(n,S);Array.isArray(X)&&(X=X.map(ie=>Ms(n,Vt(n,ie)))),l(t,["tools"],X)}const E=s(e,["toolConfig"]);t!==void 0&&E!=null&&l(t,["toolConfig"],ih(n,E));const k=s(e,["labels"]);t!==void 0&&k!=null&&l(t,["labels"],k);const D=s(e,["cachedContent"]);t!==void 0&&D!=null&&l(t,["cachedContent"],Ve(n,D));const M=s(e,["responseModalities"]);M!=null&&l(i,["responseModalities"],M);const L=s(e,["mediaResolution"]);L!=null&&l(i,["mediaResolution"],L);const B=s(e,["speechConfig"]);B!=null&&l(i,["speechConfig"],sh(n,Ts(n,B)));const te=s(e,["audioTimestamp"]);te!=null&&l(i,["audioTimestamp"],te);const H=s(e,["thinkingConfig"]);return H!=null&&l(i,["thinkingConfig"],lh(n,H)),i}function xr(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);if(o!=null){let a=Te(n,o);Array.isArray(a)&&(a=a.map(u=>yt(n,u))),l(t,["contents"],a)}const r=s(e,["config"]);return r!=null&&l(t,["generationConfig"],ah(n,r,t)),t}function uh(n,e,t){const i={},o=s(e,["taskType"]);t!==void 0&&o!=null&&l(t,["instances[]","task_type"],o);const r=s(e,["title"]);t!==void 0&&r!=null&&l(t,["instances[]","title"],r);const a=s(e,["outputDimensionality"]);t!==void 0&&a!=null&&l(t,["parameters","outputDimensionality"],a);const u=s(e,["mimeType"]);t!==void 0&&u!=null&&l(t,["instances[]","mimeType"],u);const f=s(e,["autoTruncate"]);return t!==void 0&&f!=null&&l(t,["parameters","autoTruncate"],f),i}function ch(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);o!=null&&l(t,["instances[]","content"],ys(n,o));const r=s(e,["config"]);return r!=null&&l(t,["config"],uh(n,r,t)),t}function fh(n,e,t){const i={},o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&l(t,["parameters","storageUri"],o);const r=s(e,["negativePrompt"]);t!==void 0&&r!=null&&l(t,["parameters","negativePrompt"],r);const a=s(e,["numberOfImages"]);t!==void 0&&a!=null&&l(t,["parameters","sampleCount"],a);const u=s(e,["aspectRatio"]);t!==void 0&&u!=null&&l(t,["parameters","aspectRatio"],u);const f=s(e,["guidanceScale"]);t!==void 0&&f!=null&&l(t,["parameters","guidanceScale"],f);const c=s(e,["seed"]);t!==void 0&&c!=null&&l(t,["parameters","seed"],c);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&l(t,["parameters","safetySetting"],d);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&l(t,["parameters","includeSafetyAttributes"],h);const g=s(e,["includeRaiReason"]);t!==void 0&&g!=null&&l(t,["parameters","includeRaiReason"],g);const m=s(e,["language"]);t!==void 0&&m!=null&&l(t,["parameters","language"],m);const y=s(e,["outputMimeType"]);t!==void 0&&y!=null&&l(t,["parameters","outputOptions","mimeType"],y);const T=s(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&l(t,["parameters","outputOptions","compressionQuality"],T);const v=s(e,["addWatermark"]);t!==void 0&&v!=null&&l(t,["parameters","addWatermark"],v);const _=s(e,["enhancePrompt"]);return t!==void 0&&_!=null&&l(t,["parameters","enhancePrompt"],_),i}function dh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);const r=s(e,["config"]);return r!=null&&l(t,["config"],fh(n,r,t)),t}function Ti(n,e){const t={},i=s(e,["gcsUri"]);i!=null&&l(t,["gcsUri"],i);const o=s(e,["imageBytes"]);o!=null&&l(t,["bytesBase64Encoded"],$e(n,o));const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function ph(n,e){const t={},i=s(e,["maskMode"]);i!=null&&l(t,["maskMode"],i);const o=s(e,["segmentationClasses"]);o!=null&&l(t,["maskClasses"],o);const r=s(e,["maskDilation"]);return r!=null&&l(t,["dilation"],r),t}function hh(n,e){const t={},i=s(e,["controlType"]);i!=null&&l(t,["controlType"],i);const o=s(e,["enableControlImageComputation"]);return o!=null&&l(t,["computeControl"],o),t}function mh(n,e){const t={},i=s(e,["styleDescription"]);return i!=null&&l(t,["styleDescription"],i),t}function gh(n,e){const t={},i=s(e,["subjectType"]);i!=null&&l(t,["subjectType"],i);const o=s(e,["subjectDescription"]);return o!=null&&l(t,["subjectDescription"],o),t}function yh(n,e){const t={},i=s(e,["referenceImage"]);i!=null&&l(t,["referenceImage"],Ti(n,i));const o=s(e,["referenceId"]);o!=null&&l(t,["referenceId"],o);const r=s(e,["referenceType"]);r!=null&&l(t,["referenceType"],r);const a=s(e,["maskImageConfig"]);a!=null&&l(t,["maskImageConfig"],ph(n,a));const u=s(e,["controlImageConfig"]);u!=null&&l(t,["controlImageConfig"],hh(n,u));const f=s(e,["styleImageConfig"]);f!=null&&l(t,["styleImageConfig"],mh(n,f));const c=s(e,["subjectImageConfig"]);return c!=null&&l(t,["subjectImageConfig"],gh(n,c)),t}function Th(n,e,t){const i={},o=s(e,["outputGcsUri"]);t!==void 0&&o!=null&&l(t,["parameters","storageUri"],o);const r=s(e,["negativePrompt"]);t!==void 0&&r!=null&&l(t,["parameters","negativePrompt"],r);const a=s(e,["numberOfImages"]);t!==void 0&&a!=null&&l(t,["parameters","sampleCount"],a);const u=s(e,["aspectRatio"]);t!==void 0&&u!=null&&l(t,["parameters","aspectRatio"],u);const f=s(e,["guidanceScale"]);t!==void 0&&f!=null&&l(t,["parameters","guidanceScale"],f);const c=s(e,["seed"]);t!==void 0&&c!=null&&l(t,["parameters","seed"],c);const d=s(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&l(t,["parameters","safetySetting"],d);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=s(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&l(t,["parameters","includeSafetyAttributes"],h);const g=s(e,["includeRaiReason"]);t!==void 0&&g!=null&&l(t,["parameters","includeRaiReason"],g);const m=s(e,["language"]);t!==void 0&&m!=null&&l(t,["parameters","language"],m);const y=s(e,["outputMimeType"]);t!==void 0&&y!=null&&l(t,["parameters","outputOptions","mimeType"],y);const T=s(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&l(t,["parameters","outputOptions","compressionQuality"],T);const v=s(e,["editMode"]);t!==void 0&&v!=null&&l(t,["parameters","editMode"],v);const _=s(e,["baseSteps"]);return t!==void 0&&_!=null&&l(t,["parameters","editConfig","baseSteps"],_),i}function vh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);const r=s(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>yh(n,f))),l(t,["instances[0]","referenceImages"],u)}const a=s(e,["config"]);return a!=null&&l(t,["config"],Th(n,a,t)),t}function Ch(n,e,t){const i={},o=s(e,["includeRaiReason"]);t!==void 0&&o!=null&&l(t,["parameters","includeRaiReason"],o);const r=s(e,["outputMimeType"]);t!==void 0&&r!=null&&l(t,["parameters","outputOptions","mimeType"],r);const a=s(e,["outputCompressionQuality"]);t!==void 0&&a!=null&&l(t,["parameters","outputOptions","compressionQuality"],a);const u=s(e,["numberOfImages"]);t!==void 0&&u!=null&&l(t,["parameters","sampleCount"],u);const f=s(e,["mode"]);return t!==void 0&&f!=null&&l(t,["parameters","mode"],f),i}function _h(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["image"]);o!=null&&l(t,["instances[0]","image"],Ti(n,o));const r=s(e,["upscaleFactor"]);r!=null&&l(t,["parameters","upscaleConfig","upscaleFactor"],r);const a=s(e,["config"]);return a!=null&&l(t,["config"],Ch(n,a,t)),t}function xh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Eh(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);const a=s(e,["filter"]);t!==void 0&&a!=null&&l(t,["_query","filter"],a);const u=s(e,["queryBase"]);return t!==void 0&&u!=null&&l(t,["_url","models_url"],_s(n,u)),i}function Sh(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],Eh(n,i,t)),t}function Ah(n,e,t){const i={},o=s(e,["displayName"]);t!==void 0&&o!=null&&l(t,["displayName"],o);const r=s(e,["description"]);t!==void 0&&r!=null&&l(t,["description"],r);const a=s(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&l(t,["defaultCheckpointId"],a),i}function wh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],Ah(n,o,t)),t}function kh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Ih(n,e,t){const i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],yt(n,re(n,o)));const r=s(e,["tools"]);if(t!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>Ms(n,f))),l(t,["tools"],u)}const a=s(e,["generationConfig"]);return t!==void 0&&a!=null&&l(t,["generationConfig"],a),i}function Rh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);if(o!=null){let a=Te(n,o);Array.isArray(a)&&(a=a.map(u=>yt(n,u))),l(t,["contents"],a)}const r=s(e,["config"]);return r!=null&&l(t,["config"],Ih(n,r,t)),t}function Mh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["contents"]);if(o!=null){let a=Te(n,o);Array.isArray(a)&&(a=a.map(u=>yt(n,u))),l(t,["contents"],a)}const r=s(e,["config"]);return r!=null&&l(t,["config"],r),t}function Ph(n,e,t){const i={},o=s(e,["numberOfVideos"]);t!==void 0&&o!=null&&l(t,["parameters","sampleCount"],o);const r=s(e,["outputGcsUri"]);t!==void 0&&r!=null&&l(t,["parameters","storageUri"],r);const a=s(e,["fps"]);t!==void 0&&a!=null&&l(t,["parameters","fps"],a);const u=s(e,["durationSeconds"]);t!==void 0&&u!=null&&l(t,["parameters","durationSeconds"],u);const f=s(e,["seed"]);t!==void 0&&f!=null&&l(t,["parameters","seed"],f);const c=s(e,["aspectRatio"]);t!==void 0&&c!=null&&l(t,["parameters","aspectRatio"],c);const d=s(e,["resolution"]);t!==void 0&&d!=null&&l(t,["parameters","resolution"],d);const p=s(e,["personGeneration"]);t!==void 0&&p!=null&&l(t,["parameters","personGeneration"],p);const h=s(e,["pubsubTopic"]);t!==void 0&&h!=null&&l(t,["parameters","pubsubTopic"],h);const g=s(e,["negativePrompt"]);t!==void 0&&g!=null&&l(t,["parameters","negativePrompt"],g);const m=s(e,["enhancePrompt"]);t!==void 0&&m!=null&&l(t,["parameters","enhancePrompt"],m);const y=s(e,["generateAudio"]);return t!==void 0&&y!=null&&l(t,["parameters","generateAudio"],y),i}function Nh(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],K(n,i));const o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);const r=s(e,["image"]);r!=null&&l(t,["instances[0]","image"],Ti(n,r));const a=s(e,["config"]);return a!=null&&l(t,["config"],Ph(n,a,t)),t}function Dh(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function bh(n,e){const t={},i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Lh(n,e){const t={},i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Fh(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],Dh(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],bh(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],Lh(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Uh(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Fh(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function Vh(n,e){const t={},i=s(e,["citationSources"]);return i!=null&&l(t,["citations"],i),t}function $h(n,e){const t={},i=s(e,["retrievedUrl"]);i!=null&&l(t,["retrievedUrl"],i);const o=s(e,["urlRetrievalStatus"]);return o!=null&&l(t,["urlRetrievalStatus"],o),t}function Bh(n,e){const t={},i=s(e,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>$h(n,r))),l(t,["urlMetadata"],o)}return t}function qh(n,e){const t={},i=s(e,["content"]);i!=null&&l(t,["content"],Uh(n,i));const o=s(e,["citationMetadata"]);o!=null&&l(t,["citationMetadata"],Vh(n,o));const r=s(e,["tokenCount"]);r!=null&&l(t,["tokenCount"],r);const a=s(e,["finishReason"]);a!=null&&l(t,["finishReason"],a);const u=s(e,["urlContextMetadata"]);u!=null&&l(t,["urlContextMetadata"],Bh(n,u));const f=s(e,["avgLogprobs"]);f!=null&&l(t,["avgLogprobs"],f);const c=s(e,["groundingMetadata"]);c!=null&&l(t,["groundingMetadata"],c);const d=s(e,["index"]);d!=null&&l(t,["index"],d);const p=s(e,["logprobsResult"]);p!=null&&l(t,["logprobsResult"],p);const h=s(e,["safetyRatings"]);return h!=null&&l(t,["safetyRatings"],h),t}function Er(n,e){const t={},i=s(e,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>qh(n,f))),l(t,["candidates"],u)}const o=s(e,["modelVersion"]);o!=null&&l(t,["modelVersion"],o);const r=s(e,["promptFeedback"]);r!=null&&l(t,["promptFeedback"],r);const a=s(e,["usageMetadata"]);return a!=null&&l(t,["usageMetadata"],a),t}function Oh(n,e){const t={},i=s(e,["values"]);return i!=null&&l(t,["values"],i),t}function Gh(){return{}}function Hh(n,e){const t={},i=s(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Oh(n,a))),l(t,["embeddings"],r)}return s(e,["metadata"])!=null&&l(t,["metadata"],Gh()),t}function zh(n,e){const t={},i=s(e,["bytesBase64Encoded"]);i!=null&&l(t,["imageBytes"],$e(n,i));const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Ps(n,e){const t={},i=s(e,["safetyAttributes","categories"]);i!=null&&l(t,["categories"],i);const o=s(e,["safetyAttributes","scores"]);o!=null&&l(t,["scores"],o);const r=s(e,["contentType"]);return r!=null&&l(t,["contentType"],r),t}function Jh(n,e){const t={},i=s(e,["_self"]);i!=null&&l(t,["image"],zh(n,i));const o=s(e,["raiFilteredReason"]);o!=null&&l(t,["raiFilteredReason"],o);const r=s(e,["_self"]);return r!=null&&l(t,["safetyAttributes"],Ps(n,r)),t}function Wh(n,e){const t={},i=s(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Jh(n,a))),l(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&l(t,["positivePromptSafetyAttributes"],Ps(n,o)),t}function Zh(n,e){const t={},i=s(e,["baseModel"]);i!=null&&l(t,["baseModel"],i);const o=s(e,["createTime"]);o!=null&&l(t,["createTime"],o);const r=s(e,["updateTime"]);return r!=null&&l(t,["updateTime"],r),t}function ii(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["description"]);r!=null&&l(t,["description"],r);const a=s(e,["version"]);a!=null&&l(t,["version"],a);const u=s(e,["_self"]);u!=null&&l(t,["tunedModelInfo"],Zh(n,u));const f=s(e,["inputTokenLimit"]);f!=null&&l(t,["inputTokenLimit"],f);const c=s(e,["outputTokenLimit"]);c!=null&&l(t,["outputTokenLimit"],c);const d=s(e,["supportedGenerationMethods"]);return d!=null&&l(t,["supportedActions"],d),t}function Kh(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let r=xs(n,o);Array.isArray(r)&&(r=r.map(a=>ii(n,a))),l(t,["models"],r)}return t}function Yh(){return{}}function Xh(n,e){const t={},i=s(e,["totalTokens"]);i!=null&&l(t,["totalTokens"],i);const o=s(e,["cachedContentTokenCount"]);return o!=null&&l(t,["cachedContentTokenCount"],o),t}function Qh(n,e){const t={},i=s(e,["video","uri"]);i!=null&&l(t,["uri"],i);const o=s(e,["video","encodedVideo"]);o!=null&&l(t,["videoBytes"],$e(n,o));const r=s(e,["encoding"]);return r!=null&&l(t,["mimeType"],r),t}function jh(n,e){const t={},i=s(e,["_self"]);return i!=null&&l(t,["video"],Qh(n,i)),t}function em(n,e){const t={},i=s(e,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>jh(n,u))),l(t,["generatedVideos"],a)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&l(t,["raiMediaFilteredReasons"],r),t}function tm(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["metadata"]);o!=null&&l(t,["metadata"],o);const r=s(e,["done"]);r!=null&&l(t,["done"],r);const a=s(e,["error"]);a!=null&&l(t,["error"],a);const u=s(e,["response","generateVideoResponse"]);return u!=null&&l(t,["response"],em(n,u)),t}function nm(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function im(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["data"]);o!=null&&l(t,["data"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function om(n,e){const t={},i=s(e,["displayName"]);i!=null&&l(t,["displayName"],i);const o=s(e,["fileUri"]);o!=null&&l(t,["fileUri"],o);const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function rm(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],nm(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],im(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],om(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function sm(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>rm(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function lm(n,e){const t={},i=s(e,["citations"]);return i!=null&&l(t,["citations"],i),t}function am(n,e){const t={},i=s(e,["retrievedUrl"]);i!=null&&l(t,["retrievedUrl"],i);const o=s(e,["urlRetrievalStatus"]);return o!=null&&l(t,["urlRetrievalStatus"],o),t}function um(n,e){const t={},i=s(e,["urlMetadata"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>am(n,r))),l(t,["urlMetadata"],o)}return t}function cm(n,e){const t={},i=s(e,["content"]);i!=null&&l(t,["content"],sm(n,i));const o=s(e,["citationMetadata"]);o!=null&&l(t,["citationMetadata"],lm(n,o));const r=s(e,["finishMessage"]);r!=null&&l(t,["finishMessage"],r);const a=s(e,["finishReason"]);a!=null&&l(t,["finishReason"],a);const u=s(e,["urlContextMetadata"]);u!=null&&l(t,["urlContextMetadata"],um(n,u));const f=s(e,["avgLogprobs"]);f!=null&&l(t,["avgLogprobs"],f);const c=s(e,["groundingMetadata"]);c!=null&&l(t,["groundingMetadata"],c);const d=s(e,["index"]);d!=null&&l(t,["index"],d);const p=s(e,["logprobsResult"]);p!=null&&l(t,["logprobsResult"],p);const h=s(e,["safetyRatings"]);return h!=null&&l(t,["safetyRatings"],h),t}function Sr(n,e){const t={},i=s(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>cm(n,d))),l(t,["candidates"],c)}const o=s(e,["createTime"]);o!=null&&l(t,["createTime"],o);const r=s(e,["responseId"]);r!=null&&l(t,["responseId"],r);const a=s(e,["modelVersion"]);a!=null&&l(t,["modelVersion"],a);const u=s(e,["promptFeedback"]);u!=null&&l(t,["promptFeedback"],u);const f=s(e,["usageMetadata"]);return f!=null&&l(t,["usageMetadata"],f),t}function fm(n,e){const t={},i=s(e,["truncated"]);i!=null&&l(t,["truncated"],i);const o=s(e,["token_count"]);return o!=null&&l(t,["tokenCount"],o),t}function dm(n,e){const t={},i=s(e,["values"]);i!=null&&l(t,["values"],i);const o=s(e,["statistics"]);return o!=null&&l(t,["statistics"],fm(n,o)),t}function pm(n,e){const t={},i=s(e,["billableCharacterCount"]);return i!=null&&l(t,["billableCharacterCount"],i),t}function hm(n,e){const t={},i=s(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>dm(n,a))),l(t,["embeddings"],r)}const o=s(e,["metadata"]);return o!=null&&l(t,["metadata"],pm(n,o)),t}function mm(n,e){const t={},i=s(e,["gcsUri"]);i!=null&&l(t,["gcsUri"],i);const o=s(e,["bytesBase64Encoded"]);o!=null&&l(t,["imageBytes"],$e(n,o));const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function Ns(n,e){const t={},i=s(e,["safetyAttributes","categories"]);i!=null&&l(t,["categories"],i);const o=s(e,["safetyAttributes","scores"]);o!=null&&l(t,["scores"],o);const r=s(e,["contentType"]);return r!=null&&l(t,["contentType"],r),t}function vi(n,e){const t={},i=s(e,["_self"]);i!=null&&l(t,["image"],mm(n,i));const o=s(e,["raiFilteredReason"]);o!=null&&l(t,["raiFilteredReason"],o);const r=s(e,["_self"]);r!=null&&l(t,["safetyAttributes"],Ns(n,r));const a=s(e,["prompt"]);return a!=null&&l(t,["enhancedPrompt"],a),t}function gm(n,e){const t={},i=s(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>vi(n,a))),l(t,["generatedImages"],r)}const o=s(e,["positivePromptSafetyAttributes"]);return o!=null&&l(t,["positivePromptSafetyAttributes"],Ns(n,o)),t}function ym(n,e){const t={},i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>vi(n,r))),l(t,["generatedImages"],o)}return t}function Tm(n,e){const t={},i=s(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>vi(n,r))),l(t,["generatedImages"],o)}return t}function vm(n,e){const t={},i=s(e,["endpoint"]);i!=null&&l(t,["name"],i);const o=s(e,["deployedModelId"]);return o!=null&&l(t,["deployedModelId"],o),t}function Cm(n,e){const t={},i=s(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&l(t,["baseModel"],i);const o=s(e,["createTime"]);o!=null&&l(t,["createTime"],o);const r=s(e,["updateTime"]);return r!=null&&l(t,["updateTime"],r),t}function _m(n,e){const t={},i=s(e,["checkpointId"]);i!=null&&l(t,["checkpointId"],i);const o=s(e,["epoch"]);o!=null&&l(t,["epoch"],o);const r=s(e,["step"]);return r!=null&&l(t,["step"],r),t}function oi(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["displayName"]);o!=null&&l(t,["displayName"],o);const r=s(e,["description"]);r!=null&&l(t,["description"],r);const a=s(e,["versionId"]);a!=null&&l(t,["version"],a);const u=s(e,["deployedModels"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(g=>vm(n,g))),l(t,["endpoints"],h)}const f=s(e,["labels"]);f!=null&&l(t,["labels"],f);const c=s(e,["_self"]);c!=null&&l(t,["tunedModelInfo"],Cm(n,c));const d=s(e,["defaultCheckpointId"]);d!=null&&l(t,["defaultCheckpointId"],d);const p=s(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>_m(n,g))),l(t,["checkpoints"],h)}return t}function xm(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let r=xs(n,o);Array.isArray(r)&&(r=r.map(a=>oi(n,a))),l(t,["models"],r)}return t}function Em(){return{}}function Sm(n,e){const t={},i=s(e,["totalTokens"]);return i!=null&&l(t,["totalTokens"],i),t}function Am(n,e){const t={},i=s(e,["tokensInfo"]);return i!=null&&l(t,["tokensInfo"],i),t}function wm(n,e){const t={},i=s(e,["gcsUri"]);i!=null&&l(t,["uri"],i);const o=s(e,["bytesBase64Encoded"]);o!=null&&l(t,["videoBytes"],$e(n,o));const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function km(n,e){const t={},i=s(e,["_self"]);return i!=null&&l(t,["video"],wm(n,i)),t}function Im(n,e){const t={},i=s(e,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>km(n,u))),l(t,["generatedVideos"],a)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&l(t,["raiMediaFilteredReasons"],r),t}function Rm(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["metadata"]);o!=null&&l(t,["metadata"],o);const r=s(e,["done"]);r!=null&&l(t,["done"],r);const a=s(e,["error"]);a!=null&&l(t,["error"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],Im(n,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mm="Content-Type",Pm="X-Server-Timeout",Nm="User-Agent",ri="x-goog-api-client",Dm="1.4.0",bm=`google-genai-sdk/${Dm}`,Lm="v1beta1",Fm="v1beta",Ar=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ds extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class si extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class Um{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Lm,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Fm,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))o.searchParams.append(a,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,r]of Object.entries(t))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(o,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const o=new AbortController,r=o.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>o.abort(),t.timeout),i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=r}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await wr(o),new jn(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await wr(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return lt(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield Y(o.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(f);try{const p=JSON.parse(c);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),g=h.status,m=h.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(m>=400&&m<500)throw new Ds(y);if(m>=500&&m<600)throw new si(y)}}catch(p){const h=p;if(h.name==="ClientError"||h.name==="ServerError")throw p}a+=c;let d=a.match(Ar);for(;d;){const p=d[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Y(new jn(h)),a=a.slice(d[0].length),d=a.match(Ar)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=bm+" "+this.clientOptions.userAgentExtra;return e[Nm]=t,e[ri]=t,e[Mm]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))t.append(i,o);e.timeout&&e.timeout>0&&t.append(Pm,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const r=this.clientOptions.uploader,a=await r.stat(e);o.sizeBytes=String(a.size);const u=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const f=await this.fetchUploadUrl(o,t);return r.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},a=await this.request({path:b("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:o});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function wr(n){var e;if(n===void 0)throw new si("response is undefined");if(!n.ok){const t=n.status,i=n.statusText;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=`got status: ${t} ${i}. ${JSON.stringify(o)}`;throw t>=400&&t<500?new Ds(r):t>=500&&t<600?new si(r):new Error(r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vm="mcp_used/unknown";function bs(n){for(const e of n)if(Ci(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Ls(n){var e;const t=(e=n[ri])!==null&&e!==void 0?e:"";n[ri]=(t+` ${Vm}`).trimStart()}function $m(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ci(o)))!==null&&i!==void 0?i:!1}function Bm(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Ci(o)))!==null&&i!==void 0?i:!1}function Ci(n){return n!==null&&typeof n=="object"&&n instanceof _i}function qm(n,e=100){return lt(this,arguments,function*(){let i,o=0;for(;o<e;){const r=yield Y(n.listTools({cursor:i}));for(const a of r.tools)yield yield Y(a),o++;if(!r.nextCursor)break;i=r.nextCursor}})}class _i{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new _i(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const r={},a=[];for(const d of this.mcpClients)try{for(var u=!0,f=(t=void 0,It(qm(d))),c;c=await f.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const p=o;a.push(p);const h=p.name;if(r[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);r[h]=d}}catch(p){t={error:p}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),Ou(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=await this.functionNameToMcpClient[i.name].callTool({name:i.name,arguments:i.args});t.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Om(n,e,t){const i=new Ru;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data);const r=Qd(n,o);Object.assign(i,r),e(i)}class Gm{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=Jm(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const d=new Promise(x=>{c=x}),p=e.callbacks,h=function(){c({})},g=this.apiClient,m={onopen:h,onmessage:x=>{Om(g,p.onmessage,x)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(x){}},y=this.webSocketFactory.create(f,zm(a),m);y.connect(),await d;const T=K(this.apiClient,e.model),v=ks(this.apiClient,{model:T}),_=ni(this.apiClient,{setup:v});return y.send(JSON.stringify(_)),new Hm(y,this.apiClient)}}class Hm{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=dd(this.apiClient,e),i=Is(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=pd(this.apiClient,e),i=ni(this.apiClient,t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=ni(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(rt.PLAY)}pause(){this.sendPlaybackControl(rt.PAUSE)}stop(){this.sendPlaybackControl(rt.STOP)}resetContext(){this.sendPlaybackControl(rt.RESET_CONTEXT)}close(){this.conn.close()}}function zm(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Jm(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wm="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Zm(n,e,t){const i=new Iu;let o;if(t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),n.isVertexAI()){const r=Gd(n,o);Object.assign(i,r)}else{const r=Od(n,o);Object.assign(i,r)}e(i)}class Km{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Gm(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,r,a,u;const f=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&bs(e.config.tools)&&Ls(p);const h=jm(p);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h);else{const M=this.apiClient.getApiKey();let L="BidiGenerateContent",B="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),L="BidiGenerateContentConstrained",B="access_token"),d=`${f}/ws/google.ai.generativelanguage.${c}.GenerativeService.${L}?${B}=${M}`}let g=()=>{};const m=new Promise(M=>{g=M}),y=e.callbacks,T=function(){var M;(M=y==null?void 0:y.onopen)===null||M===void 0||M.call(y),g({})},v=this.apiClient,_={onopen:T,onmessage:M=>{Zm(v,y.onmessage,M)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(M){}},x=this.webSocketFactory.create(d,Qm(h),_);x.connect(),await m;let w=K(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const M=this.apiClient.getProject(),L=this.apiClient.getLocation();w=`projects/${M}/locations/${L}/`+w}let S={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[an.AUDIO]}:e.config.responseModalities=[an.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],k=[];for(const M of E)if(this.isCallableTool(M)){const L=M;k.push(await L.tool())}else k.push(M);k.length>0&&(e.config.tools=k);const D={model:w,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=rd(this.apiClient,D):S=od(this.apiClient,D),delete S.config,x.send(JSON.stringify(S)),new Xm(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Ym={turnComplete:!0};class Xm{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Te(e,t.turns),e.isVertexAI()?i=i.map(o=>yt(e,o)):i=i.map(o=>En(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(Wm)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Ym),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:fd(this.apiClient,e)}:t={realtimeInput:cd(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Qm(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function jm(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kr=10;function Ir(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const a of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Xt(a)){o=!0;break}if(!o)return!0;const r=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Xt(n){return"callTool"in n&&typeof n.callTool=="function"}function Rr(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eg extends gt{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,r,a,u;const f=await this.processParamsForMcpUsage(t);if(!$m(t)||Ir(t.config))return await this.generateContentInternal(f);if(Bm(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const p=Te(this.apiClient,f.contents),h=(r=(o=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:kr;let g=0;for(;g<h&&(c=await this.generateContentInternal(f),!(!c.functionCalls||c.functionCalls.length===0));){const m=c.candidates[0].content,y=[];for(const T of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Xt(T)){const _=await T.callTool(c.functionCalls);y.push(..._)}g++,d={role:"user",parts:y},f.contents=Te(this.apiClient,f.contents),f.contents.push(m),f.contents.push(d),Rr(f.config)&&(p.push(m),p.push(d))}return Rr(f.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(Ir(t.config)){const i=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let r;const a=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((o=f==null?void 0:f.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=f==null?void 0:f.safetyAttributes:a.push(f);let u;return r?u={generatedImages:a,positivePromptSafetyAttributes:r}:u={generatedImages:a},u}),this.list=async t=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new xn(pt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var t,i,o;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const a=await Promise.all(r.map(async f=>Xt(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&bs(e.config.tools)){const f=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},f);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Ls(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,i,o;const r=new Map;for(const a of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Xt(a)){const u=a,f=await u.tool();for(const c of(o=f.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,u)}}return r}async processAfcStream(e){var t,i,o;const r=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:kr;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return function(c,d,p){var h,g;return lt(this,arguments,function*(){for(var m,y,T,v;u<r;){a&&(u++,a=!1);const S=yield Y(c.processParamsForMcpUsage(p)),E=yield Y(c.generateContentStreamInternal(S)),k=[],D=[];try{for(var _=!0,x=(y=void 0,It(E)),w;w=yield Y(x.next()),m=w.done,!m;_=!0){v=w.value,_=!1;const M=v;if(yield yield Y(M),M.candidates&&(!((h=M.candidates[0])===null||h===void 0)&&h.content)){D.push(M.candidates[0].content);for(const L of(g=M.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<r&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(L.functionCall.name)){const B=yield Y(d.get(L.functionCall.name).callTool([L.functionCall]));k.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(M){y={error:M}}finally{try{!_&&!m&&(T=x.return)&&(yield Y(T.call(x)))}finally{if(y)throw y.error}}if(k.length>0){a=!0;const M=new xt;M.candidates=[{content:{role:"user",parts:k}}],yield yield Y(M);const L=[];L.push(...D),L.push({role:"user",parts:k});const B=Te(c.apiClient,p.contents).concat(L);p.contents=B}else break}})}(this,f,e)}async generateContentInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=xr(this.apiClient,e);return u=b("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Sr(this.apiClient,d),h=new xt;return Object.assign(h,p),h})}else{const c=_r(this.apiClient,e);return u=b("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Er(this.apiClient,d),h=new xt;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=xr(this.apiClient,e);u=b("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query;const d=this.apiClient;return a=d.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return lt(this,arguments,function*(){var h,g,m,y;try{for(var T=!0,v=It(p),_;_=yield Y(v.next()),h=_.done,!h;T=!0){y=_.value,T=!1;const w=Sr(d,yield Y(y.json())),S=new xt;Object.assign(S,w),yield yield Y(S)}}catch(x){g={error:x}}finally{try{!T&&!h&&(m=v.return)&&(yield Y(m.call(v)))}finally{if(g)throw g.error}}})})}else{const c=_r(this.apiClient,e);u=b("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query;const d=this.apiClient;return a=d.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(p){return lt(this,arguments,function*(){var h,g,m,y;try{for(var T=!0,v=It(p),_;_=yield Y(v.next()),h=_.done,!h;T=!0){y=_.value,T=!1;const w=Er(d,yield Y(y.json())),S=new xt;Object.assign(S,w),yield yield Y(S)}}catch(x){g={error:x}}finally{try{!T&&!h&&(m=v.return)&&(yield Y(m.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ch(this.apiClient,e);return u=b("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=hm(this.apiClient,d),h=new tr;return Object.assign(h,p),h})}else{const c=Ep(this.apiClient,e);return u=b("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Hh(this.apiClient,d),h=new tr;return Object.assign(h,p),h})}}async generateImagesInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=dh(this.apiClient,e);return u=b("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=gm(this.apiClient,d),h=new nr;return Object.assign(h,p),h})}else{const c=Ap(this.apiClient,e);return u=b("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Wh(this.apiClient,d),h=new nr;return Object.assign(h,p),h})}}async editImageInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){const u=vh(this.apiClient,e);return r=b("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=ym(this.apiClient,f),d=new xu;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){const u=_h(this.apiClient,e);return r=b("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Tm(this.apiClient,f),d=new Eu;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=xh(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>oi(this.apiClient,d))}else{const c=wp(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>ii(this.apiClient,d))}}async listInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Sh(this.apiClient,e);return u=b("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=xm(this.apiClient,d),h=new ir;return Object.assign(h,p),h})}else{const c=Ip(this.apiClient,e);return u=b("{models_url}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Kh(this.apiClient,d),h=new ir;return Object.assign(h,p),h})}}async update(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=wh(this.apiClient,e);return u=b("{model}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>oi(this.apiClient,d))}else{const c=Mp(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>ii(this.apiClient,d))}}async delete(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=kh(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Em(),p=new or;return Object.assign(p,d),p})}else{const c=Pp(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Yh(),p=new or;return Object.assign(p,d),p})}}async countTokens(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Rh(this.apiClient,e);return u=b("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Sm(this.apiClient,d),h=new rr;return Object.assign(h,p),h})}else{const c=Dp(this.apiClient,e);return u=b("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Xh(this.apiClient,d),h=new rr;return Object.assign(h,p),h})}}async computeTokens(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){const u=Mh(this.apiClient,e);return r=b("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const c=Am(this.apiClient,f),d=new Su;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Nh(this.apiClient,e);return u=b("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Rm(this.apiClient,d))}else{const c=Fp(this.apiClient,e);return u=b("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>tm(this.apiClient,d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tg(n,e){const t={},i=s(e,["operationName"]);i!=null&&l(t,["_url","operationName"],i);const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function ng(n,e){const t={},i=s(e,["operationName"]);i!=null&&l(t,["_url","operationName"],i);const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function ig(n,e){const t={},i=s(e,["operationName"]);i!=null&&l(t,["operationName"],i);const o=s(e,["resourceName"]);o!=null&&l(t,["_url","resourceName"],o);const r=s(e,["config"]);return r!=null&&l(t,["config"],r),t}function og(n,e){const t={},i=s(e,["video","uri"]);i!=null&&l(t,["uri"],i);const o=s(e,["video","encodedVideo"]);o!=null&&l(t,["videoBytes"],$e(n,o));const r=s(e,["encoding"]);return r!=null&&l(t,["mimeType"],r),t}function rg(n,e){const t={},i=s(e,["_self"]);return i!=null&&l(t,["video"],og(n,i)),t}function sg(n,e){const t={},i=s(e,["generatedSamples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>rg(n,u))),l(t,["generatedVideos"],a)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&l(t,["raiMediaFilteredReasons"],r),t}function lg(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["metadata"]);o!=null&&l(t,["metadata"],o);const r=s(e,["done"]);r!=null&&l(t,["done"],r);const a=s(e,["error"]);a!=null&&l(t,["error"],a);const u=s(e,["response","generateVideoResponse"]);return u!=null&&l(t,["response"],sg(n,u)),t}function ag(n,e){const t={},i=s(e,["gcsUri"]);i!=null&&l(t,["uri"],i);const o=s(e,["bytesBase64Encoded"]);o!=null&&l(t,["videoBytes"],$e(n,o));const r=s(e,["mimeType"]);return r!=null&&l(t,["mimeType"],r),t}function ug(n,e){const t={},i=s(e,["_self"]);return i!=null&&l(t,["video"],ag(n,i)),t}function cg(n,e){const t={},i=s(e,["videos"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ug(n,u))),l(t,["generatedVideos"],a)}const o=s(e,["raiMediaFilteredCount"]);o!=null&&l(t,["raiMediaFilteredCount"],o);const r=s(e,["raiMediaFilteredReasons"]);return r!=null&&l(t,["raiMediaFilteredReasons"],r),t}function Mr(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["metadata"]);o!=null&&l(t,["metadata"],o);const r=s(e,["done"]);r!=null&&l(t,["done"],r);const a=s(e,["error"]);a!=null&&l(t,["error"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],cg(n,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fg extends gt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let r;return i&&"httpOptions"in i&&(r=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=ng(this.apiClient,e);return u=b("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Mr(this.apiClient,d))}else{const c=tg(this.apiClient,e);return u=b("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>lg(this.apiClient,d))}}async fetchPredictVideosOperationInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){const u=ig(this.apiClient,e);return r=b("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Mr(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dg(n,e){const t={},i=s(e,["voiceName"]);return i!=null&&l(t,["voiceName"],i),t}function Fs(n,e){const t={},i=s(e,["prebuiltVoiceConfig"]);return i!=null&&l(t,["prebuiltVoiceConfig"],dg(n,i)),t}function pg(n,e){const t={},i=s(e,["speaker"]);i!=null&&l(t,["speaker"],i);const o=s(e,["voiceConfig"]);return o!=null&&l(t,["voiceConfig"],Fs(n,o)),t}function hg(n,e){const t={},i=s(e,["speakerVoiceConfigs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>pg(n,r))),l(t,["speakerVoiceConfigs"],o)}return t}function mg(n,e){const t={},i=s(e,["voiceConfig"]);i!=null&&l(t,["voiceConfig"],Fs(n,i));const o=s(e,["multiSpeakerVoiceConfig"]);o!=null&&l(t,["multiSpeakerVoiceConfig"],hg(n,o));const r=s(e,["languageCode"]);return r!=null&&l(t,["languageCode"],r),t}function gg(n,e){const t={},i=s(e,["fps"]);i!=null&&l(t,["fps"],i);const o=s(e,["endOffset"]);o!=null&&l(t,["endOffset"],o);const r=s(e,["startOffset"]);return r!=null&&l(t,["startOffset"],r),t}function yg(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["data"]);i!=null&&l(t,["data"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function Tg(n,e){const t={};if(s(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=s(e,["fileUri"]);i!=null&&l(t,["fileUri"],i);const o=s(e,["mimeType"]);return o!=null&&l(t,["mimeType"],o),t}function vg(n,e){const t={},i=s(e,["videoMetadata"]);i!=null&&l(t,["videoMetadata"],gg(n,i));const o=s(e,["thought"]);o!=null&&l(t,["thought"],o);const r=s(e,["inlineData"]);r!=null&&l(t,["inlineData"],yg(n,r));const a=s(e,["fileData"]);a!=null&&l(t,["fileData"],Tg(n,a));const u=s(e,["thoughtSignature"]);u!=null&&l(t,["thoughtSignature"],u);const f=s(e,["codeExecutionResult"]);f!=null&&l(t,["codeExecutionResult"],f);const c=s(e,["executableCode"]);c!=null&&l(t,["executableCode"],c);const d=s(e,["functionCall"]);d!=null&&l(t,["functionCall"],d);const p=s(e,["functionResponse"]);p!=null&&l(t,["functionResponse"],p);const h=s(e,["text"]);return h!=null&&l(t,["text"],h),t}function Cg(n,e){const t={},i=s(e,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>vg(n,a))),l(t,["parts"],r)}const o=s(e,["role"]);return o!=null&&l(t,["role"],o),t}function _g(n,e){const t={},i=s(e,["behavior"]);i!=null&&l(t,["behavior"],i);const o=s(e,["description"]);o!=null&&l(t,["description"],o);const r=s(e,["name"]);r!=null&&l(t,["name"],r);const a=s(e,["parameters"]);a!=null&&l(t,["parameters"],a);const u=s(e,["response"]);return u!=null&&l(t,["response"],u),t}function xg(n,e){const t={},i=s(e,["startTime"]);i!=null&&l(t,["startTime"],i);const o=s(e,["endTime"]);return o!=null&&l(t,["endTime"],o),t}function Eg(n,e){const t={},i=s(e,["timeRangeFilter"]);return i!=null&&l(t,["timeRangeFilter"],xg(n,i)),t}function Sg(n,e){const t={},i=s(e,["mode"]);i!=null&&l(t,["mode"],i);const o=s(e,["dynamicThreshold"]);return o!=null&&l(t,["dynamicThreshold"],o),t}function Ag(n,e){const t={},i=s(e,["dynamicRetrievalConfig"]);return i!=null&&l(t,["dynamicRetrievalConfig"],Sg(n,i)),t}function wg(){return{}}function kg(n,e){const t={},i=s(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(c=>_g(n,c))),l(t,["functionDeclarations"],f)}if(s(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=s(e,["googleSearch"]);o!=null&&l(t,["googleSearch"],Eg(n,o));const r=s(e,["googleSearchRetrieval"]);if(r!=null&&l(t,["googleSearchRetrieval"],Ag(n,r)),s(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(e,["urlContext"])!=null&&l(t,["urlContext"],wg());const u=s(e,["codeExecution"]);return u!=null&&l(t,["codeExecution"],u),t}function Ig(n,e){const t={},i=s(e,["handle"]);if(i!=null&&l(t,["handle"],i),s(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Pr(){return{}}function Rg(n,e){const t={},i=s(e,["disabled"]);i!=null&&l(t,["disabled"],i);const o=s(e,["startOfSpeechSensitivity"]);o!=null&&l(t,["startOfSpeechSensitivity"],o);const r=s(e,["endOfSpeechSensitivity"]);r!=null&&l(t,["endOfSpeechSensitivity"],r);const a=s(e,["prefixPaddingMs"]);a!=null&&l(t,["prefixPaddingMs"],a);const u=s(e,["silenceDurationMs"]);return u!=null&&l(t,["silenceDurationMs"],u),t}function Mg(n,e){const t={},i=s(e,["automaticActivityDetection"]);i!=null&&l(t,["automaticActivityDetection"],Rg(n,i));const o=s(e,["activityHandling"]);o!=null&&l(t,["activityHandling"],o);const r=s(e,["turnCoverage"]);return r!=null&&l(t,["turnCoverage"],r),t}function Pg(n,e){const t={},i=s(e,["targetTokens"]);return i!=null&&l(t,["targetTokens"],i),t}function Ng(n,e){const t={},i=s(e,["triggerTokens"]);i!=null&&l(t,["triggerTokens"],i);const o=s(e,["slidingWindow"]);return o!=null&&l(t,["slidingWindow"],Pg(n,o)),t}function Dg(n,e){const t={},i=s(e,["proactiveAudio"]);return i!=null&&l(t,["proactiveAudio"],i),t}function bg(n,e,t){const i={},o=s(e,["generationConfig"]);t!==void 0&&o!=null&&l(t,["setup","generationConfig"],o);const r=s(e,["responseModalities"]);t!==void 0&&r!=null&&l(t,["setup","generationConfig","responseModalities"],r);const a=s(e,["temperature"]);t!==void 0&&a!=null&&l(t,["setup","generationConfig","temperature"],a);const u=s(e,["topP"]);t!==void 0&&u!=null&&l(t,["setup","generationConfig","topP"],u);const f=s(e,["topK"]);t!==void 0&&f!=null&&l(t,["setup","generationConfig","topK"],f);const c=s(e,["maxOutputTokens"]);t!==void 0&&c!=null&&l(t,["setup","generationConfig","maxOutputTokens"],c);const d=s(e,["mediaResolution"]);t!==void 0&&d!=null&&l(t,["setup","generationConfig","mediaResolution"],d);const p=s(e,["seed"]);t!==void 0&&p!=null&&l(t,["setup","generationConfig","seed"],p);const h=s(e,["speechConfig"]);t!==void 0&&h!=null&&l(t,["setup","generationConfig","speechConfig"],mg(n,yi(n,h)));const g=s(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&l(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=s(e,["systemInstruction"]);t!==void 0&&m!=null&&l(t,["setup","systemInstruction"],Cg(n,re(n,m)));const y=s(e,["tools"]);if(t!==void 0&&y!=null){let E=$t(n,y);Array.isArray(E)&&(E=E.map(k=>kg(n,Vt(n,k)))),l(t,["setup","tools"],E)}const T=s(e,["sessionResumption"]);t!==void 0&&T!=null&&l(t,["setup","sessionResumption"],Ig(n,T));const v=s(e,["inputAudioTranscription"]);t!==void 0&&v!=null&&l(t,["setup","inputAudioTranscription"],Pr());const _=s(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&l(t,["setup","outputAudioTranscription"],Pr());const x=s(e,["realtimeInputConfig"]);t!==void 0&&x!=null&&l(t,["setup","realtimeInputConfig"],Mg(n,x));const w=s(e,["contextWindowCompression"]);t!==void 0&&w!=null&&l(t,["setup","contextWindowCompression"],Ng(n,w));const S=s(e,["proactivity"]);return t!==void 0&&S!=null&&l(t,["setup","proactivity"],Dg(n,S)),i}function Lg(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],K(n,i));const o=s(e,["config"]);return o!=null&&l(t,["config"],bg(n,o,t)),t}function Fg(n,e,t){const i={},o=s(e,["expireTime"]);t!==void 0&&o!=null&&l(t,["expireTime"],o);const r=s(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&l(t,["newSessionExpireTime"],r);const a=s(e,["uses"]);t!==void 0&&a!=null&&l(t,["uses"],a);const u=s(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&l(t,["bidiGenerateContentSetup"],Lg(n,u));const f=s(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&l(t,["fieldMask"],f),i}function Ug(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],Fg(n,i,t)),t}function Vg(n,e){const t={},i=s(e,["name"]);return i!=null&&l(t,["name"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $g(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(r=>`${t}.${r}`);e.push(...o)}else e.push(t)}return e.join(",")}function Bg(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const r=$g(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?n.fieldMask=r:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>a.includes(c)?`generationConfig.${c}`:c));const f=[];r&&f.push(r),u.length>0&&f.push(...u),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class qg extends gt{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Ug(this.apiClient,e);r=b("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=Bg(u,e.config);return o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>Vg(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Og(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],i);const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Gg(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);const a=s(e,["filter"]);return t!==void 0&&a!=null&&l(t,["_query","filter"],a),i}function Hg(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],Gg(n,i,t)),t}function zg(n,e){const t={},i=s(e,["textInput"]);i!=null&&l(t,["textInput"],i);const o=s(e,["output"]);return o!=null&&l(t,["output"],o),t}function Jg(n,e){const t={};if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=s(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>zg(n,r))),l(t,["examples","examples"],o)}return t}function Wg(n,e,t){const i={};if(s(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=s(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&l(t,["displayName"],o),s(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=s(e,["epochCount"]);t!==void 0&&r!=null&&l(t,["tuningTask","hyperparameters","epochCount"],r);const a=s(e,["learningRateMultiplier"]);if(a!=null&&l(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),s(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=s(e,["batchSize"]);t!==void 0&&u!=null&&l(t,["tuningTask","hyperparameters","batchSize"],u);const f=s(e,["learningRate"]);return t!==void 0&&f!=null&&l(t,["tuningTask","hyperparameters","learningRate"],f),i}function Zg(n,e){const t={},i=s(e,["baseModel"]);i!=null&&l(t,["baseModel"],i);const o=s(e,["trainingDataset"]);o!=null&&l(t,["tuningTask","trainingData"],Jg(n,o));const r=s(e,["config"]);return r!=null&&l(t,["config"],Wg(n,r,t)),t}function Kg(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],i);const o=s(e,["config"]);return o!=null&&l(t,["config"],o),t}function Yg(n,e,t){const i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);const r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);const a=s(e,["filter"]);return t!==void 0&&a!=null&&l(t,["_query","filter"],a),i}function Xg(n,e){const t={},i=s(e,["config"]);return i!=null&&l(t,["config"],Yg(n,i,t)),t}function Qg(n,e,t){const i={},o=s(e,["gcsUri"]);if(t!==void 0&&o!=null&&l(t,["supervisedTuningSpec","trainingDatasetUri"],o),s(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function jg(n,e){const t={},i=s(e,["gcsUri"]);return i!=null&&l(t,["validationDatasetUri"],i),t}function ey(n,e,t){const i={},o=s(e,["validationDataset"]);t!==void 0&&o!=null&&l(t,["supervisedTuningSpec"],jg(n,o));const r=s(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&l(t,["tunedModelDisplayName"],r);const a=s(e,["description"]);t!==void 0&&a!=null&&l(t,["description"],a);const u=s(e,["epochCount"]);t!==void 0&&u!=null&&l(t,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=s(e,["learningRateMultiplier"]);t!==void 0&&f!=null&&l(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const c=s(e,["exportLastCheckpointOnly"]);t!==void 0&&c!=null&&l(t,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=s(e,["adapterSize"]);if(t!==void 0&&d!=null&&l(t,["supervisedTuningSpec","hyperParameters","adapterSize"],d),s(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function ty(n,e){const t={},i=s(e,["baseModel"]);i!=null&&l(t,["baseModel"],i);const o=s(e,["trainingDataset"]);o!=null&&l(t,["supervisedTuningSpec","trainingDatasetUri"],Qg(n,o,t));const r=s(e,["config"]);return r!=null&&l(t,["config"],ey(n,r,t)),t}function ny(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["model"],i);const o=s(e,["name"]);return o!=null&&l(t,["endpoint"],o),t}function Us(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["state"]);o!=null&&l(t,["state"],vs(n,o));const r=s(e,["createTime"]);r!=null&&l(t,["createTime"],r);const a=s(e,["tuningTask","startTime"]);a!=null&&l(t,["startTime"],a);const u=s(e,["tuningTask","completeTime"]);u!=null&&l(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&l(t,["updateTime"],f);const c=s(e,["description"]);c!=null&&l(t,["description"],c);const d=s(e,["baseModel"]);d!=null&&l(t,["baseModel"],d);const p=s(e,["_self"]);p!=null&&l(t,["tunedModel"],ny(n,p));const h=s(e,["distillationSpec"]);h!=null&&l(t,["distillationSpec"],h);const g=s(e,["experiment"]);g!=null&&l(t,["experiment"],g);const m=s(e,["labels"]);m!=null&&l(t,["labels"],m);const y=s(e,["pipelineJob"]);y!=null&&l(t,["pipelineJob"],y);const T=s(e,["serviceAccount"]);T!=null&&l(t,["serviceAccount"],T);const v=s(e,["tunedModelDisplayName"]);return v!=null&&l(t,["tunedModelDisplayName"],v),t}function iy(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["tunedModels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Us(n,a))),l(t,["tuningJobs"],r)}return t}function oy(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["metadata"]);o!=null&&l(t,["metadata"],o);const r=s(e,["done"]);r!=null&&l(t,["done"],r);const a=s(e,["error"]);return a!=null&&l(t,["error"],a),t}function ry(n,e){const t={},i=s(e,["checkpointId"]);i!=null&&l(t,["checkpointId"],i);const o=s(e,["epoch"]);o!=null&&l(t,["epoch"],o);const r=s(e,["step"]);r!=null&&l(t,["step"],r);const a=s(e,["endpoint"]);return a!=null&&l(t,["endpoint"],a),t}function sy(n,e){const t={},i=s(e,["model"]);i!=null&&l(t,["model"],i);const o=s(e,["endpoint"]);o!=null&&l(t,["endpoint"],o);const r=s(e,["checkpoints"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>ry(n,u))),l(t,["checkpoints"],a)}return t}function li(n,e){const t={},i=s(e,["name"]);i!=null&&l(t,["name"],i);const o=s(e,["state"]);o!=null&&l(t,["state"],vs(n,o));const r=s(e,["createTime"]);r!=null&&l(t,["createTime"],r);const a=s(e,["startTime"]);a!=null&&l(t,["startTime"],a);const u=s(e,["endTime"]);u!=null&&l(t,["endTime"],u);const f=s(e,["updateTime"]);f!=null&&l(t,["updateTime"],f);const c=s(e,["error"]);c!=null&&l(t,["error"],c);const d=s(e,["description"]);d!=null&&l(t,["description"],d);const p=s(e,["baseModel"]);p!=null&&l(t,["baseModel"],p);const h=s(e,["tunedModel"]);h!=null&&l(t,["tunedModel"],sy(n,h));const g=s(e,["supervisedTuningSpec"]);g!=null&&l(t,["supervisedTuningSpec"],g);const m=s(e,["tuningDataStats"]);m!=null&&l(t,["tuningDataStats"],m);const y=s(e,["encryptionSpec"]);y!=null&&l(t,["encryptionSpec"],y);const T=s(e,["partnerModelTuningSpec"]);T!=null&&l(t,["partnerModelTuningSpec"],T);const v=s(e,["distillationSpec"]);v!=null&&l(t,["distillationSpec"],v);const _=s(e,["experiment"]);_!=null&&l(t,["experiment"],_);const x=s(e,["labels"]);x!=null&&l(t,["labels"],x);const w=s(e,["pipelineJob"]);w!=null&&l(t,["pipelineJob"],w);const S=s(e,["serviceAccount"]);S!=null&&l(t,["serviceAccount"],S);const E=s(e,["tunedModelDisplayName"]);return E!=null&&l(t,["tunedModelDisplayName"],E),t}function ly(n,e){const t={},i=s(e,["nextPageToken"]);i!=null&&l(t,["nextPageToken"],i);const o=s(e,["tuningJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>li(n,a))),l(t,["tuningJobs"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ay extends gt{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new xn(pt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Qn.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Kg(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>li(this.apiClient,d))}else{const c=Og(this.apiClient,e);return u=b("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>Us(this.apiClient,d))}}async listInternal(e){var t,i,o,r;let a,u="",f={};if(this.apiClient.isVertexAI()){const c=Xg(this.apiClient,e);return u=b("tuningJobs",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=ly(this.apiClient,d),h=new sr;return Object.assign(h,p),h})}else{const c=Hg(this.apiClient,e);return u=b("tunedModels",c._url),f=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),a.then(d=>{const p=iy(this.apiClient,d),h=new sr;return Object.assign(h,p),h})}}async tuneInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){const u=ty(this.apiClient,e);return r=b("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>li(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zg(this.apiClient,e);return r=b("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>oy(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uy{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cy=1024*1024*8,fy=3,dy=1e3,py=2,Un="x-goog-upload-status";async function hy(n,e,t){var i,o,r;let a=0,u=0,f=new jn(new Response),c="upload";for(a=n.size;u<a;){const p=Math.min(cy,a-u),h=n.slice(u,u+p);u+p>=a&&(c+=", finalize");let g=0,m=dy;for(;g<fy&&(f=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Un]));)g++,await gy(m),m=m*py;if(u+=p,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Un])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(f==null?void 0:f.json());if(((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[Un])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function my(n){return{size:n.size,type:n.type}}function gy(n){return new Promise(e=>setTimeout(e,n))}class yy{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hy(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await my(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ty{create(e,t,i){return new vy(e,t,i)}}class vy{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nr="x-goog-api-key";class Cy{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Nr)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Nr,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _y="gl-node/";class xy{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=_u(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new Cy(this.apiKey);this.apiClient=new Um({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:_y+"web",uploader:new yy,downloader:new uy}),this.models=new eg(this.apiClient),this.live=new Km(this.apiClient,o,new Ty),this.chats=new Zc(this.models,this.apiClient),this.caches=new zc(this.apiClient),this.files=new af(this.apiClient),this.operations=new fg(this.apiClient),this.authTokens=new qg(this.apiClient),this.tunings=new ay(this.apiClient)}}function xi(n){return typeof n=="number"}function ai(n){return typeof n=="string"}function Sn(n){return typeof n=="boolean"}function Dr(n){return Object.prototype.toString.call(n)==="[object Object]"}function Q(n){return Math.abs(n)}function Ei(n){return Math.sign(n)}function Rt(n,e){return Q(n-e)}function Ey(n,e){if(n===0||e===0||Q(n)<=Q(e))return 0;let t=Rt(Q(n),Q(e));return Q(t/n)}function Sy(n){return Math.round(n*100)/100}function Dt(n){return bt(n).map(Number)}function ve(n){return n[Bt(n)]}function Bt(n){return Math.max(0,n.length-1)}function Si(n,e){return e===Bt(n)}function br(n,e=0){return Array.from(Array(n),(t,i)=>e+i)}function bt(n){return Object.keys(n)}function Vs(n,e){return[n,e].reduce((t,i)=>(bt(i).forEach(o=>{let r=t[o],a=i[o],u=Dr(r)&&Dr(a);t[o]=u?Vs(r,a):a}),t),{})}function ui(n,e){return typeof e.MouseEvent<"u"&&n instanceof e.MouseEvent}function Ay(n,e){let t={start:i,center:o,end:r};function i(){return 0}function o(u){return r(u)/2}function r(u){return e-u}function a(u,f){return ai(n)?t[n](u):n(e,u,f)}return{measure:a}}function Lt(){let n=[];function e(o,r,a,u={passive:!0}){let f;if("addEventListener"in o)o.addEventListener(r,a,u),f=()=>o.removeEventListener(r,a,u);else{let c=o;c.addListener(a),f=()=>c.removeListener(a)}return n.push(f),i}function t(){n=n.filter(o=>o())}let i={add:e,clear:t};return i}function wy(n,e,t,i){let o=Lt(),r=1e3/60,a=null,u=0,f=0;function c(){o.add(n,"visibilitychange",()=>{n.hidden&&m()})}function d(){g(),o.clear()}function p(y){if(!f)return;a||(a=y,t(),t());let T=y-a;for(a=y,u+=T;u>=r;)t(),u-=r;let v=u/r;i(v),f&&(f=e.requestAnimationFrame(p))}function h(){f||(f=e.requestAnimationFrame(p))}function g(){e.cancelAnimationFrame(f),a=null,u=0,f=0}function m(){a=null,u=0}return{init:c,destroy:d,start:h,stop:g,update:t,render:i}}function ky(n,e){let t=e==="rtl",i=n==="y",o=i?"y":"x",r=i?"x":"y",a=!i&&t?-1:1,u=d(),f=p();function c(g){let{height:m,width:y}=g;return i?m:y}function d(){return i?"top":t?"right":"left"}function p(){return i?"bottom":t?"left":"right"}function h(g){return g*a}return{scroll:o,cross:r,startEdge:u,endEdge:f,measureSize:c,direction:h}}function Ye(n=0,e=0){let t=Q(n-e);function i(f){return f<n}function o(f){return f>e}function r(f){return i(f)||o(f)}function a(f){return r(f)?i(f)?n:e:f}function u(f){return t?f-t*Math.ceil((f-e)/t):f}return{length:t,max:e,min:n,constrain:a,reachedAny:r,reachedMax:o,reachedMin:i,removeOffset:u}}function $s(n,e,t){let{constrain:i}=Ye(0,n),o=n+1,r=a(e);function a(h){return t?Q((o+h)%o):i(h)}function u(){return r}function f(h){return r=a(h),p}function c(h){return d().set(u()+h)}function d(){return $s(n,u(),t)}let p={get:u,set:f,add:c,clone:d};return p}function Iy(n,e,t,i,o,r,a,u,f,c,d,p,h,g,m,y,T,v,_){let{cross:x,direction:w}=n,S=["INPUT","SELECT","TEXTAREA"],E={passive:!1},k=Lt(),D=Lt(),M=Ye(50,225).constrain(g.measure(20)),L={mouse:300,touch:400},B={mouse:500,touch:600},te=m?43:25,H=!1,X=0,ie=0,ge=!1,_e=!1,ye=!1,ae=!1;function Be(N){if(!_)return;function O(ne){(Sn(_)||_(N,ne))&&vt(ne)}let J=e;k.add(J,"dragstart",ne=>ne.preventDefault(),E).add(J,"touchmove",()=>{},E).add(J,"touchend",()=>{}).add(J,"touchstart",O).add(J,"mousedown",O).add(J,"touchcancel",ue).add(J,"contextmenu",ue).add(J,"click",Me,!0)}function de(){k.clear(),D.clear()}function Ie(){let N=ae?t:e;D.add(N,"touchmove",pe,E).add(N,"touchend",ue).add(N,"mousemove",pe,E).add(N,"mouseup",ue)}function je(N){let O=N.nodeName||"";return S.includes(O)}function Re(){return(m?B:L)[ae?"mouse":"touch"]}function Tt(N,O){let J=p.add(Ei(N)*-1),ne=d.byDistance(N,!m).distance;return m||Q(N)<M?ne:T&&O?ne*.5:d.byIndex(J.get(),0).distance}function vt(N){let O=ui(N,i);ae=O,ye=m&&O&&!N.buttons&&H,H=Rt(o.get(),a.get())>=2,!(O&&N.button!==0)&&(je(N.target)||(ge=!0,r.pointerDown(N),c.useFriction(0).useDuration(0),o.set(a),Ie(),X=r.readPoint(N),ie=r.readPoint(N,x),h.emit("pointerDown")))}function pe(N){if(!ui(N,i)&&N.touches.length>=2)return ue(N);let O=r.readPoint(N),J=r.readPoint(N,x),ne=Rt(O,X),qe=Rt(J,ie);if(!_e&&!ae&&(!N.cancelable||(_e=ne>qe,!_e)))return ue(N);let be=r.pointerMove(N);ne>y&&(ye=!0),c.useFriction(.3).useDuration(.75),u.start(),o.add(w(be)),N.preventDefault()}function ue(N){let O=d.byDistance(0,!1).index!==p.get(),J=r.pointerUp(N)*Re(),ne=Tt(w(J),O),qe=Ey(J,ne),be=te-10*qe,et=v+qe/50;_e=!1,ge=!1,D.clear(),c.useDuration(be).useFriction(et),f.distance(ne,!m),ae=!1,h.emit("pointerUp")}function Me(N){ye&&(N.stopPropagation(),N.preventDefault(),ye=!1)}function he(){return ge}return{init:Be,destroy:de,pointerDown:he}}function Ry(n,e){let t,i;function o(c){return c.timeStamp}function r(c,d){let p=`client${(d||n.scroll)==="x"?"X":"Y"}`;return(ui(c,e)?c:c.touches[0])[p]}function a(c){return t=c,i=c,r(c)}function u(c){let d=r(c)-r(i),p=o(c)-o(t)>170;return i=c,p&&(t=c),d}function f(c){if(!t||!i)return 0;let d=r(i)-r(t),p=o(c)-o(t),h=o(c)-o(i)>170,g=d/p;return p&&!h&&Q(g)>.1?g:0}return{pointerDown:a,pointerMove:u,pointerUp:f,readPoint:r}}function My(){function n(e){let{offsetTop:t,offsetLeft:i,offsetWidth:o,offsetHeight:r}=e;return{top:t,right:i+o,bottom:t+r,left:i,width:o,height:r}}return{measure:n}}function Py(n){function e(t){return n*(t/100)}return{measure:e}}function Ny(n,e,t,i,o,r,a){let u=[n].concat(i),f,c,d=[],p=!1;function h(y){return o.measureSize(a.measure(y))}function g(y){if(!r)return;c=h(n),d=i.map(h);function T(v){for(let _ of v){if(p)return;let x=_.target===n,w=i.indexOf(_.target),S=x?c:d[w],E=h(x?n:i[w]);if(Q(E-S)>=.5){y.reInit(),e.emit("resize");break}}}f=new ResizeObserver(v=>{(Sn(r)||r(y,v))&&T(v)}),t.requestAnimationFrame(()=>{u.forEach(v=>f.observe(v))})}function m(){p=!0,f&&f.disconnect()}return{init:g,destroy:m}}function Dy(n,e,t,i,o,r){let a=0,u=0,f=o,c=r,d=n.get(),p=0;function h(){let E=i.get()-n.get(),k=!f,D=0;return k?(a=0,t.set(i),n.set(i),D=E):(t.set(n),a+=E/f,a*=c,d+=a,n.add(a),D=d-p),u=Ei(D),p=d,S}function g(){let E=i.get()-e.get();return Q(E)<.001}function m(){return f}function y(){return u}function T(){return a}function v(){return x(o)}function _(){return w(r)}function x(E){return f=E,S}function w(E){return c=E,S}let S={direction:y,duration:m,velocity:T,seek:h,settled:g,useBaseFriction:_,useBaseDuration:v,useFriction:w,useDuration:x};return S}function by(n,e,t,i,o){let r=o.measure(10),a=o.measure(50),u=Ye(.1,.99),f=!1;function c(){return!(f||!n.reachedAny(t.get())||!n.reachedAny(e.get()))}function d(h){if(!c())return;let g=n.reachedMin(e.get())?"min":"max",m=Q(n[g]-e.get()),y=t.get()-e.get(),T=u.constrain(m/a);t.subtract(y*T),!h&&Q(y)<r&&(t.set(n.constrain(t.get())),i.useDuration(25).useBaseFriction())}function p(h){f=!h}return{shouldConstrain:c,constrain:d,toggleActive:p}}function Ly(n,e,t,i,o){let r=Ye(-e+n,0),a=p(),u=d(),f=h();function c(g,m){return Rt(g,m)<=1}function d(){let g=a[0],m=ve(a),y=a.lastIndexOf(g),T=a.indexOf(m)+1;return Ye(y,T)}function p(){return t.map((g,m)=>{let{min:y,max:T}=r,v=r.constrain(g),_=!m,x=Si(t,m);return _?T:x||c(y,v)?y:c(T,v)?T:v}).map(g=>parseFloat(g.toFixed(3)))}function h(){if(e<=n+o)return[r.max];if(i==="keepSnaps")return a;let{min:g,max:m}=u;return a.slice(g,m)}return{snapsContained:f,scrollContainLimit:u}}function Fy(n,e,t){let i=e[0],o=t?i-n:ve(e);return{limit:Ye(o,i)}}function Uy(n,e,t,i){let o=e.min+.1,r=e.max+.1,{reachedMin:a,reachedMax:u}=Ye(o,r);function f(d){return d===1?u(t.get()):d===-1?a(t.get()):!1}function c(d){if(!f(d))return;let p=n*(d*-1);i.forEach(h=>h.add(p))}return{loop:c}}function Vy(n){let{max:e,length:t}=n;function i(o){let r=o-e;return t?r/-t:0}return{get:i}}function $y(n,e,t,i,o){let{startEdge:r,endEdge:a}=n,{groupSlides:u}=o,f=p().map(e.measure),c=h(),d=g();function p(){return u(i).map(m=>ve(m)[a]-m[0][r]).map(Q)}function h(){return i.map(m=>t[r]-m[r]).map(m=>-Q(m))}function g(){return u(c).map(m=>m[0]).map((m,y)=>m+f[y])}return{snaps:c,snapsAligned:d}}function By(n,e,t,i,o,r){let{groupSlides:a}=o,{min:u,max:f}=i,c=d();function d(){let p=a(r),h=!n||e==="keepSnaps";return t.length===1?[r]:h?p:p.slice(u,f).map((g,m,y)=>{let T=!m,v=Si(y,m);if(T){let _=ve(y[0])+1;return br(_)}if(v){let _=Bt(r)-ve(y)[0]+1;return br(_,ve(y)[0])}return g})}return{slideRegistry:c}}function qy(n,e,t,i,o){let{reachedAny:r,removeOffset:a,constrain:u}=i;function f(g){return g.concat().sort((m,y)=>Q(m)-Q(y))[0]}function c(g){let m=n?a(g):u(g),y=e.map((v,_)=>({diff:d(v-m,0),index:_})).sort((v,_)=>Q(v.diff)-Q(_.diff)),{index:T}=y[0];return{index:T,distance:m}}function d(g,m){let y=[g,g+t,g-t];if(!n)return g;if(!m)return f(y);let T=y.filter(v=>Ei(v)===m);return T.length?f(T):ve(y)-t}function p(g,m){let y=e[g]-o.get(),T=d(y,m);return{index:g,distance:T}}function h(g,m){let y=o.get()+g,{index:T,distance:v}=c(y),_=!n&&r(y);if(!m||_)return{index:T,distance:g};let x=e[T]-v,w=g+d(x,0);return{index:T,distance:w}}return{byDistance:h,byIndex:p,shortcut:d}}function Oy(n,e,t,i,o,r,a){function u(d){let p=d.distance,h=d.index!==e.get();r.add(p),p&&(i.duration()?n.start():(n.update(),n.render(1),n.update())),h&&(t.set(e.get()),e.set(d.index),a.emit("select"))}function f(d,p){let h=o.byDistance(d,p);u(h)}function c(d,p){let h=e.clone().set(d),g=o.byIndex(h.get(),p);u(g)}return{distance:f,index:c}}function Gy(n,e,t,i,o,r,a,u){let f={passive:!0,capture:!0},c=0;function d(h){if(!u)return;function g(m){if(new Date().getTime()-c>10)return;a.emit("slideFocusStart"),n.scrollLeft=0;let y=t.findIndex(T=>T.includes(m));xi(y)&&(o.useDuration(0),i.index(y,0),a.emit("slideFocus"))}r.add(document,"keydown",p,!1),e.forEach((m,y)=>{r.add(m,"focus",T=>{(Sn(u)||u(h,T))&&g(y)},f)})}function p(h){h.code==="Tab"&&(c=new Date().getTime())}return{init:d}}function kt(n){let e=n;function t(){return e}function i(u){e=a(u)}function o(u){e+=a(u)}function r(u){e-=a(u)}function a(u){return xi(u)?u:u.get()}return{get:t,set:i,add:o,subtract:r}}function Bs(n,e){let t=n.scroll==="x"?a:u,i=e.style,o=null,r=!1;function a(p){return`translate3d(${p}px,0px,0px)`}function u(p){return`translate3d(0px,${p}px,0px)`}function f(p){if(r)return;let h=Sy(n.direction(p));h!==o&&(i.transform=t(h),o=h)}function c(p){r=!p}function d(){r||(i.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:f,toggleActive:c}}function Hy(n,e,t,i,o,r,a,u,f){let c=Dt(o),d=Dt(o).reverse(),p=T().concat(v());function h(S,E){return S.reduce((k,D)=>k-o[D],E)}function g(S,E){return S.reduce((k,D)=>h(k,E)>0?k.concat([D]):k,[])}function m(S){return r.map((E,k)=>({start:E-i[k]+.5+S,end:E+e-.5+S}))}function y(S,E,k){let D=m(E);return S.map(M=>{let L=k?0:-t,B=k?t:0,te=k?"end":"start",H=D[M][te];return{index:M,loopPoint:H,slideLocation:kt(-1),translate:Bs(n,f[M]),target:()=>u.get()>H?L:B}})}function T(){let S=a[0],E=g(d,S);return y(E,t,!1)}function v(){let S=e-a[0]-1,E=g(c,S);return y(E,-t,!0)}function _(){return p.every(({index:S})=>{let E=c.filter(k=>k!==S);return h(E,e)<=.1})}function x(){p.forEach(S=>{let{target:E,translate:k,slideLocation:D}=S,M=E();M!==D.get()&&(k.to(M),D.set(M))})}function w(){p.forEach(S=>S.translate.clear())}return{canLoop:_,clear:w,loop:x,loopPoints:p}}function zy(n,e,t){let i,o=!1;function r(u){if(!t)return;function f(c){for(let d of c)if(d.type==="childList"){u.reInit(),e.emit("slidesChanged");break}}i=new MutationObserver(c=>{o||(Sn(t)||t(u,c))&&f(c)}),i.observe(n,{childList:!0})}function a(){i&&i.disconnect(),o=!0}return{init:r,destroy:a}}function Jy(n,e,t,i){let o={},r=null,a=null,u,f=!1;function c(){u=new IntersectionObserver(g=>{f||(g.forEach(m=>{let y=e.indexOf(m.target);o[y]=m}),r=null,a=null,t.emit("slidesInView"))},{root:n.parentElement,threshold:i}),e.forEach(g=>u.observe(g))}function d(){u&&u.disconnect(),f=!0}function p(g){return bt(o).reduce((m,y)=>{let T=parseInt(y),{isIntersecting:v}=o[T];return(g&&v||!g&&!v)&&m.push(T),m},[])}function h(g=!0){if(g&&r)return r;if(!g&&a)return a;let m=p(g);return g&&(r=m),g||(a=m),m}return{init:c,destroy:d,get:h}}function Wy(n,e,t,i,o,r){let{measureSize:a,startEdge:u,endEdge:f}=n,c=t[0]&&o,d=m(),p=y(),h=t.map(a),g=T();function m(){if(!c)return 0;let v=t[0];return Q(e[u]-v[u])}function y(){if(!c)return 0;let v=r.getComputedStyle(ve(i));return parseFloat(v.getPropertyValue(`margin-${f}`))}function T(){return t.map((v,_,x)=>{let w=!_,S=Si(x,_);return w?h[_]+d:S?h[_]+p:x[_+1][u]-v[u]}).map(Q)}return{slideSizes:h,slideSizesWithGaps:g,startGap:d,endGap:p}}function Zy(n,e,t,i,o,r,a,u,f){let{startEdge:c,endEdge:d,direction:p}=n,h=xi(t);function g(T,v){return Dt(T).filter(_=>_%v===0).map(_=>T.slice(_,_+v))}function m(T){return T.length?Dt(T).reduce((v,_,x)=>{let w=ve(v)||0,S=w===0,E=_===Bt(T),k=o[c]-r[w][c],D=o[c]-r[_][d],M=!i&&S?p(a):0,L=!i&&E?p(u):0,B=Q(D-L-(k+M));return x&&B>e+f&&v.push(_),E&&v.push(T.length),v},[]).map((v,_,x)=>{let w=Math.max(x[_-1]||0);return T.slice(w,v)}):[]}function y(T){return h?g(T,t):m(T)}return{groupSlides:y}}function Ky(n,e,t,i,o,r,a){let{align:u,axis:f,direction:c,startIndex:d,loop:p,duration:h,dragFree:g,dragThreshold:m,inViewThreshold:y,slidesToScroll:T,skipSnaps:v,containScroll:_,watchResize:x,watchSlides:w,watchDrag:S,watchFocus:E}=r,k=2,D=My(),M=D.measure(e),L=t.map(D.measure),B=ky(f,c),te=B.measureSize(M),H=Py(te),X=Ay(u,te),ie=!p&&!!_,ge=p||!!_,{slideSizes:_e,slideSizesWithGaps:ye,startGap:ae,endGap:Be}=Wy(B,M,L,t,ge,o),de=Zy(B,te,T,p,M,L,ae,Be,k),{snaps:Ie,snapsAligned:je}=$y(B,X,M,L,de),Re=-ve(Ie)+ve(ye),{snapsContained:Tt,scrollContainLimit:vt}=Ly(te,Re,je,_,k),pe=ie?Tt:je,{limit:ue}=Fy(Re,pe,p),Me=$s(Bt(pe),d,p),he=Me.clone(),N=Dt(t),O=({dragHandler:nt,scrollBody:Pn,scrollBounds:Nn,options:{loop:Ot}})=>{Ot||Nn.constrain(nt.pointerDown()),Pn.seek()},J=({scrollBody:nt,translate:Pn,location:Nn,offsetLocation:Ot,previousLocation:el,scrollLooper:tl,slideLooper:nl,dragHandler:il,animation:ol,eventHandler:$i,scrollBounds:rl,options:{loop:Bi}},qi)=>{let Oi=nt.settled(),sl=!rl.shouldConstrain(),Gi=Bi?Oi:Oi&&sl,Hi=Gi&&!il.pointerDown();Hi&&ol.stop();let ll=Nn.get()*qi+el.get()*(1-qi);Ot.set(ll),Bi&&(tl.loop(nt.direction()),nl.loop()),Pn.to(Ot.get()),Hi&&$i.emit("settle"),Gi||$i.emit("scroll")},ne=wy(i,o,()=>O(Mn),nt=>J(Mn,nt)),qe=.68,be=pe[Me.get()],et=kt(be),kn=kt(be),tt=kt(be),Oe=kt(be),Ct=Dy(et,tt,kn,Oe,h,qe),In=qy(p,pe,Re,ue,Oe),Rn=Oy(ne,Me,he,Ct,In,Oe,a),Fi=Vy(ue),Ui=Lt(),Qs=Jy(e,t,a,y),{slideRegistry:Vi}=By(ie,_,pe,vt,de,N),js=Gy(n,t,Vi,Rn,Ct,Ui,a,E),Mn={ownerDocument:i,ownerWindow:o,eventHandler:a,containerRect:M,slideRects:L,animation:ne,axis:B,dragHandler:Iy(B,n,i,o,Oe,Ry(B,o),et,ne,Rn,Ct,In,Me,a,H,g,m,v,qe,S),eventStore:Ui,percentOfView:H,index:Me,indexPrevious:he,limit:ue,location:et,offsetLocation:tt,previousLocation:kn,options:r,resizeHandler:Ny(e,a,o,t,B,x,D),scrollBody:Ct,scrollBounds:by(ue,tt,Oe,Ct,H),scrollLooper:Uy(Re,ue,tt,[et,tt,kn,Oe]),scrollProgress:Fi,scrollSnapList:pe.map(Fi.get),scrollSnaps:pe,scrollTarget:In,scrollTo:Rn,slideLooper:Hy(B,te,Re,_e,ye,Ie,pe,tt,t),slideFocus:js,slidesHandler:zy(e,a,w),slidesInView:Qs,slideIndexes:N,slideRegistry:Vi,slidesToScroll:de,target:Oe,translate:Bs(B,e)};return Mn}function Yy(){let n={},e;function t(c){e=c}function i(c){return n[c]||[]}function o(c){return i(c).forEach(d=>d(e,c)),f}function r(c,d){return n[c]=i(c).concat([d]),f}function a(c,d){return n[c]=i(c).filter(p=>p!==d),f}function u(){n={}}let f={init:t,emit:o,off:a,on:r,clear:u};return f}var Xy={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function Qy(n){function e(o,r){return Vs(o,r||{})}function t(o){let r=o.breakpoints||{},a=bt(r).filter(u=>n.matchMedia(u).matches).map(u=>r[u]).reduce((u,f)=>e(u,f),{});return e(o,a)}function i(o){return o.map(r=>bt(r.breakpoints||{})).reduce((r,a)=>r.concat(a),[]).map(n.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:i}}function jy(n){let e=[];function t(o,r){return e=r.filter(({options:a})=>n.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(o,n)),r.reduce((a,u)=>Object.assign(a,{[u.name]:u}),{})}function i(){e=e.filter(o=>o.destroy())}return{init:t,destroy:i}}function Ai(n,e,t){let i=n.ownerDocument,o=i.defaultView,r=Qy(o),a=jy(r),u=Lt(),f=Yy(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:p}=r,{on:h,off:g,emit:m}=f,y=B,T=!1,v,_=c(Xy,Ai.globalOptions),x=c(_),w=[],S,E,k;function D(){let{container:N,slides:O}=x;E=(ai(N)?n.querySelector(N):N)||n.children[0];let J=ai(O)?E.querySelectorAll(O):O;k=[].slice.call(J||E.children)}function M(N){let O=Ky(n,E,k,i,o,N,f);if(N.loop&&!O.slideLooper.canLoop()){let J=Object.assign({},N,{loop:!1});return M(J)}return O}function L(N,O){T||(_=c(_,N),x=d(_),w=O||w,D(),v=M(x),p([_,...w.map(({options:J})=>J)]).forEach(J=>u.add(J,"change",B)),x.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(he),v.eventHandler.init(he),v.resizeHandler.init(he),v.slidesHandler.init(he),v.options.loop&&v.slideLooper.loop(),E.offsetParent&&k.length&&v.dragHandler.init(he),S=a.init(he,w)))}function B(N,O){let J=de();te(),L(c({startIndex:J},N),O),f.emit("reInit")}function te(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),a.destroy(),u.clear()}function H(){T||(T=!0,u.clear(),te(),f.emit("destroy"),f.clear())}function X(N,O,J){!x.active||T||(v.scrollBody.useBaseFriction().useDuration(O===!0?0:x.duration),v.scrollTo.index(N,J||0))}function ie(N){let O=v.index.add(1).get();X(O,N,-1)}function ge(N){let O=v.index.add(-1).get();X(O,N,1)}function _e(){return v.index.add(1).get()!==de()}function ye(){return v.index.add(-1).get()!==de()}function ae(){return v.scrollSnapList}function Be(){return v.scrollProgress.get(v.offsetLocation.get())}function de(){return v.index.get()}function Ie(){return v.indexPrevious.get()}function je(){return v.slidesInView.get()}function Re(){return v.slidesInView.get(!1)}function Tt(){return S}function vt(){return v}function pe(){return n}function ue(){return E}function Me(){return k}let he={canScrollNext:_e,canScrollPrev:ye,containerNode:ue,internalEngine:vt,destroy:H,off:g,on:h,emit:m,plugins:Tt,previousScrollSnap:Ie,reInit:y,rootNode:pe,scrollNext:ie,scrollPrev:ge,scrollProgress:Be,scrollSnapList:ae,scrollTo:X,selectedScrollSnap:de,slideNodes:Me,slidesInView:je,slidesNotInView:Re};return L(e,t),setTimeout(()=>f.emit("init"),0),he}Ai.globalOptions=void 0;var eT={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function tT(n,e){let t=n.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,n)}function nT(n,e){let t=n.rootNode();return e&&e(t)||t}function wi(n={}){let e,t,i,o,r=null,a=0,u=!1,f=!1,c=!1,d=!1;function p(H,X){t=H;let{mergeOptions:ie,optionsAtMedia:ge}=X,_e=ie(eT,wi.globalOptions),ye=ie(_e,n);if(e=ge(ye),t.scrollSnapList().length<=1)return;d=e.jump,i=!1,o=tT(t,e.delay);let{eventStore:ae,ownerDocument:Be}=t.internalEngine(),de=!!t.internalEngine().options.watchDrag,Ie=nT(t,e.rootNode);ae.add(Be,"visibilitychange",v),de&&t.on("pointerDown",x),de&&!e.stopOnInteraction&&t.on("pointerUp",w),e.stopOnMouseEnter&&ae.add(Ie,"mouseenter",S),e.stopOnMouseEnter&&!e.stopOnInteraction&&ae.add(Ie,"mouseleave",E),e.stopOnFocusIn&&t.on("slideFocusStart",T),e.stopOnFocusIn&&!e.stopOnInteraction&&ae.add(t.containerNode(),"focusout",y),e.playOnInit&&y()}function h(){t.off("pointerDown",x).off("pointerUp",w).off("slideFocusStart",T),T(),i=!0,u=!1}function g(){let{ownerWindow:H}=t.internalEngine();H.clearTimeout(a),a=H.setTimeout(B,o[t.selectedScrollSnap()]),r=new Date().getTime(),t.emit("autoplay:timerset")}function m(){let{ownerWindow:H}=t.internalEngine();H.clearTimeout(a),a=0,r=null,t.emit("autoplay:timerstopped")}function y(){if(!i){if(_()){c=!0;return}u||t.emit("autoplay:play"),g(),u=!0}}function T(){i||(u&&t.emit("autoplay:stop"),m(),u=!1)}function v(){if(_())return c=u,T();c&&y()}function _(){let{ownerDocument:H}=t.internalEngine();return H.visibilityState==="hidden"}function x(){f||T()}function w(){f||y()}function S(){f=!0,T()}function E(){f=!1,y()}function k(H){typeof H<"u"&&(d=H),y()}function D(){u&&T()}function M(){u&&y()}function L(){return u}function B(){let{index:H}=t.internalEngine(),X=H.clone().add(1).get(),ie=t.scrollSnapList().length-1,ge=e.stopOnLastSnap&&X===ie;if(t.canScrollNext()?t.scrollNext(d):t.scrollTo(0,d),t.emit("autoplay:select"),ge)return T();y()}function te(){if(!r)return null;let H=o[t.selectedScrollSnap()],X=new Date().getTime()-r;return H-X}return{name:"autoplay",options:n,init:p,destroy:h,play:k,stop:D,reset:M,isPlaying:L,timeUntilNext:te}}wi.globalOptions=void 0;const iT=(n,e,t)=>{let i=[];const o=()=>{e.innerHTML=n.scrollSnapList().map(()=>'<button class="embla__dot" type="button"></button>').join("");const a=u=>{n.scrollTo(u),t&&t(n)};i=Array.from(e.querySelectorAll(".embla__dot")),i.forEach((u,f)=>{u.addEventListener("click",()=>a(f),!1)})},r=()=>{const a=n.previousScrollSnap(),u=n.selectedScrollSnap();i[a].classList.remove("embla__dot--selected"),i[u].classList.add("embla__dot--selected")};return n.on("init",o).on("reInit",o).on("init",r).on("reInit",r).on("select",r),()=>{e.innerHTML=""}},oT={loop:!0},rT=[wi()];function sT(){const n=document.querySelectorAll(".embla");console.log(n),n.forEach(e=>{lT(e)})}function lT(n){const e=n.querySelector(".embla__viewport"),t=n.querySelector(".embla__dots"),i=Ai(e,oT,rT),r=iT(i,t,a=>{var c;const u=(c=a==null?void 0:a.plugins())==null?void 0:c.autoplay;if(!u)return;(u.options.stopOnInteraction===!1?u.reset:u.stop)()});i.on("destroy",r)}function ki(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Qe=ki();function qs(n){Qe=n}var Mt={exec:()=>null};function z(n,e=""){let t=typeof n=="string"?n:n.source,i={replace:(o,r)=>{let a=typeof r=="string"?r:r.source;return a=a.replace(se.caret,"$1"),t=t.replace(o,a),i},getRegex:()=>new RegExp(t,e)};return i}var se={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},aT=/^(?:[ \t]*(?:\n|$))+/,uT=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cT=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,qt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fT=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ii=/(?:[*+-]|\d{1,9}[.)])/,Os=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gs=z(Os).replace(/bull/g,Ii).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),dT=z(Os).replace(/bull/g,Ii).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ri=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,pT=/^[^\n]+/,Mi=/(?!\s*\])(?:\\.|[^\[\]\\])+/,hT=z(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Mi).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),mT=z(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ii).getRegex(),An="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pi=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,gT=z("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Pi).replace("tag",An).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Hs=z(Ri).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex(),yT=z(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Hs).getRegex(),Ni={blockquote:yT,code:uT,def:hT,fences:cT,heading:fT,hr:qt,html:gT,lheading:Gs,list:mT,newline:aT,paragraph:Hs,table:Mt,text:pT},Lr=z("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex(),TT={...Ni,lheading:dT,table:Lr,paragraph:z(Ri).replace("hr",qt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Lr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An).getRegex()},vT={...Ni,html:z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Pi).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Mt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:z(Ri).replace("hr",qt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gs).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},CT=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_T=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zs=/^( {2,}|\\)\n(?!\s*$)/,xT=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,wn=/[\p{P}\p{S}]/u,Di=/[\s\p{P}\p{S}]/u,Js=/[^\s\p{P}\p{S}]/u,ET=z(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Di).getRegex(),Ws=/(?!~)[\p{P}\p{S}]/u,ST=/(?!~)[\s\p{P}\p{S}]/u,AT=/(?:[^\s\p{P}\p{S}]|~)/u,wT=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Zs=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,kT=z(Zs,"u").replace(/punct/g,wn).getRegex(),IT=z(Zs,"u").replace(/punct/g,Ws).getRegex(),Ks="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",RT=z(Ks,"gu").replace(/notPunctSpace/g,Js).replace(/punctSpace/g,Di).replace(/punct/g,wn).getRegex(),MT=z(Ks,"gu").replace(/notPunctSpace/g,AT).replace(/punctSpace/g,ST).replace(/punct/g,Ws).getRegex(),PT=z("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Js).replace(/punctSpace/g,Di).replace(/punct/g,wn).getRegex(),NT=z(/\\(punct)/,"gu").replace(/punct/g,wn).getRegex(),DT=z(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bT=z(Pi).replace("(?:-->|$)","-->").getRegex(),LT=z("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bT).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),fn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,FT=z(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",fn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ys=z(/^!?\[(label)\]\[(ref)\]/).replace("label",fn).replace("ref",Mi).getRegex(),Xs=z(/^!?\[(ref)\](?:\[\])?/).replace("ref",Mi).getRegex(),UT=z("reflink|nolink(?!\\()","g").replace("reflink",Ys).replace("nolink",Xs).getRegex(),bi={_backpedal:Mt,anyPunctuation:NT,autolink:DT,blockSkip:wT,br:zs,code:_T,del:Mt,emStrongLDelim:kT,emStrongRDelimAst:RT,emStrongRDelimUnd:PT,escape:CT,link:FT,nolink:Xs,punctuation:ET,reflink:Ys,reflinkSearch:UT,tag:LT,text:xT,url:Mt},VT={...bi,link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",fn).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fn).getRegex()},ci={...bi,emStrongRDelimAst:MT,emStrongLDelim:IT,url:z(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},$T={...ci,br:z(zs).replace("{2,}","*").getRegex(),text:z(ci.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},zt={normal:Ni,gfm:TT,pedantic:vT},Et={normal:bi,gfm:ci,breaks:$T,pedantic:VT},BT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fr=n=>BT[n];function Ee(n,e){if(e){if(se.escapeTest.test(n))return n.replace(se.escapeReplace,Fr)}else if(se.escapeTestNoEncode.test(n))return n.replace(se.escapeReplaceNoEncode,Fr);return n}function Ur(n){try{n=encodeURI(n).replace(se.percentDecode,"%")}catch{return null}return n}function Vr(n,e){var r;let t=n.replace(se.findPipe,(a,u,f)=>{let c=!1,d=u;for(;--d>=0&&f[d]==="\\";)c=!c;return c?"|":" |"}),i=t.split(se.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!((r=i.at(-1))!=null&&r.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(se.slashPipe,"|");return i}function St(n,e,t){let i=n.length;if(i===0)return"";let o=0;for(;o<i&&n.charAt(i-o-1)===e;)o++;return n.slice(0,i-o)}function qT(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return t>0?-2:-1}function $r(n,e,t,i,o){let r=e.href,a=e.title||null,u=n[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let f={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:r,title:a,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,f}function OT(n,e,t){let i=n.match(t.other.indentCodeCompensation);if(i===null)return e;let o=i[1];return e.split(`
`).map(r=>{let a=r.match(t.other.beginningSpace);if(a===null)return r;let[u]=a;return u.length>=o.length?r.slice(o.length):r}).join(`
`)}var dn=class{constructor(n){Z(this,"options");Z(this,"rules");Z(this,"lexer");this.options=n||Qe}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:St(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],i=OT(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let i=St(t,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(t=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:St(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=St(e[0],`
`).split(`
`),i="",o="",r=[];for(;t.length>0;){let a=!1,u=[],f;for(f=0;f<t.length;f++)if(this.rules.other.blockquoteStart.test(t[f]))u.push(t[f]),a=!0;else if(!a)u.push(t[f]);else break;t=t.slice(f);let c=u.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=p,t.length===0)break;let h=r.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let g=h,m=g.raw+`
`+t.join(`
`),y=this.blockquote(m);r[r.length-1]=y,i=i.substring(0,i.length-g.raw.length)+y.raw,o=o.substring(0,o.length-g.text.length)+y.text;break}else if((h==null?void 0:h.type)==="list"){let g=h,m=g.raw+`
`+t.join(`
`),y=this.list(m);r[r.length-1]=y,i=i.substring(0,i.length-h.raw.length)+y.raw,o=o.substring(0,o.length-g.raw.length)+y.raw,t=m.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:o}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),i=t.length>1,o={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");let r=this.rules.other.listItemRegex(t),a=!1;for(;n;){let f=!1,c="",d="";if(!(e=r.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),h=n.split(`
`,1)[0],g=!p.trim(),m=0;if(this.options.pedantic?(m=2,d=p.trimStart()):g?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,d=p.slice(m),m+=e[1].length),g&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,n=n.substring(h.length+1),f=!0),!f){let v=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),x=this.rules.other.fencesBeginRegex(m),w=this.rules.other.headingBeginRegex(m),S=this.rules.other.htmlBeginRegex(m);for(;n;){let E=n.split(`
`,1)[0],k;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),k=h):k=h.replace(this.rules.other.tabCharGlobal,"    "),x.test(h)||w.test(h)||S.test(h)||v.test(h)||_.test(h))break;if(k.search(this.rules.other.nonSpaceChar)>=m||!h.trim())d+=`
`+k.slice(m);else{if(g||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(p)||w.test(p)||_.test(p))break;d+=`
`+h}!g&&!h.trim()&&(g=!0),c+=E+`
`,n=n.substring(E.length+1),p=k.slice(m)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let y=null,T;this.options.gfm&&(y=this.rules.other.listIsTask.exec(d),y&&(T=y[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:c,task:!!y,checked:T,loose:!1,text:d,tokens:[]}),o.raw+=c}let u=o.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let f=0;f<o.items.length;f++)if(this.lexer.state.top=!1,o.items[f].tokens=this.lexer.blockTokens(o.items[f].text,[]),!o.loose){let c=o.items[f].tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}if(o.loose)for(let f=0;f<o.items.length;f++)o.items[f].loose=!0;return o}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:o}}}table(n){var a;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Vr(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=e[3])!=null&&a.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===i.length){for(let u of i)this.rules.other.tableAlignRight.test(u)?r.align.push("right"):this.rules.other.tableAlignCenter.test(u)?r.align.push("center"):this.rules.other.tableAlignLeft.test(u)?r.align.push("left"):r.align.push(null);for(let u=0;u<t.length;u++)r.header.push({text:t[u],tokens:this.lexer.inline(t[u]),header:!0,align:r.align[u]});for(let u of o)r.rows.push(Vr(u,r.header.length).map((f,c)=>({text:f,tokens:this.lexer.inline(f),header:!1,align:r.align[c]})));return r}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let r=St(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{let r=qT(e[2],"()");if(r===-2)return;if(r>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],o=r[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?i=i.slice(1):i=i.slice(1,-1)),$r(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let i=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[i.toLowerCase()];if(!o){let r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return $r(t,o,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let i=this.rules.inline.emStrongLDelim.exec(n);if(!(!i||i[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!t||this.rules.inline.punctuation.exec(t))){let o=[...i[0]].length-1,r,a,u=o,f=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*n.length+o);(i=c.exec(e))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(a=[...r].length,i[3]||i[4]){u+=a;continue}else if((i[5]||i[6])&&o%3&&!((o+a)%3)){f+=a;continue}if(u-=a,u>0)continue;a=Math.min(a,a+u+f);let d=[...i[0]][0].length,p=n.slice(0,o+i.index+d+a);if(Math.min(o,a)%2){let g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}let h=p.slice(2,-2);return{type:"strong",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(t),o=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return i&&o&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,i;return e[2]==="@"?(t=e[1],i="mailto:"+t):(t=e[1],i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let i,o;if(e[2]==="@")i=e[0],o="mailto:"+i;else{let r;do r=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(r!==e[0]);i=e[0],e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Pe=class fi{constructor(e){Z(this,"tokens");Z(this,"options");Z(this,"state");Z(this,"tokenizer");Z(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Qe,this.options.tokenizer=this.options.tokenizer||new dn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:se,block:zt.normal,inline:Et.normal};this.options.pedantic?(t.block=zt.pedantic,t.inline=Et.pedantic):this.options.gfm&&(t.block=zt.gfm,this.options.breaks?t.inline=Et.breaks:t.inline=Et.gfm),this.tokenizer.rules=t}static get rules(){return{block:zt,inline:Et}}static lex(e,t){return new fi(t).lex(e)}static lexInline(e,t){return new fi(t).inlineTokens(e)}lex(e){e=e.replace(se.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){var o,r,a;for(this.options.pedantic&&(e=e.replace(se.tabCharGlobal,"    ").replace(se.spaceLine,""));e;){let u;if((r=(o=this.options.extensions)==null?void 0:o.block)!=null&&r.some(c=>(u=c.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.space(e)){e=e.substring(u.raw.length);let c=t.at(-1);u.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(u);continue}if(u=this.tokenizer.code(e)){e=e.substring(u.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+u.raw,c.text+=`
`+u.text,this.inlineQueue.at(-1).src=c.text):t.push(u);continue}if(u=this.tokenizer.fences(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.heading(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.hr(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.blockquote(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.list(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.html(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.def(e)){e=e.substring(u.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+u.raw,c.text+=`
`+u.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[u.tag]||(this.tokens.links[u.tag]={href:u.href,title:u.title});continue}if(u=this.tokenizer.table(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.lheading(e)){e=e.substring(u.raw.length),t.push(u);continue}let f=e;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0,d=e.slice(1),p;this.options.extensions.startBlock.forEach(h=>{p=h.call({lexer:this},d),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(f=e.substring(0,c+1))}if(this.state.top&&(u=this.tokenizer.paragraph(f))){let c=t.at(-1);i&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+u.raw,c.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(u),i=f.length!==e.length,e=e.substring(u.raw.length);continue}if(u=this.tokenizer.text(e)){e=e.substring(u.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+u.raw,c.text+=`
`+u.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(u);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var u,f,c;let i=e,o=null;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)d.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,a="";for(;e;){r||(a=""),r=!1;let d;if((f=(u=this.options.extensions)==null?void 0:u.inline)!=null&&f.some(h=>(d=h.call({lexer:this},e,t))?(e=e.substring(d.raw.length),t.push(d),!0):!1))continue;if(d=this.tokenizer.escape(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.tag(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.link(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(d.raw.length);let h=t.at(-1);d.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=d.raw,h.text+=d.text):t.push(d);continue}if(d=this.tokenizer.emStrong(e,i,a)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.codespan(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.br(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.del(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.autolink(e)){e=e.substring(d.raw.length),t.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(e))){e=e.substring(d.raw.length),t.push(d);continue}let p=e;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0,g=e.slice(1),m;this.options.extensions.startInline.forEach(y=>{m=y.call({lexer:this},g),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(p=e.substring(0,h+1))}if(d=this.tokenizer.inlineText(p)){e=e.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(a=d.raw.slice(-1)),r=!0;let h=t.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=d.raw,h.text+=d.text):t.push(d);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}},pn=class{constructor(n){Z(this,"options");Z(this,"parser");this.options=n||Qe}space(n){return""}code({text:n,lang:e,escaped:t}){var r;let i=(r=(e||"").match(se.notSpaceStart))==null?void 0:r[0],o=n.replace(se.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Ee(i)+'">'+(t?o:Ee(o,!0))+`</code></pre>
`:"<pre><code>"+(t?o:Ee(o,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,i="";for(let a=0;a<n.items.length;a++){let u=n.items[a];i+=this.listitem(u)}let o=e?"ol":"ul",r=e&&t!==1?' start="'+t+'"':"";return"<"+o+r+`>
`+i+"</"+o+`>
`}listitem(n){var t;let e="";if(n.task){let i=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=i+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=i+" "+Ee(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let o=0;o<n.header.length;o++)t+=this.tablecell(n.header[o]);e+=this.tablerow({text:t});let i="";for(let o=0;o<n.rows.length;o++){let r=n.rows[o];t="";for(let a=0;a<r.length;a++)t+=this.tablecell(r[a]);i+=this.tablerow({text:t})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${Ee(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t),o=Ur(n);if(o===null)return i;n=o;let r='<a href="'+n+'"';return e&&(r+=' title="'+Ee(e)+'"'),r+=">"+i+"</a>",r}image({href:n,title:e,text:t,tokens:i}){i&&(t=this.parser.parseInline(i,this.parser.textRenderer));let o=Ur(n);if(o===null)return Ee(t);n=o;let r=`<img src="${n}" alt="${t}"`;return e&&(r+=` title="${Ee(e)}"`),r+=">",r}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:Ee(n.text)}},Li=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},Ne=class di{constructor(e){Z(this,"options");Z(this,"renderer");Z(this,"textRenderer");this.options=e||Qe,this.options.renderer=this.options.renderer||new pn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Li}static parse(e,t){return new di(t).parse(e)}static parseInline(e,t){return new di(t).parseInline(e)}parse(e,t=!0){var o,r;let i="";for(let a=0;a<e.length;a++){let u=e[a];if((r=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&r[u.type]){let c=u,d=this.options.extensions.renderers[c.type].call({parser:this},c);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){i+=d||"";continue}}let f=u;switch(f.type){case"space":{i+=this.renderer.space(f);continue}case"hr":{i+=this.renderer.hr(f);continue}case"heading":{i+=this.renderer.heading(f);continue}case"code":{i+=this.renderer.code(f);continue}case"table":{i+=this.renderer.table(f);continue}case"blockquote":{i+=this.renderer.blockquote(f);continue}case"list":{i+=this.renderer.list(f);continue}case"html":{i+=this.renderer.html(f);continue}case"paragraph":{i+=this.renderer.paragraph(f);continue}case"text":{let c=f,d=this.renderer.text(c);for(;a+1<e.length&&e[a+1].type==="text";)c=e[++a],d+=`
`+this.renderer.text(c);t?i+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):i+=d;continue}default:{let c='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}parseInline(e,t=this.renderer){var o,r;let i="";for(let a=0;a<e.length;a++){let u=e[a];if((r=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&r[u.type]){let c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type)){i+=c||"";continue}}let f=u;switch(f.type){case"escape":{i+=t.text(f);break}case"html":{i+=t.html(f);break}case"link":{i+=t.link(f);break}case"image":{i+=t.image(f);break}case"strong":{i+=t.strong(f);break}case"em":{i+=t.em(f);break}case"codespan":{i+=t.codespan(f);break}case"br":{i+=t.br(f);break}case"del":{i+=t.del(f);break}case"text":{i+=t.text(f);break}default:{let c='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return i}},Vn,Qt=(Vn=class{constructor(n){Z(this,"options");Z(this,"block");this.options=n||Qe}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?Pe.lex:Pe.lexInline}provideParser(){return this.block?Ne.parse:Ne.parseInline}},Z(Vn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Vn),GT=class{constructor(...n){Z(this,"defaults",ki());Z(this,"options",this.setOptions);Z(this,"parse",this.parseMarkdown(!0));Z(this,"parseInline",this.parseMarkdown(!1));Z(this,"Parser",Ne);Z(this,"Renderer",pn);Z(this,"TextRenderer",Li);Z(this,"Lexer",Pe);Z(this,"Tokenizer",dn);Z(this,"Hooks",Qt);this.use(...n)}walkTokens(n,e){var i,o;let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let a=r;for(let u of a.header)t=t.concat(this.walkTokens(u.tokens,e));for(let u of a.rows)for(let f of u)t=t.concat(this.walkTokens(f.tokens,e));break}case"list":{let a=r;t=t.concat(this.walkTokens(a.items,e));break}default:{let a=r;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(u=>{let f=a[u].flat(1/0);t=t.concat(this.walkTokens(f,e))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=e.renderers[o.name];r?e.renderers[o.name]=function(...a){let u=o.renderer.apply(this,a);return u===!1&&(u=r.apply(this,a)),u}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=e[o.level];r?r.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),i.extensions=e),t.renderer){let o=this.defaults.renderer||new pn(this.defaults);for(let r in t.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let a=r,u=t.renderer[a],f=o[a];o[a]=(...c)=>{let d=u.apply(o,c);return d===!1&&(d=f.apply(o,c)),d||""}}i.renderer=o}if(t.tokenizer){let o=this.defaults.tokenizer||new dn(this.defaults);for(let r in t.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let a=r,u=t.tokenizer[a],f=o[a];o[a]=(...c)=>{let d=u.apply(o,c);return d===!1&&(d=f.apply(o,c)),d}}i.tokenizer=o}if(t.hooks){let o=this.defaults.hooks||new Qt;for(let r in t.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let a=r,u=t.hooks[a],f=o[a];Qt.passThroughHooks.has(r)?o[a]=c=>{if(this.defaults.async)return Promise.resolve(u.call(o,c)).then(p=>f.call(o,p));let d=u.call(o,c);return f.call(o,d)}:o[a]=(...c)=>{let d=u.apply(o,c);return d===!1&&(d=f.apply(o,c)),d}}i.hooks=o}if(t.walkTokens){let o=this.defaults.walkTokens,r=t.walkTokens;i.walkTokens=function(a){let u=[];return u.push(r.call(this,a)),o&&(u=u.concat(o.call(this,a))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Pe.lex(n,e??this.defaults)}parser(n,e){return Ne.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let i={...t},o={...this.defaults,...i},r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=n);let a=o.hooks?o.hooks.provideLexer():n?Pe.lex:Pe.lexInline,u=o.hooks?o.hooks.provideParser():n?Ne.parse:Ne.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(e):e).then(f=>a(f,o)).then(f=>o.hooks?o.hooks.processAllTokens(f):f).then(f=>o.walkTokens?Promise.all(this.walkTokens(f,o.walkTokens)).then(()=>f):f).then(f=>u(f,o)).then(f=>o.hooks?o.hooks.postprocess(f):f).catch(r);try{o.hooks&&(e=o.hooks.preprocess(e));let f=a(e,o);o.hooks&&(f=o.hooks.processAllTokens(f)),o.walkTokens&&this.walkTokens(f,o.walkTokens);let c=u(f,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(f){return r(f)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let i="<p>An error occurred:</p><pre>"+Ee(t.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(t);throw t}}},Xe=new GT;function W(n,e){return Xe.parse(n,e)}W.options=W.setOptions=function(n){return Xe.setOptions(n),W.defaults=Xe.defaults,qs(W.defaults),W};W.getDefaults=ki;W.defaults=Qe;W.use=function(...n){return Xe.use(...n),W.defaults=Xe.defaults,qs(W.defaults),W};W.walkTokens=function(n,e){return Xe.walkTokens(n,e)};W.parseInline=Xe.parseInline;W.Parser=Ne;W.parser=Ne.parse;W.Renderer=pn;W.TextRenderer=Li;W.Lexer=Pe;W.lexer=Pe.lex;W.Tokenizer=dn;W.Hooks=Qt;W.parse=W;W.options;W.setOptions;W.use;W.walkTokens;W.parseInline;Ne.parse;Pe.lex;function HT(){const n=document.querySelectorAll(".expandable img"),e=document.querySelector("#expanded-img-view"),t=e.querySelector("img");n.forEach(i=>{i.onclick=function(){t.src=i.src,e.classList.add("open")}}),e.onclick=()=>e.classList.remove("open"),window.addEventListener("keydown",function(i){i.key==="Escape"&&e.classList.remove("open")})}function zT(){const n=document.getElementsByTagName("header")[0];e(),window.onscroll=e;function e(){document.documentElement.scrollTop>=10?n.classList.remove("emphasized"):n.classList.add("emphasized")}}function JT(){const n=document.getElementById("nav-menu");window.toggleNavMenu=()=>{n.classList.toggle("open")},window.addEventListener("keydown",function(e){e.key==="Escape"&&n.classList.remove("open")})}function WT(){const n=document.getElementById("ai-search-form"),e=document.getElementById("ai-toggle-btn"),t=document.getElementById("ai-prompt-input"),i=document.getElementById("ai-conversation-container"),o=document.getElementById("ai-conversation"),r=document.getElementById("ai-welcoming-container"),a="AIzaSyCCPuYJeS5DAJKMEwy2A6L1qjdDi8I4xKs",u=new xy({apiKey:a});var f;function c(){n.classList.contains("open")?(n.classList.remove("open"),n.classList.add("closed"),t.blur()):(n.classList.add("open"),n.classList.remove("closed"),t.focus())}e.onclick=function(){c()},window.addEventListener("keydown",function(d){d.key==="Escape"&&(n.classList.remove("open"),n.classList.add("closed"),t.blur())}),window.addEventListener("keydown",function(d){d.key==="/"&&(n.classList.add("open"),n.classList.remove("closed"),setTimeout(()=>{t.focus()},100))}),n.addEventListener("submit",async function(d){d.preventDefault(),f=t.value,n.classList.add("loading"),t.disabled=!0;var p;try{p=(await u.models.generateContent({model:"gemini-2.0-flash",contents:f})).text}catch(y){p="Sorry. An unknown error just happened.",console.log("AI Error",y)}i.classList.remove("hidden"),r.classList.add("invisible","opacity-0"),ZT(r,"max-h-","max-h-0");const h=document.createElement("pre");h.classList.add("animate-fade-in-up","text-wrap");const g=document.createElement("div");g.classList.add("first-letter:uppercase","pb-[6px]","text-[#6366F1]"),g.innerHTML=f;const m=document.createElement("div");m.classList.add("text-(--text-primary-color)/70","text-balance"),m.innerHTML=W.parse(p),h.appendChild(g),h.appendChild(m),o.appendChild(h),o.scrollTop=o.scrollHeight,n.reset(),n.classList.remove("loading"),t.disabled=!1,t.focus()})}function ZT(n,e,t){const i="("+e+"[.\\S]*(\\s|(-)?(\\w*)(\\s)?)).*?",o=new RegExp(i,"g");n.className=n.className.replace(o,t+" ")}document.addEventListener("DOMContentLoaded",()=>{HT(),zT(),JT(),WT(),sT(),console.log("All resources loaded!")});
